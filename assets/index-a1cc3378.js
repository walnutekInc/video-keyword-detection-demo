import{K as wn,l as Bs,k as wt,s as Fs,L as Us,o as te,C as vi,m as Pi,B as Li,c as se,y as Vs,M as $s,N as An,a as re,F as Qt,d as On,e as lt,O as Sn,t as Hs,w as Ft,b as Ue,f as Ws,P as ks,n as ct,Q as qs,z as Ut}from"./index-2ea54db8.js";import{_ as Ys}from"./Pageheader-6f9c72f9.js";import"./menu-f91c16ef.js";/*!
 * FilePond 4.30.4
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const zs=e=>e instanceof HTMLElement,Xs=(e,t=[],n=[])=>{const i={...e},s=[],r=[],a=()=>({...i}),l=()=>{const h=[...s];return s.length=0,h},o=()=>{const h=[...r];r.length=0,h.forEach(({type:g,data:I})=>{d(g,I)})},d=(h,g,I)=>{if(I&&!document.hidden){r.push({type:h,data:g});return}f[h]&&f[h](g),s.push({type:h,data:g})},c=(h,...g)=>p[h]?p[h](...g):null,u={getState:a,processActionQueue:l,processDispatchQueue:o,dispatch:d,query:c};let p={};t.forEach(h=>{p={...h(i),...p}});let f={};return n.forEach(h=>{f={...h(d,c,i),...f}}),u},js=(e,t,n)=>{if(typeof n=="function"){e[t]=n;return}Object.defineProperty(e,t,{...n})},H=(e,t)=>{for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])},De=e=>{const t={};return H(e,n=>{js(t,n,e[n])}),t},j=(e,t,n=null)=>{if(n===null)return e.getAttribute(t)||e.hasAttribute(t);e.setAttribute(t,n)},Qs="http://www.w3.org/2000/svg",Ks=["svg","path"],Dn=e=>Ks.includes(e),At=(e,t,n={})=>{typeof t=="object"&&(n=t,t=null);const i=Dn(e)?document.createElementNS(Qs,e):document.createElement(e);return t&&(Dn(e)?j(i,"class",t):i.className=t),H(n,(s,r)=>{j(i,s,r)}),i},Zs=e=>(t,n)=>{typeof n<"u"&&e.children[n]?e.insertBefore(t,e.children[n]):e.appendChild(t)},Js=(e,t)=>(n,i)=>(typeof i<"u"?t.splice(i,0,n):t.push(n),n),er=(e,t)=>n=>(t.splice(t.indexOf(n),1),n.element.parentNode&&e.removeChild(n.element),n),tr=(()=>typeof window<"u"&&typeof window.document<"u")(),bi=()=>tr,nr=bi()?At("svg"):{},ir="children"in nr?e=>e.children.length:e=>e.childNodes.length,Ci=(e,t,n,i)=>{const s=n[0]||e.left,r=n[1]||e.top,a=s+e.width,l=r+e.height*(i[1]||1),o={element:{...e},inner:{left:e.left,top:e.top,right:e.right,bottom:e.bottom},outer:{left:s,top:r,right:a,bottom:l}};return t.filter(d=>!d.isRectIgnored()).map(d=>d.rect).forEach(d=>{Mn(o.inner,{...d.inner}),Mn(o.outer,{...d.outer})}),vn(o.inner),o.outer.bottom+=o.element.marginBottom,o.outer.right+=o.element.marginRight,vn(o.outer),o},Mn=(e,t)=>{t.top+=e.top,t.right+=e.left,t.bottom+=e.top,t.left+=e.left,t.bottom>e.bottom&&(e.bottom=t.bottom),t.right>e.right&&(e.right=t.right)},vn=e=>{e.width=e.right-e.left,e.height=e.bottom-e.top},Pe=e=>typeof e=="number",sr=(e,t,n,i=.001)=>Math.abs(e-t)<i&&Math.abs(n)<i,rr=({stiffness:e=.5,damping:t=.75,mass:n=10}={})=>{let i=null,s=null,r=0,a=!1;const d=De({interpolate:(c,u)=>{if(a)return;if(!(Pe(i)&&Pe(s))){a=!0,r=0;return}const p=-(s-i)*e;r+=p/n,s+=r,r*=t,sr(s,i,r)||u?(s=i,r=0,a=!0,d.onupdate(s),d.oncomplete(s)):d.onupdate(s)},target:{set:c=>{if(Pe(c)&&!Pe(s)&&(s=c),i===null&&(i=c,s=c),i=c,s===i||typeof i>"u"){a=!0,r=0,d.onupdate(s),d.oncomplete(s);return}a=!1},get:()=>i},resting:{get:()=>a},onupdate:c=>{},oncomplete:c=>{}});return d},ar=e=>e<.5?2*e*e:-1+(4-2*e)*e,or=({duration:e=500,easing:t=ar,delay:n=0}={})=>{let i=null,s,r,a=!0,l=!1,o=null;const c=De({interpolate:(u,p)=>{a||o===null||(i===null&&(i=u),!(u-i<n)&&(s=u-i-n,s>=e||p?(s=1,r=l?0:1,c.onupdate(r*o),c.oncomplete(r*o),a=!0):(r=s/e,c.onupdate((s>=0?t(l?1-r:r):0)*o))))},target:{get:()=>l?0:o,set:u=>{if(o===null){o=u,c.onupdate(u),c.oncomplete(u);return}u<o?(o=1,l=!0):(l=!1,o=u),a=!1,i=null}},resting:{get:()=>a},onupdate:u=>{},oncomplete:u=>{}});return c},Pn={spring:rr,tween:or},lr=(e,t,n)=>{const i=e[t]&&typeof e[t][n]=="object"?e[t][n]:e[t]||e,s=typeof i=="string"?i:i.type,r=typeof i=="object"?{...i}:{};return Pn[s]?Pn[s](r):null},cn=(e,t,n,i=!1)=>{t=Array.isArray(t)?t:[t],t.forEach(s=>{e.forEach(r=>{let a=r,l=()=>n[r],o=d=>n[r]=d;typeof r=="object"&&(a=r.key,l=r.getter||l,o=r.setter||o),!(s[a]&&!i)&&(s[a]={get:l,set:o})})})},cr=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:i})=>{const s={...t},r=[];return H(e,(a,l)=>{const o=lr(l);if(!o)return;o.onupdate=c=>{t[a]=c},o.target=s[a],cn([{key:a,setter:c=>{o.target!==c&&(o.target=c)},getter:()=>t[a]}],[n,i],t,!0),r.push(o)}),{write:a=>{let l=document.hidden,o=!0;return r.forEach(d=>{d.resting||(o=!1),d.interpolate(a,l)}),o},destroy:()=>{}}},dr=e=>(t,n)=>{e.addEventListener(t,n)},ur=e=>(t,n)=>{e.removeEventListener(t,n)},fr=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:i,viewState:s,view:r})=>{const a=[],l=dr(r.element),o=ur(r.element);return i.on=(d,c)=>{a.push({type:d,fn:c}),l(d,c)},i.off=(d,c)=>{a.splice(a.findIndex(u=>u.type===d&&u.fn===c),1),o(d,c)},{write:()=>!0,destroy:()=>{a.forEach(d=>{o(d.type,d.fn)})}}},hr=({mixinConfig:e,viewProps:t,viewExternalAPI:n})=>{cn(e,n,t)},ie=e=>e!=null,pr={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},Er=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:i,view:s})=>{const r={...t},a={};cn(e,[n,i],t);const l=()=>[t.translateX||0,t.translateY||0],o=()=>[t.scaleX||0,t.scaleY||0],d=()=>s.rect?Ci(s.rect,s.childViews,l(),o()):null;return n.rect={get:d},i.rect={get:d},e.forEach(c=>{t[c]=typeof r[c]>"u"?pr[c]:r[c]}),{write:()=>{if(gr(a,t))return mr(s.element,t),Object.assign(a,{...t}),!0},destroy:()=>{}}},gr=(e,t)=>{if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const n in t)if(t[n]!==e[n])return!0;return!1},mr=(e,{opacity:t,perspective:n,translateX:i,translateY:s,scaleX:r,scaleY:a,rotateX:l,rotateY:o,rotateZ:d,originX:c,originY:u,width:p,height:f})=>{let h="",g="";(ie(c)||ie(u))&&(g+=`transform-origin: ${c||0}px ${u||0}px;`),ie(n)&&(h+=`perspective(${n}px) `),(ie(i)||ie(s))&&(h+=`translate3d(${i||0}px, ${s||0}px, 0) `),(ie(r)||ie(a))&&(h+=`scale3d(${ie(r)?r:1}, ${ie(a)?a:1}, 1) `),ie(d)&&(h+=`rotateZ(${d}rad) `),ie(l)&&(h+=`rotateX(${l}rad) `),ie(o)&&(h+=`rotateY(${o}rad) `),h.length&&(g+=`transform:${h};`),ie(t)&&(g+=`opacity:${t};`,t===0&&(g+="visibility:hidden;"),t<1&&(g+="pointer-events:none;")),ie(f)&&(g+=`height:${f}px;`),ie(p)&&(g+=`width:${p}px;`);const I=e.elementCurrentStyle||"";(g.length!==I.length||g!==I)&&(e.style.cssText=g,e.elementCurrentStyle=g)},Ir={styles:Er,listeners:fr,animations:cr,apis:hr},Ln=(e={},t={},n={})=>(t.layoutCalculated||(e.paddingTop=parseInt(n.paddingTop,10)||0,e.marginTop=parseInt(n.marginTop,10)||0,e.marginRight=parseInt(n.marginRight,10)||0,e.marginBottom=parseInt(n.marginBottom,10)||0,e.marginLeft=parseInt(n.marginLeft,10)||0,t.layoutCalculated=!0),e.left=t.offsetLeft||0,e.top=t.offsetTop||0,e.width=t.offsetWidth||0,e.height=t.offsetHeight||0,e.right=e.left+e.width,e.bottom=e.top+e.height,e.scrollTop=t.scrollTop,e.hidden=t.offsetParent===null,e),Q=({tag:e="div",name:t=null,attributes:n={},read:i=()=>{},write:s=()=>{},create:r=()=>{},destroy:a=()=>{},filterFrameActionsForChild:l=(f,h)=>h,didCreateView:o=()=>{},didWriteView:d=()=>{},ignoreRect:c=!1,ignoreRectUpdate:u=!1,mixins:p=[]}={})=>(f,h={})=>{const g=At(e,`filepond--${t}`,n),I=window.getComputedStyle(g,null),_=Ln();let E=null,m=!1;const T=[],y=[],O={},P={},R=[s],M=[i],N=[a],L=()=>g,v=()=>T.concat(),G=()=>O,S=U=>($,X)=>$(U,X),x=()=>E||(E=Ci(_,T,[0,0],[1,1]),E),w=()=>I,D=()=>{E=null,T.forEach(X=>X._read()),!(u&&_.width&&_.height)&&Ln(_,g,I);const $={root:z,props:h,rect:_};M.forEach(X=>X($))},C=(U,$,X)=>{let ee=$.length===0;return R.forEach(W=>{W({props:h,root:z,actions:$,timestamp:U,shouldOptimize:X})===!1&&(ee=!1)}),y.forEach(W=>{W.write(U)===!1&&(ee=!1)}),T.filter(W=>!!W.element.parentNode).forEach(W=>{W._write(U,l(W,$),X)||(ee=!1)}),T.forEach((W,ot)=>{W.element.parentNode||(z.appendChild(W.element,ot),W._read(),W._write(U,l(W,$),X),ee=!1)}),m=ee,d({props:h,root:z,actions:$,timestamp:U}),ee},b=()=>{y.forEach(U=>U.destroy()),N.forEach(U=>{U({root:z,props:h})}),T.forEach(U=>U._destroy())},B={element:{get:L},style:{get:w},childViews:{get:v}},F={...B,rect:{get:x},ref:{get:G},is:U=>t===U,appendChild:Zs(g),createChildView:S(f),linkView:U=>(T.push(U),U),unlinkView:U=>{T.splice(T.indexOf(U),1)},appendChildView:Js(g,T),removeChildView:er(g,T),registerWriter:U=>R.push(U),registerReader:U=>M.push(U),registerDestroyer:U=>N.push(U),invalidateLayout:()=>g.layoutCalculated=!1,dispatch:f.dispatch,query:f.query},Y={element:{get:L},childViews:{get:v},rect:{get:x},resting:{get:()=>m},isRectIgnored:()=>c,_read:D,_write:C,_destroy:b},K={...B,rect:{get:()=>_}};Object.keys(p).sort((U,$)=>U==="styles"?1:$==="styles"?-1:0).forEach(U=>{const $=Ir[U]({mixinConfig:p[U],viewProps:h,viewState:P,viewInternalAPI:F,viewExternalAPI:Y,view:De(K)});$&&y.push($)});const z=De(F);r({root:z,props:h});const _e=ir(g);return T.forEach((U,$)=>{z.appendChild(U.element,_e+$)}),o(z),De(Y)},_r=(e,t,n=60)=>{const i="__framePainter";if(window[i]){window[i].readers.push(e),window[i].writers.push(t);return}window[i]={readers:[e],writers:[t]};const s=window[i],r=1e3/n;let a=null,l=null,o=null,d=null;const c=()=>{document.hidden?(o=()=>window.setTimeout(()=>u(performance.now()),r),d=()=>window.clearTimeout(l)):(o=()=>window.requestAnimationFrame(u),d=()=>window.cancelAnimationFrame(l))};document.addEventListener("visibilitychange",()=>{d&&d(),c(),u(performance.now())});const u=p=>{l=o(u),a||(a=p);const f=p-a;f<=r||(a=p-f%r,s.readers.forEach(h=>h()),s.writers.forEach(h=>h(p)))};return c(),u(performance.now()),{pause:()=>{d(l)}}},oe=(e,t)=>({root:n,props:i,actions:s=[],timestamp:r,shouldOptimize:a})=>{s.filter(l=>e[l.type]).forEach(l=>e[l.type]({root:n,props:i,action:l.data,timestamp:r,shouldOptimize:a})),t&&t({root:n,props:i,actions:s,timestamp:r,shouldOptimize:a})},bn=(e,t)=>t.parentNode.insertBefore(e,t),Cn=(e,t)=>t.parentNode.insertBefore(e,t.nextSibling),Lt=e=>Array.isArray(e),we=e=>e==null,Tr=e=>e.trim(),bt=e=>""+e,Rr=(e,t=",")=>we(e)?[]:Lt(e)?e:bt(e).split(t).map(Tr).filter(n=>n.length),Ni=e=>typeof e=="boolean",xi=e=>Ni(e)?e:e==="true",ae=e=>typeof e=="string",Gi=e=>Pe(e)?e:ae(e)?bt(e).replace(/[a-z]+/gi,""):0,Tt=e=>parseInt(Gi(e),10),Nn=e=>parseFloat(Gi(e)),ze=e=>Pe(e)&&isFinite(e)&&Math.floor(e)===e,xn=(e,t=1e3)=>{if(ze(e))return e;let n=bt(e).trim();return/MB$/i.test(n)?(n=n.replace(/MB$i/,"").trim(),Tt(n)*t*t):/KB/i.test(n)?(n=n.replace(/KB$i/,"").trim(),Tt(n)*t):Tt(n)},Le=e=>typeof e=="function",yr=e=>{let t=self,n=e.split("."),i=null;for(;i=n.shift();)if(t=t[i],!t)return null;return t},Gn={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},wr=e=>{const t={};return t.url=ae(e)?e:e.url||"",t.timeout=e.timeout?parseInt(e.timeout,10):0,t.headers=e.headers?e.headers:{},H(Gn,n=>{t[n]=Ar(n,e[n],Gn[n],t.timeout,t.headers)}),t.process=e.process||ae(e)||e.url?t.process:null,t.remove=e.remove||null,delete t.headers,t},Ar=(e,t,n,i,s)=>{if(t===null)return null;if(typeof t=="function")return t;const r={url:n==="GET"||n==="PATCH"?`?${e}=`:"",method:n,headers:s,withCredentials:!1,timeout:i,onload:null,ondata:null,onerror:null};if(ae(t))return r.url=t,r;if(Object.assign(r,t),ae(r.headers)){const a=r.headers.split(/:(.+)/);r.headers={header:a[0],value:a[1]}}return r.withCredentials=xi(r.withCredentials),r},Or=e=>wr(e),Sr=e=>e===null,J=e=>typeof e=="object"&&e!==null,Dr=e=>J(e)&&ae(e.url)&&J(e.process)&&J(e.revert)&&J(e.restore)&&J(e.fetch),Kt=e=>Lt(e)?"array":Sr(e)?"null":ze(e)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(e)?"bytes":Dr(e)?"api":typeof e,Mr=e=>e.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'),vr={array:Rr,boolean:xi,int:e=>Kt(e)==="bytes"?xn(e):Tt(e),number:Nn,float:Nn,bytes:xn,string:e=>Le(e)?e:bt(e),function:e=>yr(e),serverapi:Or,object:e=>{try{return JSON.parse(Mr(e))}catch{return null}}},Pr=(e,t)=>vr[t](e),Bi=(e,t,n)=>{if(e===t)return e;let i=Kt(e);if(i!==n){const s=Pr(e,n);if(i=Kt(s),s===null)throw`Trying to assign value with incorrect type to "${option}", allowed type: "${n}"`;e=s}return e},Lr=(e,t)=>{let n=e;return{enumerable:!0,get:()=>n,set:i=>{n=Bi(i,e,t)}}},br=e=>{const t={};return H(e,n=>{const i=e[n];t[n]=Lr(i[0],i[1])}),De(t)},Cr=e=>({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:br(e)}),Ct=(e,t="-")=>e.split(/(?=[A-Z])/).map(n=>n.toLowerCase()).join(t),Nr=(e,t)=>{const n={};return H(t,i=>{n[i]={get:()=>e.getState().options[i],set:s=>{e.dispatch(`SET_${Ct(i,"_").toUpperCase()}`,{value:s})}}}),n},xr=e=>(t,n,i)=>{const s={};return H(e,r=>{const a=Ct(r,"_").toUpperCase();s[`SET_${a}`]=l=>{try{i.options[r]=l.value}catch{}t(`DID_SET_${a}`,{value:i.options[r]})}}),s},Gr=e=>t=>{const n={};return H(e,i=>{n[`GET_${Ct(i,"_").toUpperCase()}`]=s=>t.options[i]}),n},Ee={API:1,DROP:2,BROWSE:3,PASTE:4,NONE:5},dn=()=>Math.random().toString(36).substring(2,11),un=(e,t)=>e.splice(t,1),Br=(e,t)=>{t?e():document.hidden?Promise.resolve(1).then(e):setTimeout(e,0)},Nt=()=>{const e=[],t=(i,s)=>{un(e,e.findIndex(r=>r.event===i&&(r.cb===s||!s)))},n=(i,s,r)=>{e.filter(a=>a.event===i).map(a=>a.cb).forEach(a=>Br(()=>a(...s),r))};return{fireSync:(i,...s)=>{n(i,s,!0)},fire:(i,...s)=>{n(i,s,!1)},on:(i,s)=>{e.push({event:i,cb:s})},onOnce:(i,s)=>{e.push({event:i,cb:(...r)=>{t(i,s),s(...r)}})},off:t}},Fi=(e,t,n)=>{Object.getOwnPropertyNames(e).filter(i=>!n.includes(i)).forEach(i=>Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i)))},Fr=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],le=e=>{const t={};return Fi(e,t,Fr),t},Ur=e=>{e.forEach((t,n)=>{t.released&&un(e,n)})},V={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},Z={INPUT:1,LIMBO:2,LOCAL:3},Ui=e=>/[^0-9]+/.exec(e),Vi=()=>Ui(1.1.toLocaleString())[0],Vr=()=>{const e=Vi(),t=1e3.toLocaleString(),n=1e3.toString();return t!==n?Ui(t)[0]:e==="."?",":"."},A={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},fn=[],ge=(e,t,n)=>new Promise((i,s)=>{const r=fn.filter(l=>l.key===e).map(l=>l.cb);if(r.length===0){i(t);return}const a=r.shift();r.reduce((l,o)=>l.then(d=>o(d,n)),a(t,n)).then(l=>i(l)).catch(l=>s(l))}),Ge=(e,t,n)=>fn.filter(i=>i.key===e).map(i=>i.cb(t,n)),$r=(e,t)=>fn.push({key:e,cb:t}),Hr=e=>Object.assign(Ve,e),Ot=()=>({...Ve}),Wr=e=>{H(e,(t,n)=>{Ve[t]&&(Ve[t][0]=Bi(n,Ve[t][0],Ve[t][1]))})},Ve={id:[null,A.STRING],name:["filepond",A.STRING],disabled:[!1,A.BOOLEAN],className:[null,A.STRING],required:[!1,A.BOOLEAN],captureMethod:[null,A.STRING],allowSyncAcceptAttribute:[!0,A.BOOLEAN],allowDrop:[!0,A.BOOLEAN],allowBrowse:[!0,A.BOOLEAN],allowPaste:[!0,A.BOOLEAN],allowMultiple:[!1,A.BOOLEAN],allowReplace:[!0,A.BOOLEAN],allowRevert:[!0,A.BOOLEAN],allowRemove:[!0,A.BOOLEAN],allowProcess:[!0,A.BOOLEAN],allowReorder:[!1,A.BOOLEAN],allowDirectoriesOnly:[!1,A.BOOLEAN],storeAsFile:[!1,A.BOOLEAN],forceRevert:[!1,A.BOOLEAN],maxFiles:[null,A.INT],checkValidity:[!1,A.BOOLEAN],itemInsertLocationFreedom:[!0,A.BOOLEAN],itemInsertLocation:["before",A.STRING],itemInsertInterval:[75,A.INT],dropOnPage:[!1,A.BOOLEAN],dropOnElement:[!0,A.BOOLEAN],dropValidation:[!1,A.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],A.ARRAY],instantUpload:[!0,A.BOOLEAN],maxParallelUploads:[2,A.INT],allowMinimumUploadDuration:[!0,A.BOOLEAN],chunkUploads:[!1,A.BOOLEAN],chunkForce:[!1,A.BOOLEAN],chunkSize:[5e6,A.INT],chunkRetryDelays:[[500,1e3,3e3],A.ARRAY],server:[null,A.SERVER_API],fileSizeBase:[1e3,A.INT],labelFileSizeBytes:["bytes",A.STRING],labelFileSizeKilobytes:["KB",A.STRING],labelFileSizeMegabytes:["MB",A.STRING],labelFileSizeGigabytes:["GB",A.STRING],labelDecimalSeparator:[Vi(),A.STRING],labelThousandsSeparator:[Vr(),A.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',A.STRING],labelInvalidField:["Field contains invalid files",A.STRING],labelFileWaitingForSize:["Waiting for size",A.STRING],labelFileSizeNotAvailable:["Size not available",A.STRING],labelFileCountSingular:["file in list",A.STRING],labelFileCountPlural:["files in list",A.STRING],labelFileLoading:["Loading",A.STRING],labelFileAdded:["Added",A.STRING],labelFileLoadError:["Error during load",A.STRING],labelFileRemoved:["Removed",A.STRING],labelFileRemoveError:["Error during remove",A.STRING],labelFileProcessing:["Uploading",A.STRING],labelFileProcessingComplete:["Upload complete",A.STRING],labelFileProcessingAborted:["Upload cancelled",A.STRING],labelFileProcessingError:["Error during upload",A.STRING],labelFileProcessingRevertError:["Error during revert",A.STRING],labelTapToCancel:["tap to cancel",A.STRING],labelTapToRetry:["tap to retry",A.STRING],labelTapToUndo:["tap to undo",A.STRING],labelButtonRemoveItem:["Remove",A.STRING],labelButtonAbortItemLoad:["Abort",A.STRING],labelButtonRetryItemLoad:["Retry",A.STRING],labelButtonAbortItemProcessing:["Cancel",A.STRING],labelButtonUndoItemProcessing:["Undo",A.STRING],labelButtonRetryItemProcessing:["Retry",A.STRING],labelButtonProcessItem:["Upload",A.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',A.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',A.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',A.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',A.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',A.STRING],oninit:[null,A.FUNCTION],onwarning:[null,A.FUNCTION],onerror:[null,A.FUNCTION],onactivatefile:[null,A.FUNCTION],oninitfile:[null,A.FUNCTION],onaddfilestart:[null,A.FUNCTION],onaddfileprogress:[null,A.FUNCTION],onaddfile:[null,A.FUNCTION],onprocessfilestart:[null,A.FUNCTION],onprocessfileprogress:[null,A.FUNCTION],onprocessfileabort:[null,A.FUNCTION],onprocessfilerevert:[null,A.FUNCTION],onprocessfile:[null,A.FUNCTION],onprocessfiles:[null,A.FUNCTION],onremovefile:[null,A.FUNCTION],onpreparefile:[null,A.FUNCTION],onupdatefiles:[null,A.FUNCTION],onreorderfiles:[null,A.FUNCTION],beforeDropFile:[null,A.FUNCTION],beforeAddFile:[null,A.FUNCTION],beforeRemoveFile:[null,A.FUNCTION],beforePrepareFile:[null,A.FUNCTION],stylePanelLayout:[null,A.STRING],stylePanelAspectRatio:[null,A.STRING],styleItemPanelAspectRatio:[null,A.STRING],styleButtonRemoveItemPosition:["left",A.STRING],styleButtonProcessItemPosition:["right",A.STRING],styleLoadIndicatorPosition:["right",A.STRING],styleProgressIndicatorPosition:["right",A.STRING],styleButtonRemoveItemAlign:[!1,A.BOOLEAN],files:[[],A.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],A.ARRAY]},be=(e,t)=>we(t)?e[0]||null:ze(t)?e[t]||null:(typeof t=="object"&&(t=t.id),e.find(n=>n.id===t)||null),$i=e=>{if(we(e))return e;if(/:/.test(e)){const t=e.split(":");return t[1]/t[0]}return parseFloat(e)},me=e=>e.filter(t=>!t.archived),kr={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4};let dt=null;const qr=()=>{if(dt===null)try{const e=new DataTransfer;e.items.add(new File(["hello world"],"This_Works.txt"));const t=document.createElement("input");t.setAttribute("type","file"),t.files=e.files,dt=t.files.length===1}catch{dt=!1}return dt},Yr=[V.LOAD_ERROR,V.PROCESSING_ERROR,V.PROCESSING_REVERT_ERROR],zr=[V.LOADING,V.PROCESSING,V.PROCESSING_QUEUED,V.INIT],Xr=[V.PROCESSING_COMPLETE],jr=e=>Yr.includes(e.status),Qr=e=>zr.includes(e.status),Kr=e=>Xr.includes(e.status),Bn=e=>J(e.options.server)&&(J(e.options.server.process)||Le(e.options.server.process)),Zr=e=>({GET_STATUS:()=>{const t=me(e.items),{EMPTY:n,ERROR:i,BUSY:s,IDLE:r,READY:a}=kr;return t.length===0?n:t.some(jr)?i:t.some(Qr)?s:t.some(Kr)?a:r},GET_ITEM:t=>be(e.items,t),GET_ACTIVE_ITEM:t=>be(me(e.items),t),GET_ACTIVE_ITEMS:()=>me(e.items),GET_ITEMS:()=>e.items,GET_ITEM_NAME:t=>{const n=be(e.items,t);return n?n.filename:null},GET_ITEM_SIZE:t=>{const n=be(e.items,t);return n?n.fileSize:null},GET_STYLES:()=>Object.keys(e.options).filter(t=>/^style/.test(t)).map(t=>({name:t,value:e.options[t]})),GET_PANEL_ASPECT_RATIO:()=>/circle/.test(e.options.stylePanelLayout)?1:$i(e.options.stylePanelAspectRatio),GET_ITEM_PANEL_ASPECT_RATIO:()=>e.options.styleItemPanelAspectRatio,GET_ITEMS_BY_STATUS:t=>me(e.items).filter(n=>n.status===t),GET_TOTAL_ITEMS:()=>me(e.items).length,SHOULD_UPDATE_FILE_INPUT:()=>e.options.storeAsFile&&qr()&&!Bn(e),IS_ASYNC:()=>Bn(e),GET_FILE_SIZE_LABELS:t=>({labelBytes:t("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:t("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:t("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:t("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0})}),Jr=e=>{const t=me(e.items).length;if(!e.options.allowMultiple)return t===0;const n=e.options.maxFiles;return n===null||t<n},Hi=(e,t,n)=>Math.max(Math.min(n,e),t),ea=(e,t,n)=>e.splice(t,0,n),ta=(e,t,n)=>we(t)?null:typeof n>"u"?(e.push(t),t):(n=Hi(n,0,e.length),ea(e,n,t),t),Zt=e=>/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(e),at=e=>e.split("/").pop().split("?").shift(),xt=e=>e.split(".").pop(),na=e=>{if(typeof e!="string")return"";const t=e.split("/").pop();return/svg/.test(t)?"svg":/zip|compressed/.test(t)?"zip":/plain/.test(t)?"txt":/msword/.test(t)?"doc":/[a-z]+/.test(t)?t==="jpeg"?"jpg":t:""},Ke=(e,t="")=>(t+e).slice(-t.length),Wi=(e=new Date)=>`${e.getFullYear()}-${Ke(e.getMonth()+1,"00")}-${Ke(e.getDate(),"00")}_${Ke(e.getHours(),"00")}-${Ke(e.getMinutes(),"00")}-${Ke(e.getSeconds(),"00")}`,qe=(e,t,n=null,i=null)=>{const s=typeof n=="string"?e.slice(0,e.size,n):e.slice(0,e.size,e.type);return s.lastModifiedDate=new Date,e._relativePath&&(s._relativePath=e._relativePath),ae(t)||(t=Wi()),t&&i===null&&xt(t)?s.name=t:(i=i||na(s.type),s.name=t+(i?"."+i:"")),s},ia=()=>window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,ki=(e,t)=>{const n=ia();if(n){const i=new n;return i.append(e),i.getBlob(t)}return new Blob([e],{type:t})},sa=(e,t)=>{const n=new ArrayBuffer(e.length),i=new Uint8Array(n);for(let s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return ki(n,t)},qi=e=>(/^data:(.+);/.exec(e)||[])[1]||null,ra=e=>e.split(",")[1].replace(/\s/g,""),aa=e=>atob(ra(e)),oa=e=>{const t=qi(e),n=aa(e);return sa(n,t)},la=(e,t,n)=>qe(oa(e),t,null,n),ca=e=>{if(!/^content-disposition:/i.test(e))return null;const t=e.split(/filename=|filename\*=.+''/).splice(1).map(n=>n.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(n=>n.length);return t.length?decodeURI(t[t.length-1]):null},da=e=>{if(/content-length:/i.test(e)){const t=e.match(/[0-9]+/)[0];return t?parseInt(t,10):null}return null},ua=e=>/x-content-transfer-id:/i.test(e)&&(e.split(":")[1]||"").trim()||null,hn=e=>{const t={source:null,name:null,size:null},n=e.split(`
`);for(let i of n){const s=ca(i);if(s){t.name=s;continue}const r=da(i);if(r){t.size=r;continue}const a=ua(i);if(a){t.source=a;continue}}return t},fa=e=>{const t={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},n=()=>t.progress,i=()=>{t.request&&t.request.abort&&t.request.abort()},s=()=>{const l=t.source;a.fire("init",l),l instanceof File?a.fire("load",l):l instanceof Blob?a.fire("load",qe(l,l.name)):Zt(l)?a.fire("load",la(l)):r(l)},r=l=>{if(!e){a.fire("error",{type:"error",body:"Can't load URL",code:400});return}t.timestamp=Date.now(),t.request=e(l,o=>{t.duration=Date.now()-t.timestamp,t.complete=!0,o instanceof Blob&&(o=qe(o,o.name||at(l))),a.fire("load",o instanceof Blob?o:o?o.body:null)},o=>{a.fire("error",typeof o=="string"?{type:"error",code:0,body:o}:o)},(o,d,c)=>{if(c&&(t.size=c),t.duration=Date.now()-t.timestamp,!o){t.progress=null;return}t.progress=d/c,a.fire("progress",t.progress)},()=>{a.fire("abort")},o=>{const d=hn(typeof o=="string"?o:o.headers);a.fire("meta",{size:t.size||d.size,filename:d.name,source:d.source})})},a={...Nt(),setSource:l=>t.source=l,getProgress:n,abort:i,load:s};return a},Fn=e=>/GET|HEAD/.test(e),Ce=(e,t,n)=>{const i={onheaders:()=>{},onprogress:()=>{},onload:()=>{},ontimeout:()=>{},onerror:()=>{},onabort:()=>{},abort:()=>{s=!0,a.abort()}};let s=!1,r=!1;n={method:"POST",headers:{},withCredentials:!1,...n},t=encodeURI(t),Fn(n.method)&&e&&(t=`${t}${encodeURIComponent(typeof e=="string"?e:JSON.stringify(e))}`);const a=new XMLHttpRequest,l=Fn(n.method)?a:a.upload;return l.onprogress=o=>{s||i.onprogress(o.lengthComputable,o.loaded,o.total)},a.onreadystatechange=()=>{a.readyState<2||a.readyState===4&&a.status===0||r||(r=!0,i.onheaders(a))},a.onload=()=>{a.status>=200&&a.status<300?i.onload(a):i.onerror(a)},a.onerror=()=>i.onerror(a),a.onabort=()=>{s=!0,i.onabort()},a.ontimeout=()=>i.ontimeout(a),a.open(n.method,t,!0),ze(n.timeout)&&(a.timeout=n.timeout),Object.keys(n.headers).forEach(o=>{const d=unescape(encodeURIComponent(n.headers[o]));a.setRequestHeader(o,d)}),n.responseType&&(a.responseType=n.responseType),n.withCredentials&&(a.withCredentials=!0),a.send(e),i},k=(e,t,n,i)=>({type:e,code:t,body:n,headers:i}),Ne=e=>t=>{e(k("error",0,"Timeout",t.getAllResponseHeaders()))},Un=e=>/\?/.test(e),et=(...e)=>{let t="";return e.forEach(n=>{t+=Un(t)&&Un(n)?n.replace(/\?/,"&"):n}),t},Vt=(e="",t)=>{if(typeof t=="function")return t;if(!t||!ae(t.url))return null;const n=t.onload||(s=>s),i=t.onerror||(s=>null);return(s,r,a,l,o,d)=>{const c=Ce(s,et(e,t.url),{...t,responseType:"blob"});return c.onload=u=>{const p=u.getAllResponseHeaders(),f=hn(p).name||at(s);r(k("load",u.status,t.method==="HEAD"?null:qe(n(u.response),f),p))},c.onerror=u=>{a(k("error",u.status,i(u.response)||u.statusText,u.getAllResponseHeaders()))},c.onheaders=u=>{d(k("headers",u.status,null,u.getAllResponseHeaders()))},c.ontimeout=Ne(a),c.onprogress=l,c.onabort=o,c}},ue={QUEUED:0,COMPLETE:1,PROCESSING:2,ERROR:3,WAITING:4},ha=(e,t,n,i,s,r,a,l,o,d,c)=>{const u=[],{chunkTransferId:p,chunkServer:f,chunkSize:h,chunkRetryDelays:g}=c,I={serverId:p,aborted:!1},_=t.ondata||(S=>S),E=t.onload||((S,x)=>x==="HEAD"?S.getResponseHeader("Upload-Offset"):S.response),m=t.onerror||(S=>null),T=S=>{const x=new FormData;J(s)&&x.append(n,JSON.stringify(s));const w=typeof t.headers=="function"?t.headers(i,s):{...t.headers,"Upload-Length":i.size},D={...t,headers:w},C=Ce(_(x),et(e,t.url),D);C.onload=b=>S(E(b,D.method)),C.onerror=b=>a(k("error",b.status,m(b.response)||b.statusText,b.getAllResponseHeaders())),C.ontimeout=Ne(a)},y=S=>{const x=et(e,f.url,I.serverId),D={headers:typeof t.headers=="function"?t.headers(I.serverId):{...t.headers},method:"HEAD"},C=Ce(null,x,D);C.onload=b=>S(E(b,D.method)),C.onerror=b=>a(k("error",b.status,m(b.response)||b.statusText,b.getAllResponseHeaders())),C.ontimeout=Ne(a)},O=Math.floor(i.size/h);for(let S=0;S<=O;S++){const x=S*h,w=i.slice(x,x+h,"application/offset+octet-stream");u[S]={index:S,size:w.size,offset:x,data:w,file:i,progress:0,retries:[...g],status:ue.QUEUED,error:null,request:null,timeout:null}}const P=()=>r(I.serverId),R=S=>S.status===ue.QUEUED||S.status===ue.ERROR,M=S=>{if(I.aborted)return;if(S=S||u.find(R),!S){u.every(B=>B.status===ue.COMPLETE)&&P();return}S.status=ue.PROCESSING,S.progress=null;const x=f.ondata||(B=>B),w=f.onerror||(B=>null),D=et(e,f.url,I.serverId),C=typeof f.headers=="function"?f.headers(S):{...f.headers,"Content-Type":"application/offset+octet-stream","Upload-Offset":S.offset,"Upload-Length":i.size,"Upload-Name":i.name},b=S.request=Ce(x(S.data),D,{...f,headers:C});b.onload=()=>{S.status=ue.COMPLETE,S.request=null,v()},b.onprogress=(B,F,Y)=>{S.progress=B?F:null,L()},b.onerror=B=>{S.status=ue.ERROR,S.request=null,S.error=w(B.response)||B.statusText,N(S)||a(k("error",B.status,w(B.response)||B.statusText,B.getAllResponseHeaders()))},b.ontimeout=B=>{S.status=ue.ERROR,S.request=null,N(S)||Ne(a)(B)},b.onabort=()=>{S.status=ue.QUEUED,S.request=null,o()}},N=S=>S.retries.length===0?!1:(S.status=ue.WAITING,clearTimeout(S.timeout),S.timeout=setTimeout(()=>{M(S)},S.retries.shift()),!0),L=()=>{const S=u.reduce((w,D)=>w===null||D.progress===null?null:w+D.progress,0);if(S===null)return l(!1,0,0);const x=u.reduce((w,D)=>w+D.size,0);l(!0,S,x)},v=()=>{u.filter(x=>x.status===ue.PROCESSING).length>=1||M()},G=()=>{u.forEach(S=>{clearTimeout(S.timeout),S.request&&S.request.abort()})};return I.serverId?y(S=>{I.aborted||(u.filter(x=>x.offset<S).forEach(x=>{x.status=ue.COMPLETE,x.progress=x.size}),v())}):T(S=>{I.aborted||(d(S),I.serverId=S,v())}),{abort:()=>{I.aborted=!0,G()}}},pa=(e,t,n,i)=>(s,r,a,l,o,d,c)=>{if(!s)return;const u=i.chunkUploads,p=u&&s.size>i.chunkSize,f=u&&(p||i.chunkForce);if(s instanceof Blob&&f)return ha(e,t,n,s,r,a,l,o,d,c,i);const h=t.ondata||(y=>y),g=t.onload||(y=>y),I=t.onerror||(y=>null),_=typeof t.headers=="function"?t.headers(s,r)||{}:{...t.headers},E={...t,headers:_};var m=new FormData;J(r)&&m.append(n,JSON.stringify(r)),(s instanceof Blob?[{name:null,file:s}]:s).forEach(y=>{m.append(n,y.file,y.name===null?y.file.name:`${y.name}${y.file.name}`)});const T=Ce(h(m),et(e,t.url),E);return T.onload=y=>{a(k("load",y.status,g(y.response),y.getAllResponseHeaders()))},T.onerror=y=>{l(k("error",y.status,I(y.response)||y.statusText,y.getAllResponseHeaders()))},T.ontimeout=Ne(l),T.onprogress=o,T.onabort=d,T},Ea=(e="",t,n,i)=>typeof t=="function"?(...s)=>t(n,...s,i):!t||!ae(t.url)?null:pa(e,t,n,i),Ze=(e="",t)=>{if(typeof t=="function")return t;if(!t||!ae(t.url))return(s,r)=>r();const n=t.onload||(s=>s),i=t.onerror||(s=>null);return(s,r,a)=>{const l=Ce(s,e+t.url,t);return l.onload=o=>{r(k("load",o.status,n(o.response),o.getAllResponseHeaders()))},l.onerror=o=>{a(k("error",o.status,i(o.response)||o.statusText,o.getAllResponseHeaders()))},l.ontimeout=Ne(a),l}},Yi=(e=0,t=1)=>e+Math.random()*(t-e),ga=(e,t=1e3,n=0,i=25,s=250)=>{let r=null;const a=Date.now(),l=()=>{let o=Date.now()-a,d=Yi(i,s);o+d>t&&(d=o+d-t);let c=o/t;if(c>=1||document.hidden){e(1);return}e(c),r=setTimeout(l,d)};return t>0&&l(),{clear:()=>{clearTimeout(r)}}},ma=(e,t)=>{const n={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},{allowMinimumUploadDuration:i}=t,s=(c,u)=>{const p=()=>{n.duration===0||n.progress===null||d.fire("progress",d.getProgress())},f=()=>{n.complete=!0,d.fire("load-perceived",n.response.body)};d.fire("start"),n.timestamp=Date.now(),n.perceivedPerformanceUpdater=ga(h=>{n.perceivedProgress=h,n.perceivedDuration=Date.now()-n.timestamp,p(),n.response&&n.perceivedProgress===1&&!n.complete&&f()},i?Yi(750,1500):0),n.request=e(c,u,h=>{n.response=J(h)?h:{type:"load",code:200,body:`${h}`,headers:{}},n.duration=Date.now()-n.timestamp,n.progress=1,d.fire("load",n.response.body),(!i||i&&n.perceivedProgress===1)&&f()},h=>{n.perceivedPerformanceUpdater.clear(),d.fire("error",J(h)?h:{type:"error",code:0,body:`${h}`})},(h,g,I)=>{n.duration=Date.now()-n.timestamp,n.progress=h?g/I:null,p()},()=>{n.perceivedPerformanceUpdater.clear(),d.fire("abort",n.response?n.response.body:null)},h=>{d.fire("transfer",h)})},r=()=>{n.request&&(n.perceivedPerformanceUpdater.clear(),n.request.abort&&n.request.abort(),n.complete=!0)},a=()=>{r(),n.complete=!1,n.perceivedProgress=0,n.progress=0,n.timestamp=null,n.perceivedDuration=0,n.duration=0,n.request=null,n.response=null},l=i?()=>n.progress?Math.min(n.progress,n.perceivedProgress):null:()=>n.progress||null,o=i?()=>Math.min(n.duration,n.perceivedDuration):()=>n.duration,d={...Nt(),process:s,abort:r,getProgress:l,getDuration:o,reset:a};return d},zi=e=>e.substring(0,e.lastIndexOf("."))||e,Ia=e=>{let t=[e.name,e.size,e.type];return e instanceof Blob||Zt(e)?t[0]=e.name||Wi():Zt(e)?(t[1]=e.length,t[2]=qi(e)):ae(e)&&(t[0]=at(e),t[1]=0,t[2]="application/octet-stream"),{name:t[0],size:t[1],type:t[2]}},Ye=e=>!!(e instanceof File||e instanceof Blob&&e.name),Xi=e=>{if(!J(e))return e;const t=Lt(e)?[]:{};for(const n in e){if(!e.hasOwnProperty(n))continue;const i=e[n];t[n]=i&&J(i)?Xi(i):i}return t},_a=(e=null,t=null,n=null)=>{const i=dn(),s={archived:!1,frozen:!1,released:!1,source:null,file:n,serverFileReference:t,transferId:null,processingAborted:!1,status:t?V.PROCESSING_COMPLETE:V.INIT,activeLoader:null,activeProcessor:null};let r=null;const a={},l=R=>s.status=R,o=(R,...M)=>{s.released||s.frozen||O.fire(R,...M)},d=()=>xt(s.file.name),c=()=>s.file.type,u=()=>s.file.size,p=()=>s.file,f=(R,M,N)=>{if(s.source=R,O.fireSync("init"),s.file){O.fireSync("load-skip");return}s.file=Ia(R),M.on("init",()=>{o("load-init")}),M.on("meta",L=>{s.file.size=L.size,s.file.filename=L.filename,L.source&&(e=Z.LIMBO,s.serverFileReference=L.source,s.status=V.PROCESSING_COMPLETE),o("load-meta")}),M.on("progress",L=>{l(V.LOADING),o("load-progress",L)}),M.on("error",L=>{l(V.LOAD_ERROR),o("load-request-error",L)}),M.on("abort",()=>{l(V.INIT),o("load-abort")}),M.on("load",L=>{s.activeLoader=null;const v=S=>{s.file=Ye(S)?S:s.file,e===Z.LIMBO&&s.serverFileReference?l(V.PROCESSING_COMPLETE):l(V.IDLE),o("load")},G=S=>{s.file=L,o("load-meta"),l(V.LOAD_ERROR),o("load-file-error",S)};if(s.serverFileReference){v(L);return}N(L,v,G)}),M.setSource(R),s.activeLoader=M,M.load()},h=()=>{s.activeLoader&&s.activeLoader.load()},g=()=>{if(s.activeLoader){s.activeLoader.abort();return}l(V.INIT),o("load-abort")},I=(R,M)=>{if(s.processingAborted){s.processingAborted=!1;return}if(l(V.PROCESSING),r=null,!(s.file instanceof Blob)){O.on("load",()=>{I(R,M)});return}R.on("load",v=>{s.transferId=null,s.serverFileReference=v}),R.on("transfer",v=>{s.transferId=v}),R.on("load-perceived",v=>{s.activeProcessor=null,s.transferId=null,s.serverFileReference=v,l(V.PROCESSING_COMPLETE),o("process-complete",v)}),R.on("start",()=>{o("process-start")}),R.on("error",v=>{s.activeProcessor=null,l(V.PROCESSING_ERROR),o("process-error",v)}),R.on("abort",v=>{s.activeProcessor=null,s.serverFileReference=v,l(V.IDLE),o("process-abort"),r&&r()}),R.on("progress",v=>{o("process-progress",v)});const N=v=>{s.archived||R.process(v,{...a})},L=console.error;M(s.file,N,L),s.activeProcessor=R},_=()=>{s.processingAborted=!1,l(V.PROCESSING_QUEUED)},E=()=>new Promise(R=>{if(!s.activeProcessor){s.processingAborted=!0,l(V.IDLE),o("process-abort"),R();return}r=()=>{R()},s.activeProcessor.abort()}),m=(R,M)=>new Promise((N,L)=>{const v=s.serverFileReference!==null?s.serverFileReference:s.transferId;if(v===null){N();return}R(v,()=>{s.serverFileReference=null,s.transferId=null,N()},G=>{if(!M){N();return}l(V.PROCESSING_REVERT_ERROR),o("process-revert-error"),L(G)}),l(V.IDLE),o("process-revert")}),T=(R,M,N)=>{const L=R.split("."),v=L[0],G=L.pop();let S=a;L.forEach(x=>S=S[x]),JSON.stringify(S[G])!==JSON.stringify(M)&&(S[G]=M,o("metadata-update",{key:v,value:a[v],silent:N}))},O={id:{get:()=>i},origin:{get:()=>e,set:R=>e=R},serverId:{get:()=>s.serverFileReference},transferId:{get:()=>s.transferId},status:{get:()=>s.status},filename:{get:()=>s.file.name},filenameWithoutExtension:{get:()=>zi(s.file.name)},fileExtension:{get:d},fileType:{get:c},fileSize:{get:u},file:{get:p},relativePath:{get:()=>s.file._relativePath},source:{get:()=>s.source},getMetadata:R=>Xi(R?a[R]:a),setMetadata:(R,M,N)=>{if(J(R)){const L=R;return Object.keys(L).forEach(v=>{T(v,L[v],M)}),R}return T(R,M,N),M},extend:(R,M)=>P[R]=M,abortLoad:g,retryLoad:h,requestProcessing:_,abortProcessing:E,load:f,process:I,revert:m,...Nt(),freeze:()=>s.frozen=!0,release:()=>s.released=!0,released:{get:()=>s.released},archive:()=>s.archived=!0,archived:{get:()=>s.archived}},P=De(O);return P},Ta=(e,t)=>we(t)?0:ae(t)?e.findIndex(n=>n.id===t):-1,Vn=(e,t)=>{const n=Ta(e,t);if(!(n<0))return e[n]||null},$n=(e,t,n,i,s,r)=>{const a=Ce(null,e,{method:"GET",responseType:"blob"});return a.onload=l=>{const o=l.getAllResponseHeaders(),d=hn(o).name||at(e);t(k("load",l.status,qe(l.response,d),o))},a.onerror=l=>{n(k("error",l.status,l.statusText,l.getAllResponseHeaders()))},a.onheaders=l=>{r(k("headers",l.status,null,l.getAllResponseHeaders()))},a.ontimeout=Ne(n),a.onprogress=i,a.onabort=s,a},Hn=e=>(e.indexOf("//")===0&&(e=location.protocol+e),e.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]),Ra=e=>(e.indexOf(":")>-1||e.indexOf("//")>-1)&&Hn(location.href)!==Hn(e),ut=e=>(...t)=>Le(e)?e(...t):e,ya=e=>!Ye(e.file),$t=(e,t)=>{clearTimeout(t.listUpdateTimeout),t.listUpdateTimeout=setTimeout(()=>{e("DID_UPDATE_ITEMS",{items:me(t.items)})},0)},Wn=(e,...t)=>new Promise(n=>{if(!e)return n(!0);const i=e(...t);if(i==null)return n(!0);if(typeof i=="boolean")return n(i);typeof i.then=="function"&&i.then(n)}),Ht=(e,t)=>{e.items.sort((n,i)=>t(le(n),le(i)))},fe=(e,t)=>({query:n,success:i=()=>{},failure:s=()=>{},...r}={})=>{const a=be(e.items,n);if(!a){s({error:k("error",0,"Item not found"),file:null});return}t(a,i,s,r||{})},wa=(e,t,n)=>({ABORT_ALL:()=>{me(n.items).forEach(i=>{i.freeze(),i.abortLoad(),i.abortProcessing()})},DID_SET_FILES:({value:i=[]})=>{const s=i.map(a=>({source:a.source?a.source:a,options:a.options}));let r=me(n.items);r.forEach(a=>{s.find(l=>l.source===a.source||l.source===a.file)||e("REMOVE_ITEM",{query:a,remove:!1})}),r=me(n.items),s.forEach((a,l)=>{r.find(o=>o.source===a.source||o.file===a.source)||e("ADD_ITEM",{...a,interactionMethod:Ee.NONE,index:l})})},DID_UPDATE_ITEM_METADATA:({id:i,action:s,change:r})=>{r.silent||(clearTimeout(n.itemUpdateTimeout),n.itemUpdateTimeout=setTimeout(()=>{const a=Vn(n.items,i);if(!t("IS_ASYNC")){ge("SHOULD_PREPARE_OUTPUT",!1,{item:a,query:t,action:s,change:r}).then(c=>{const u=t("GET_BEFORE_PREPARE_FILE");u&&(c=u(a,c)),c&&e("REQUEST_PREPARE_OUTPUT",{query:i,item:a,success:p=>{e("DID_PREPARE_OUTPUT",{id:i,file:p})}},!0)});return}a.origin===Z.LOCAL&&e("DID_LOAD_ITEM",{id:a.id,error:null,serverFileReference:a.source});const l=()=>{setTimeout(()=>{e("REQUEST_ITEM_PROCESSING",{query:i})},32)},o=c=>{a.revert(Ze(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(c?l:()=>{}).catch(()=>{})},d=c=>{a.abortProcessing().then(c?l:()=>{})};if(a.status===V.PROCESSING_COMPLETE)return o(n.options.instantUpload);if(a.status===V.PROCESSING)return d(n.options.instantUpload);n.options.instantUpload&&l()},0))},MOVE_ITEM:({query:i,index:s})=>{const r=be(n.items,i);if(!r)return;const a=n.items.indexOf(r);s=Hi(s,0,n.items.length-1),a!==s&&n.items.splice(s,0,n.items.splice(a,1)[0])},SORT:({compare:i})=>{Ht(n,i),e("DID_SORT_ITEMS",{items:t("GET_ACTIVE_ITEMS")})},ADD_ITEMS:({items:i,index:s,interactionMethod:r,success:a=()=>{},failure:l=()=>{}})=>{let o=s;if(s===-1||typeof s>"u"){const f=t("GET_ITEM_INSERT_LOCATION"),h=t("GET_TOTAL_ITEMS");o=f==="before"?0:h}const d=t("GET_IGNORED_FILES"),c=f=>Ye(f)?!d.includes(f.name.toLowerCase()):!we(f),p=i.filter(c).map(f=>new Promise((h,g)=>{e("ADD_ITEM",{interactionMethod:r,source:f.source||f,success:h,failure:g,index:o++,options:f.options||{}})}));Promise.all(p).then(a).catch(l)},ADD_ITEM:({source:i,index:s=-1,interactionMethod:r,success:a=()=>{},failure:l=()=>{},options:o={}})=>{if(we(i)){l({error:k("error",0,"No source"),file:null});return}if(Ye(i)&&n.options.ignoredFiles.includes(i.name.toLowerCase()))return;if(!Jr(n)){if(n.options.allowMultiple||!n.options.allowMultiple&&!n.options.allowReplace){const E=k("warning",0,"Max files");e("DID_THROW_MAX_FILES",{source:i,error:E}),l({error:E,file:null});return}const _=me(n.items)[0];if(_.status===V.PROCESSING_COMPLETE||_.status===V.PROCESSING_REVERT_ERROR){const E=t("GET_FORCE_REVERT");if(_.revert(Ze(n.options.server.url,n.options.server.revert),E).then(()=>{E&&e("ADD_ITEM",{source:i,index:s,interactionMethod:r,success:a,failure:l,options:o})}).catch(()=>{}),E)return}e("REMOVE_ITEM",{query:_.id})}const d=o.type==="local"?Z.LOCAL:o.type==="limbo"?Z.LIMBO:Z.INPUT,c=_a(d,d===Z.INPUT?null:i,o.file);Object.keys(o.metadata||{}).forEach(_=>{c.setMetadata(_,o.metadata[_])}),Ge("DID_CREATE_ITEM",c,{query:t,dispatch:e});const u=t("GET_ITEM_INSERT_LOCATION");n.options.itemInsertLocationFreedom||(s=u==="before"?-1:n.items.length),ta(n.items,c,s),Le(u)&&i&&Ht(n,u);const p=c.id;c.on("init",()=>{e("DID_INIT_ITEM",{id:p})}),c.on("load-init",()=>{e("DID_START_ITEM_LOAD",{id:p})}),c.on("load-meta",()=>{e("DID_UPDATE_ITEM_META",{id:p})}),c.on("load-progress",_=>{e("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:p,progress:_})}),c.on("load-request-error",_=>{const E=ut(n.options.labelFileLoadError)(_);if(_.code>=400&&_.code<500){e("DID_THROW_ITEM_INVALID",{id:p,error:_,status:{main:E,sub:`${_.code} (${_.body})`}}),l({error:_,file:le(c)});return}e("DID_THROW_ITEM_LOAD_ERROR",{id:p,error:_,status:{main:E,sub:n.options.labelTapToRetry}})}),c.on("load-file-error",_=>{e("DID_THROW_ITEM_INVALID",{id:p,error:_.status,status:_.status}),l({error:_.status,file:le(c)})}),c.on("load-abort",()=>{e("REMOVE_ITEM",{query:p})}),c.on("load-skip",()=>{e("COMPLETE_LOAD_ITEM",{query:p,item:c,data:{source:i,success:a}})}),c.on("load",()=>{const _=E=>{if(!E){e("REMOVE_ITEM",{query:p});return}c.on("metadata-update",m=>{e("DID_UPDATE_ITEM_METADATA",{id:p,change:m})}),ge("SHOULD_PREPARE_OUTPUT",!1,{item:c,query:t}).then(m=>{const T=t("GET_BEFORE_PREPARE_FILE");T&&(m=T(c,m));const y=()=>{e("COMPLETE_LOAD_ITEM",{query:p,item:c,data:{source:i,success:a}}),$t(e,n)};if(m){e("REQUEST_PREPARE_OUTPUT",{query:p,item:c,success:O=>{e("DID_PREPARE_OUTPUT",{id:p,file:O}),y()}},!0);return}y()})};ge("DID_LOAD_ITEM",c,{query:t,dispatch:e}).then(()=>{Wn(t("GET_BEFORE_ADD_FILE"),le(c)).then(_)}).catch(E=>{if(!E||!E.error||!E.status)return _(!1);e("DID_THROW_ITEM_INVALID",{id:p,error:E.error,status:E.status})})}),c.on("process-start",()=>{e("DID_START_ITEM_PROCESSING",{id:p})}),c.on("process-progress",_=>{e("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:p,progress:_})}),c.on("process-error",_=>{e("DID_THROW_ITEM_PROCESSING_ERROR",{id:p,error:_,status:{main:ut(n.options.labelFileProcessingError)(_),sub:n.options.labelTapToRetry}})}),c.on("process-revert-error",_=>{e("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:p,error:_,status:{main:ut(n.options.labelFileProcessingRevertError)(_),sub:n.options.labelTapToRetry}})}),c.on("process-complete",_=>{e("DID_COMPLETE_ITEM_PROCESSING",{id:p,error:null,serverFileReference:_}),e("DID_DEFINE_VALUE",{id:p,value:_})}),c.on("process-abort",()=>{e("DID_ABORT_ITEM_PROCESSING",{id:p})}),c.on("process-revert",()=>{e("DID_REVERT_ITEM_PROCESSING",{id:p}),e("DID_DEFINE_VALUE",{id:p,value:null})}),e("DID_ADD_ITEM",{id:p,index:s,interactionMethod:r}),$t(e,n);const{url:f,load:h,restore:g,fetch:I}=n.options.server||{};c.load(i,fa(d===Z.INPUT?ae(i)&&Ra(i)&&I?Vt(f,I):$n:d===Z.LIMBO?Vt(f,g):Vt(f,h)),(_,E,m)=>{ge("LOAD_FILE",_,{query:t}).then(E).catch(m)})},REQUEST_PREPARE_OUTPUT:({item:i,success:s,failure:r=()=>{}})=>{const a={error:k("error",0,"Item not found"),file:null};if(i.archived)return r(a);ge("PREPARE_OUTPUT",i.file,{query:t,item:i}).then(l=>{ge("COMPLETE_PREPARE_OUTPUT",l,{query:t,item:i}).then(o=>{if(i.archived)return r(a);s(o)})})},COMPLETE_LOAD_ITEM:({item:i,data:s})=>{const{success:r,source:a}=s,l=t("GET_ITEM_INSERT_LOCATION");if(Le(l)&&a&&Ht(n,l),e("DID_LOAD_ITEM",{id:i.id,error:null,serverFileReference:i.origin===Z.INPUT?null:a}),r(le(i)),i.origin===Z.LOCAL){e("DID_LOAD_LOCAL_ITEM",{id:i.id});return}if(i.origin===Z.LIMBO){e("DID_COMPLETE_ITEM_PROCESSING",{id:i.id,error:null,serverFileReference:a}),e("DID_DEFINE_VALUE",{id:i.id,value:i.serverId||a});return}t("IS_ASYNC")&&n.options.instantUpload&&e("REQUEST_ITEM_PROCESSING",{query:i.id})},RETRY_ITEM_LOAD:fe(n,i=>{i.retryLoad()}),REQUEST_ITEM_PREPARE:fe(n,(i,s,r)=>{e("REQUEST_PREPARE_OUTPUT",{query:i.id,item:i,success:a=>{e("DID_PREPARE_OUTPUT",{id:i.id,file:a}),s({file:i,output:a})},failure:r},!0)}),REQUEST_ITEM_PROCESSING:fe(n,(i,s,r)=>{if(!(i.status===V.IDLE||i.status===V.PROCESSING_ERROR)){const l=()=>e("REQUEST_ITEM_PROCESSING",{query:i,success:s,failure:r}),o=()=>document.hidden?l():setTimeout(l,32);i.status===V.PROCESSING_COMPLETE||i.status===V.PROCESSING_REVERT_ERROR?i.revert(Ze(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(o).catch(()=>{}):i.status===V.PROCESSING&&i.abortProcessing().then(o);return}i.status!==V.PROCESSING_QUEUED&&(i.requestProcessing(),e("DID_REQUEST_ITEM_PROCESSING",{id:i.id}),e("PROCESS_ITEM",{query:i,success:s,failure:r},!0))}),PROCESS_ITEM:fe(n,(i,s,r)=>{const a=t("GET_MAX_PARALLEL_UPLOADS");if(t("GET_ITEMS_BY_STATUS",V.PROCESSING).length===a){n.processingQueue.push({id:i.id,success:s,failure:r});return}if(i.status===V.PROCESSING)return;const o=()=>{const c=n.processingQueue.shift();if(!c)return;const{id:u,success:p,failure:f}=c,h=be(n.items,u);if(!h||h.archived){o();return}e("PROCESS_ITEM",{query:u,success:p,failure:f},!0)};i.onOnce("process-complete",()=>{s(le(i)),o();const c=n.options.server;if(n.options.instantUpload&&i.origin===Z.LOCAL&&Le(c.remove)){const f=()=>{};i.origin=Z.LIMBO,n.options.server.remove(i.source,f,f)}t("GET_ITEMS_BY_STATUS",V.PROCESSING_COMPLETE).length===n.items.length&&e("DID_COMPLETE_ITEM_PROCESSING_ALL")}),i.onOnce("process-error",c=>{r({error:c,file:le(i)}),o()});const d=n.options;i.process(ma(Ea(d.server.url,d.server.process,d.name,{chunkTransferId:i.transferId,chunkServer:d.server.patch,chunkUploads:d.chunkUploads,chunkForce:d.chunkForce,chunkSize:d.chunkSize,chunkRetryDelays:d.chunkRetryDelays}),{allowMinimumUploadDuration:t("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),(c,u,p)=>{ge("PREPARE_OUTPUT",c,{query:t,item:i}).then(f=>{e("DID_PREPARE_OUTPUT",{id:i.id,file:f}),u(f)}).catch(p)})}),RETRY_ITEM_PROCESSING:fe(n,i=>{e("REQUEST_ITEM_PROCESSING",{query:i})}),REQUEST_REMOVE_ITEM:fe(n,i=>{Wn(t("GET_BEFORE_REMOVE_FILE"),le(i)).then(s=>{s&&e("REMOVE_ITEM",{query:i})})}),RELEASE_ITEM:fe(n,i=>{i.release()}),REMOVE_ITEM:fe(n,(i,s,r,a)=>{const l=()=>{const d=i.id;Vn(n.items,d).archive(),e("DID_REMOVE_ITEM",{error:null,id:d,item:i}),$t(e,n),s(le(i))},o=n.options.server;i.origin===Z.LOCAL&&o&&Le(o.remove)&&a.remove!==!1?(e("DID_START_ITEM_REMOVE",{id:i.id}),o.remove(i.source,()=>l(),d=>{e("DID_THROW_ITEM_REMOVE_ERROR",{id:i.id,error:k("error",0,d,null),status:{main:ut(n.options.labelFileRemoveError)(d),sub:n.options.labelTapToRetry}})})):((a.revert&&i.origin!==Z.LOCAL&&i.serverId!==null||n.options.chunkUploads&&i.file.size>n.options.chunkSize||n.options.chunkUploads&&n.options.chunkForce)&&i.revert(Ze(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")),l())}),ABORT_ITEM_LOAD:fe(n,i=>{i.abortLoad()}),ABORT_ITEM_PROCESSING:fe(n,i=>{if(i.serverId){e("REVERT_ITEM_PROCESSING",{id:i.id});return}i.abortProcessing().then(()=>{n.options.instantUpload&&e("REMOVE_ITEM",{query:i.id})})}),REQUEST_REVERT_ITEM_PROCESSING:fe(n,i=>{if(!n.options.instantUpload){e("REVERT_ITEM_PROCESSING",{query:i});return}const s=l=>{l&&e("REVERT_ITEM_PROCESSING",{query:i})},r=t("GET_BEFORE_REMOVE_FILE");if(!r)return s(!0);const a=r(le(i));if(a==null)return s(!0);if(typeof a=="boolean")return s(a);typeof a.then=="function"&&a.then(s)}),REVERT_ITEM_PROCESSING:fe(n,i=>{i.revert(Ze(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(()=>{(n.options.instantUpload||ya(i))&&e("REMOVE_ITEM",{query:i.id})}).catch(()=>{})}),SET_OPTIONS:({options:i})=>{const s=Object.keys(i),r=Aa.filter(l=>s.includes(l));[...r,...Object.keys(i).filter(l=>!r.includes(l))].forEach(l=>{e(`SET_${Ct(l,"_").toUpperCase()}`,{value:i[l]})})}}),Aa=["server"],pn=e=>e,Ae=e=>document.createElement(e),q=(e,t)=>{let n=e.childNodes[0];n?t!==n.nodeValue&&(n.nodeValue=t):(n=document.createTextNode(t),e.appendChild(n))},kn=(e,t,n,i)=>{const s=(i%360-90)*Math.PI/180;return{x:e+n*Math.cos(s),y:t+n*Math.sin(s)}},Oa=(e,t,n,i,s,r)=>{const a=kn(e,t,n,s),l=kn(e,t,n,i);return["M",a.x,a.y,"A",n,n,0,r,0,l.x,l.y].join(" ")},Sa=(e,t,n,i,s)=>{let r=1;return s>i&&s-i<=.5&&(r=0),i>s&&i-s>=.5&&(r=0),Oa(e,t,n,Math.min(.9999,i)*360,Math.min(.9999,s)*360,r)},Da=({root:e,props:t})=>{t.spin=!1,t.progress=0,t.opacity=0;const n=At("svg");e.ref.path=At("path",{"stroke-width":2,"stroke-linecap":"round"}),n.appendChild(e.ref.path),e.ref.svg=n,e.appendChild(n)},Ma=({root:e,props:t})=>{if(t.opacity===0)return;t.align&&(e.element.dataset.align=t.align);const n=parseInt(j(e.ref.path,"stroke-width"),10),i=e.rect.element.width*.5;let s=0,r=0;t.spin?(s=0,r=.5):(s=0,r=t.progress);const a=Sa(i,i,i-n,s,r);j(e.ref.path,"d",a),j(e.ref.path,"stroke-opacity",t.spin||t.progress>0?1:0)},qn=Q({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:Da,write:Ma,mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),va=({root:e,props:t})=>{e.element.innerHTML=(t.icon||"")+`<span>${t.label}</span>`,t.isDisabled=!1},Pa=({root:e,props:t})=>{const{isDisabled:n}=t,i=e.query("GET_DISABLED")||t.opacity===0;i&&!n?(t.isDisabled=!0,j(e.element,"disabled","disabled")):!i&&n&&(t.isDisabled=!1,e.element.removeAttribute("disabled"))},ji=Q({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:va,write:Pa}),Qi=(e,t=".",n=1e3,i={})=>{const{labelBytes:s="bytes",labelKilobytes:r="KB",labelMegabytes:a="MB",labelGigabytes:l="GB"}=i;e=Math.round(Math.abs(e));const o=n,d=n*n,c=n*n*n;return e<o?`${e} ${s}`:e<d?`${Math.floor(e/o)} ${r}`:e<c?`${Yn(e/d,1,t)} ${a}`:`${Yn(e/c,2,t)} ${l}`},Yn=(e,t,n)=>e.toFixed(t).split(".").filter(i=>i!=="0").join(n),La=({root:e,props:t})=>{const n=Ae("span");n.className="filepond--file-info-main",j(n,"aria-hidden","true"),e.appendChild(n),e.ref.fileName=n;const i=Ae("span");i.className="filepond--file-info-sub",e.appendChild(i),e.ref.fileSize=i,q(i,e.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),q(n,pn(e.query("GET_ITEM_NAME",t.id)))},Jt=({root:e,props:t})=>{q(e.ref.fileSize,Qi(e.query("GET_ITEM_SIZE",t.id),".",e.query("GET_FILE_SIZE_BASE"),e.query("GET_FILE_SIZE_LABELS",e.query))),q(e.ref.fileName,pn(e.query("GET_ITEM_NAME",t.id)))},zn=({root:e,props:t})=>{if(ze(e.query("GET_ITEM_SIZE",t.id))){Jt({root:e,props:t});return}q(e.ref.fileSize,e.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},ba=Q({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:oe({DID_LOAD_ITEM:Jt,DID_UPDATE_ITEM_META:Jt,DID_THROW_ITEM_LOAD_ERROR:zn,DID_THROW_ITEM_INVALID:zn}),didCreateView:e=>{Ge("CREATE_VIEW",{...e,view:e})},create:La,mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),Ki=e=>Math.round(e*100),Ca=({root:e})=>{const t=Ae("span");t.className="filepond--file-status-main",e.appendChild(t),e.ref.main=t;const n=Ae("span");n.className="filepond--file-status-sub",e.appendChild(n),e.ref.sub=n,Zi({root:e,action:{progress:null}})},Zi=({root:e,action:t})=>{const n=t.progress===null?e.query("GET_LABEL_FILE_LOADING"):`${e.query("GET_LABEL_FILE_LOADING")} ${Ki(t.progress)}%`;q(e.ref.main,n),q(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},Na=({root:e,action:t})=>{const n=t.progress===null?e.query("GET_LABEL_FILE_PROCESSING"):`${e.query("GET_LABEL_FILE_PROCESSING")} ${Ki(t.progress)}%`;q(e.ref.main,n),q(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},xa=({root:e})=>{q(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING")),q(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},Ga=({root:e})=>{q(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_ABORTED")),q(e.ref.sub,e.query("GET_LABEL_TAP_TO_RETRY"))},Ba=({root:e})=>{q(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),q(e.ref.sub,e.query("GET_LABEL_TAP_TO_UNDO"))},Xn=({root:e})=>{q(e.ref.main,""),q(e.ref.sub,"")},Je=({root:e,action:t})=>{q(e.ref.main,t.status.main),q(e.ref.sub,t.status.sub)},Fa=Q({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:oe({DID_LOAD_ITEM:Xn,DID_REVERT_ITEM_PROCESSING:Xn,DID_REQUEST_ITEM_PROCESSING:xa,DID_ABORT_ITEM_PROCESSING:Ga,DID_COMPLETE_ITEM_PROCESSING:Ba,DID_UPDATE_ITEM_PROCESS_PROGRESS:Na,DID_UPDATE_ITEM_LOAD_PROGRESS:Zi,DID_THROW_ITEM_LOAD_ERROR:Je,DID_THROW_ITEM_INVALID:Je,DID_THROW_ITEM_PROCESSING_ERROR:Je,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:Je,DID_THROW_ITEM_REMOVE_ERROR:Je}),didCreateView:e=>{Ge("CREATE_VIEW",{...e,view:e})},create:Ca,mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),en={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},tn=[];H(en,e=>{tn.push(e)});const de=e=>{if(nn(e)==="right")return 0;const t=e.ref.buttonRemoveItem.rect.element;return t.hidden?null:t.width+t.left},Ua=e=>e.ref.buttonAbortItemLoad.rect.element.width,ft=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.height/4),Va=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.left/2),$a=e=>e.query("GET_STYLE_LOAD_INDICATOR_POSITION"),Ha=e=>e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION"),nn=e=>e.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION"),Wa={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:$a},processProgressIndicator:{opacity:0,align:Ha},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},jn={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:de},status:{translateX:de}},Wt={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},$e={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:de},status:{translateX:de,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:de},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:nn},info:{translateX:de},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:nn},buttonRemoveItem:{opacity:1},info:{translateX:de},status:{opacity:1,translateX:de}},DID_LOAD_ITEM:jn,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:de},status:{translateX:de}},DID_START_ITEM_PROCESSING:Wt,DID_REQUEST_ITEM_PROCESSING:Wt,DID_UPDATE_ITEM_PROCESS_PROGRESS:Wt,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:de}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:de},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:jn},ka=Q({create:({root:e})=>{e.element.innerHTML=e.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),qa=({root:e,props:t})=>{const n=Object.keys(en).reduce((h,g)=>(h[g]={...en[g]},h),{}),{id:i}=t,s=e.query("GET_ALLOW_REVERT"),r=e.query("GET_ALLOW_REMOVE"),a=e.query("GET_ALLOW_PROCESS"),l=e.query("GET_INSTANT_UPLOAD"),o=e.query("IS_ASYNC"),d=e.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");let c;o?a&&!s?c=h=>!/RevertItemProcessing/.test(h):!a&&s?c=h=>!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(h):!a&&!s&&(c=h=>!/Process/.test(h)):c=h=>!/Process/.test(h);const u=c?tn.filter(c):tn.concat();if(l&&s&&(n.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",n.RevertItemProcessing.icon="GET_ICON_REMOVE"),o&&!s){const h=$e.DID_COMPLETE_ITEM_PROCESSING;h.info.translateX=Va,h.info.translateY=ft,h.status.translateY=ft,h.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(o&&!a&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach(h=>{$e[h].status.translateY=ft}),$e.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=Ua),d&&s){n.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";const h=$e.DID_COMPLETE_ITEM_PROCESSING;h.info.translateX=de,h.status.translateY=ft,h.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}r||(n.RemoveItem.disabled=!0),H(n,(h,g)=>{const I=e.createChildView(ji,{label:e.query(g.label),icon:e.query(g.icon),opacity:0});u.includes(h)&&e.appendChildView(I),g.disabled&&(I.element.setAttribute("disabled","disabled"),I.element.setAttribute("hidden","hidden")),I.element.dataset.align=e.query(`GET_STYLE_${g.align}`),I.element.classList.add(g.className),I.on("click",_=>{_.stopPropagation(),!g.disabled&&e.dispatch(g.action,{query:i})}),e.ref[`button${h}`]=I}),e.ref.processingCompleteIndicator=e.appendChildView(e.createChildView(ka)),e.ref.processingCompleteIndicator.element.dataset.align=e.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),e.ref.info=e.appendChildView(e.createChildView(ba,{id:i})),e.ref.status=e.appendChildView(e.createChildView(Fa,{id:i}));const p=e.appendChildView(e.createChildView(qn,{opacity:0,align:e.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));p.element.classList.add("filepond--load-indicator"),e.ref.loadProgressIndicator=p;const f=e.appendChildView(e.createChildView(qn,{opacity:0,align:e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));f.element.classList.add("filepond--process-indicator"),e.ref.processProgressIndicator=f,e.ref.activeStyles=[]},Ya=({root:e,actions:t,props:n})=>{za({root:e,actions:t,props:n});let i=t.concat().filter(s=>/^DID_/.test(s.type)).reverse().find(s=>$e[s.type]);if(i){e.ref.activeStyles=[];const s=$e[i.type];H(Wa,(r,a)=>{const l=e.ref[r];H(a,(o,d)=>{const c=s[r]&&typeof s[r][o]<"u"?s[r][o]:d;e.ref.activeStyles.push({control:l,key:o,value:c})})})}e.ref.activeStyles.forEach(({control:s,key:r,value:a})=>{s[r]=typeof a=="function"?a(e):a})},za=oe({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:({root:e,action:t})=>{e.ref.buttonAbortItemProcessing.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:({root:e,action:t})=>{e.ref.buttonAbortItemLoad.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:({root:e,action:t})=>{e.ref.buttonAbortItemRemoval.label=t.value},DID_REQUEST_ITEM_PROCESSING:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:({root:e})=>{e.ref.loadProgressIndicator.spin=!0,e.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:({root:e,action:t})=>{e.ref.loadProgressIndicator.spin=!1,e.ref.loadProgressIndicator.progress=t.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:e,action:t})=>{e.ref.processProgressIndicator.spin=!1,e.ref.processProgressIndicator.progress=t.progress}}),Xa=Q({create:qa,write:Ya,didCreateView:e=>{Ge("CREATE_VIEW",{...e,view:e})},name:"file"}),ja=({root:e,props:t})=>{e.ref.fileName=Ae("legend"),e.appendChild(e.ref.fileName),e.ref.file=e.appendChildView(e.createChildView(Xa,{id:t.id})),e.ref.data=!1},Qa=({root:e,props:t})=>{q(e.ref.fileName,pn(e.query("GET_ITEM_NAME",t.id)))},Ka=Q({create:ja,ignoreRect:!0,write:oe({DID_LOAD_ITEM:Qa}),didCreateView:e=>{Ge("CREATE_VIEW",{...e,view:e})},tag:"fieldset",name:"file-wrapper"}),Qn={type:"spring",damping:.6,mass:7},Za=({root:e,props:t})=>{[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:Qn},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:Qn},styles:["translateY"]}}].forEach(n=>{Ja(e,n,t.name)}),e.element.classList.add(`filepond--${t.name}`),e.ref.scalable=null},Ja=(e,t,n)=>{const i=Q({name:`panel-${t.name} filepond--${n}`,mixins:t.mixins,ignoreRectUpdate:!0}),s=e.createChildView(i,t.props);e.ref[t.name]=e.appendChildView(s)},eo=({root:e,props:t})=>{if((e.ref.scalable===null||t.scalable!==e.ref.scalable)&&(e.ref.scalable=Ni(t.scalable)?t.scalable:!0,e.element.dataset.scalable=e.ref.scalable),!t.height)return;const n=e.ref.top.rect.element,i=e.ref.bottom.rect.element,s=Math.max(n.height+i.height,t.height);e.ref.center.translateY=n.height,e.ref.center.scaleY=(s-n.height-i.height)/100,e.ref.bottom.translateY=s-i.height},Ji=Q({name:"panel",read:({root:e,props:t})=>t.heightCurrent=e.ref.bottom.translateY,write:eo,create:Za,ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),to=e=>{const t=e.map(i=>i.id);let n;return{setIndex:i=>{n=i},getIndex:()=>n,getItemIndex:i=>t.indexOf(i.id)}},Kn={type:"spring",stiffness:.75,damping:.45,mass:10},Zn="spring",Jn={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},no=({root:e,props:t})=>{if(e.ref.handleClick=i=>e.dispatch("DID_ACTIVATE_ITEM",{id:t.id}),e.element.id=`filepond--item-${t.id}`,e.element.addEventListener("click",e.ref.handleClick),e.ref.container=e.appendChildView(e.createChildView(Ka,{id:t.id})),e.ref.panel=e.appendChildView(e.createChildView(Ji,{name:"item-panel"})),e.ref.panel.height=null,t.markedForRemoval=!1,!e.query("GET_ALLOW_REORDER"))return;e.element.dataset.dragState="idle";const n=i=>{if(!i.isPrimary)return;let s=!1;const r={x:i.pageX,y:i.pageY};t.dragOrigin={x:e.translateX,y:e.translateY},t.dragCenter={x:i.offsetX,y:i.offsetY};const a=to(e.query("GET_ACTIVE_ITEMS"));e.dispatch("DID_GRAB_ITEM",{id:t.id,dragState:a});const l=d=>{if(!d.isPrimary)return;d.stopPropagation(),d.preventDefault(),t.dragOffset={x:d.pageX-r.x,y:d.pageY-r.y},t.dragOffset.x*t.dragOffset.x+t.dragOffset.y*t.dragOffset.y>16&&!s&&(s=!0,e.element.removeEventListener("click",e.ref.handleClick)),e.dispatch("DID_DRAG_ITEM",{id:t.id,dragState:a})},o=d=>{d.isPrimary&&(document.removeEventListener("pointermove",l),document.removeEventListener("pointerup",o),t.dragOffset={x:d.pageX-r.x,y:d.pageY-r.y},e.dispatch("DID_DROP_ITEM",{id:t.id,dragState:a}),s&&setTimeout(()=>e.element.addEventListener("click",e.ref.handleClick),0))};document.addEventListener("pointermove",l),document.addEventListener("pointerup",o)};e.element.addEventListener("pointerdown",n)},io=oe({DID_UPDATE_PANEL_HEIGHT:({root:e,action:t})=>{e.height=t.height}}),so=oe({DID_GRAB_ITEM:({root:e,props:t})=>{t.dragOrigin={x:e.translateX,y:e.translateY}},DID_DRAG_ITEM:({root:e})=>{e.element.dataset.dragState="drag"},DID_DROP_ITEM:({root:e,props:t})=>{t.dragOffset=null,t.dragOrigin=null,e.element.dataset.dragState="drop"}},({root:e,actions:t,props:n,shouldOptimize:i})=>{e.element.dataset.dragState==="drop"&&e.scaleX<=1&&(e.element.dataset.dragState="idle");let s=t.concat().filter(a=>/^DID_/.test(a.type)).reverse().find(a=>Jn[a.type]);s&&s.type!==n.currentState&&(n.currentState=s.type,e.element.dataset.filepondItemState=Jn[n.currentState]||"");const r=e.query("GET_ITEM_PANEL_ASPECT_RATIO")||e.query("GET_PANEL_ASPECT_RATIO");r?i||(e.height=e.rect.element.width*r):(io({root:e,actions:t,props:n}),!e.height&&e.ref.container.rect.element.height>0&&(e.height=e.ref.container.rect.element.height)),i&&(e.ref.panel.height=null),e.ref.panel.height=e.height}),ro=Q({create:no,write:so,destroy:({root:e,props:t})=>{e.element.removeEventListener("click",e.ref.handleClick),e.dispatch("RELEASE_ITEM",{query:t.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:Zn,scaleY:Zn,translateX:Kn,translateY:Kn,opacity:{type:"tween",duration:150}}}});var En=(e,t)=>Math.max(1,Math.floor((e+1)/t));const gn=(e,t,n)=>{if(!n)return;const i=e.rect.element.width,s=t.length;let r=null;if(s===0||n.top<t[0].rect.element.top)return-1;const l=t[0].rect.element,o=l.marginLeft+l.marginRight,d=l.width+o,c=En(i,d);if(c===1){for(let f=0;f<s;f++){const h=t[f],g=h.rect.outer.top+h.rect.element.height*.5;if(n.top<g)return f}return s}const u=l.marginTop+l.marginBottom,p=l.height+u;for(let f=0;f<s;f++){const h=f%c,g=Math.floor(f/c),I=h*d,_=g*p,E=_-l.marginTop,m=I+d,T=_+p+l.marginBottom;if(n.top<T&&n.top>E){if(n.left<m)return f;f!==s-1?r=f:r=null}}return r!==null?r:s},ht={height:0,width:0,get getHeight(){return this.height},set setHeight(e){(this.height===0||e===0)&&(this.height=e)},get getWidth(){return this.width},set setWidth(e){(this.width===0||e===0)&&(this.width=e)},setDimensions:function(e,t){(this.height===0||e===0)&&(this.height=e),(this.width===0||t===0)&&(this.width=t)}},ao=({root:e})=>{j(e.element,"role","list"),e.ref.lastItemSpanwDate=Date.now()},oo=({root:e,action:t})=>{const{id:n,index:i,interactionMethod:s}=t;e.ref.addIndex=i;const r=Date.now();let a=r,l=1;if(s!==Ee.NONE){l=0;const o=e.query("GET_ITEM_INSERT_INTERVAL"),d=r-e.ref.lastItemSpanwDate;a=d<o?r+(o-d):r}e.ref.lastItemSpanwDate=a,e.appendChildView(e.createChildView(ro,{spawnDate:a,id:n,opacity:l,interactionMethod:s}),i)},ei=(e,t,n,i=0,s=1)=>{e.dragOffset?(e.translateX=null,e.translateY=null,e.translateX=e.dragOrigin.x+e.dragOffset.x,e.translateY=e.dragOrigin.y+e.dragOffset.y,e.scaleX=1.025,e.scaleY=1.025):(e.translateX=t,e.translateY=n,Date.now()>e.spawnDate&&(e.opacity===0&&lo(e,t,n,i,s),e.scaleX=1,e.scaleY=1,e.opacity=1))},lo=(e,t,n,i,s)=>{e.interactionMethod===Ee.NONE?(e.translateX=null,e.translateX=t,e.translateY=null,e.translateY=n):e.interactionMethod===Ee.DROP?(e.translateX=null,e.translateX=t-i*20,e.translateY=null,e.translateY=n-s*10,e.scaleX=.8,e.scaleY=.8):e.interactionMethod===Ee.BROWSE?(e.translateY=null,e.translateY=n-30):e.interactionMethod===Ee.API&&(e.translateX=null,e.translateX=t-30,e.translateY=null)},co=({root:e,action:t})=>{const{id:n}=t,i=e.childViews.find(s=>s.id===n);i&&(i.scaleX=.9,i.scaleY=.9,i.opacity=0,i.markedForRemoval=!0)},kt=e=>e.rect.element.height+e.rect.element.marginBottom*.5+e.rect.element.marginTop*.5,uo=e=>e.rect.element.width+e.rect.element.marginLeft*.5+e.rect.element.marginRight*.5,fo=({root:e,action:t})=>{const{id:n,dragState:i}=t,s=e.query("GET_ITEM",{id:n}),r=e.childViews.find(I=>I.id===n),a=e.childViews.length,l=i.getItemIndex(s);if(!r)return;const o={x:r.dragOrigin.x+r.dragOffset.x+r.dragCenter.x,y:r.dragOrigin.y+r.dragOffset.y+r.dragCenter.y},d=kt(r),c=uo(r);let u=Math.floor(e.rect.outer.width/c);u>a&&(u=a);const p=Math.floor(a/u+1);ht.setHeight=d*p,ht.setWidth=c*u;var f={y:Math.floor(o.y/d),x:Math.floor(o.x/c),getGridIndex:function(){return o.y>ht.getHeight||o.y<0||o.x>ht.getWidth||o.x<0?l:this.y*u+this.x},getColIndex:function(){const _=e.query("GET_ACTIVE_ITEMS"),E=e.childViews.filter(L=>L.rect.element.height),m=_.map(L=>E.find(v=>v.id===L.id)),T=m.findIndex(L=>L===r),y=kt(r),O=m.length;let P=O,R=0,M=0,N=0;for(let L=0;L<O;L++)if(R=kt(m[L]),N=M,M=N+R,o.y<M){if(T>L){if(o.y<N+y){P=L;break}continue}P=L;break}return P}};const h=u>1?f.getGridIndex():f.getColIndex();e.dispatch("MOVE_ITEM",{query:r,index:h});const g=i.getIndex();if(g===void 0||g!==h){if(i.setIndex(h),g===void 0)return;e.dispatch("DID_REORDER_ITEMS",{items:e.query("GET_ACTIVE_ITEMS"),origin:l,target:h})}},ho=oe({DID_ADD_ITEM:oo,DID_REMOVE_ITEM:co,DID_DRAG_ITEM:fo}),po=({root:e,props:t,actions:n,shouldOptimize:i})=>{ho({root:e,props:t,actions:n});const{dragCoordinates:s}=t,r=e.rect.element.width,a=e.childViews.filter(m=>m.rect.element.height),l=e.query("GET_ACTIVE_ITEMS").map(m=>a.find(T=>T.id===m.id)).filter(m=>m),o=s?gn(e,l,s):null,d=e.ref.addIndex||null;e.ref.addIndex=null;let c=0,u=0,p=0;if(l.length===0)return;const f=l[0].rect.element,h=f.marginTop+f.marginBottom,g=f.marginLeft+f.marginRight,I=f.width+g,_=f.height+h,E=En(r,I);if(E===1){let m=0,T=0;l.forEach((y,O)=>{if(o){let M=O-o;M===-2?T=-h*.25:M===-1?T=-h*.75:M===0?T=h*.75:M===1?T=h*.25:T=0}i&&(y.translateX=null,y.translateY=null),y.markedForRemoval||ei(y,0,m+T);let R=(y.rect.element.height+h)*(y.markedForRemoval?y.opacity:1);m+=R})}else{let m=0,T=0;l.forEach((y,O)=>{O===o&&(c=1),O===d&&(p+=1),y.markedForRemoval&&y.opacity<.5&&(u-=1);const P=O+p+c+u,R=P%E,M=Math.floor(P/E),N=R*I,L=M*_,v=Math.sign(N-m),G=Math.sign(L-T);m=N,T=L,!y.markedForRemoval&&(i&&(y.translateX=null,y.translateY=null),ei(y,N,L,v,G))})}},Eo=(e,t)=>t.filter(n=>n.data&&n.data.id?e.id===n.data.id:!0),go=Q({create:ao,write:po,tag:"ul",name:"list",didWriteView:({root:e})=>{e.childViews.filter(t=>t.markedForRemoval&&t.opacity===0&&t.resting).forEach(t=>{t._destroy(),e.removeChildView(t)})},filterFrameActionsForChild:Eo,mixins:{apis:["dragCoordinates"]}}),mo=({root:e,props:t})=>{e.ref.list=e.appendChildView(e.createChildView(go)),t.dragCoordinates=null,t.overflowing=!1},Io=({root:e,props:t,action:n})=>{e.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(t.dragCoordinates={left:n.position.scopeLeft-e.ref.list.rect.element.left,top:n.position.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},_o=({props:e})=>{e.dragCoordinates=null},To=oe({DID_DRAG:Io,DID_END_DRAG:_o}),Ro=({root:e,props:t,actions:n})=>{if(To({root:e,props:t,actions:n}),e.ref.list.dragCoordinates=t.dragCoordinates,t.overflowing&&!t.overflow&&(t.overflowing=!1,e.element.dataset.state="",e.height=null),t.overflow){const i=Math.round(t.overflow);i!==e.height&&(t.overflowing=!0,e.element.dataset.state="overflow",e.height=i)}},yo=Q({create:mo,write:Ro,name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),Ie=(e,t,n,i="")=>{n?j(e,t,i):e.removeAttribute(t)},wo=e=>{if(!(!e||e.value==="")){try{e.value=""}catch{}if(e.value){const t=Ae("form"),n=e.parentNode,i=e.nextSibling;t.appendChild(e),t.reset(),i?n.insertBefore(e,i):n.appendChild(e)}}},Ao=({root:e,props:t})=>{e.element.id=`filepond--browser-${t.id}`,j(e.element,"name",e.query("GET_NAME")),j(e.element,"aria-controls",`filepond--assistant-${t.id}`),j(e.element,"aria-labelledby",`filepond--drop-label-${t.id}`),es({root:e,action:{value:e.query("GET_ACCEPTED_FILE_TYPES")}}),ts({root:e,action:{value:e.query("GET_ALLOW_MULTIPLE")}}),ns({root:e,action:{value:e.query("GET_ALLOW_DIRECTORIES_ONLY")}}),sn({root:e}),is({root:e,action:{value:e.query("GET_REQUIRED")}}),ss({root:e,action:{value:e.query("GET_CAPTURE_METHOD")}}),e.ref.handleChange=n=>{if(!e.element.value)return;const i=Array.from(e.element.files).map(s=>(s._relativePath=s.webkitRelativePath,s));setTimeout(()=>{t.onload(i),wo(e.element)},250)},e.element.addEventListener("change",e.ref.handleChange)},es=({root:e,action:t})=>{e.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&Ie(e.element,"accept",!!t.value,t.value?t.value.join(","):"")},ts=({root:e,action:t})=>{Ie(e.element,"multiple",t.value)},ns=({root:e,action:t})=>{Ie(e.element,"webkitdirectory",t.value)},sn=({root:e})=>{const t=e.query("GET_DISABLED"),n=e.query("GET_ALLOW_BROWSE"),i=t||!n;Ie(e.element,"disabled",i)},is=({root:e,action:t})=>{t.value?e.query("GET_TOTAL_ITEMS")===0&&Ie(e.element,"required",!0):Ie(e.element,"required",!1)},ss=({root:e,action:t})=>{Ie(e.element,"capture",!!t.value,t.value===!0?"":t.value)},ti=({root:e})=>{const{element:t}=e;e.query("GET_TOTAL_ITEMS")>0?(Ie(t,"required",!1),Ie(t,"name",!1)):(Ie(t,"name",!0,e.query("GET_NAME")),e.query("GET_CHECK_VALIDITY")&&t.setCustomValidity(""),e.query("GET_REQUIRED")&&Ie(t,"required",!0))},Oo=({root:e})=>{e.query("GET_CHECK_VALIDITY")&&e.element.setCustomValidity(e.query("GET_LABEL_INVALID_FIELD"))},So=Q({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:Ao,destroy:({root:e})=>{e.element.removeEventListener("change",e.ref.handleChange)},write:oe({DID_LOAD_ITEM:ti,DID_REMOVE_ITEM:ti,DID_THROW_ITEM_INVALID:Oo,DID_SET_DISABLED:sn,DID_SET_ALLOW_BROWSE:sn,DID_SET_ALLOW_DIRECTORIES_ONLY:ns,DID_SET_ALLOW_MULTIPLE:ts,DID_SET_ACCEPTED_FILE_TYPES:es,DID_SET_CAPTURE_METHOD:ss,DID_SET_REQUIRED:is})}),ni={ENTER:13,SPACE:32},Do=({root:e,props:t})=>{const n=Ae("label");j(n,"for",`filepond--browser-${t.id}`),j(n,"id",`filepond--drop-label-${t.id}`),j(n,"aria-hidden","true"),e.ref.handleKeyDown=i=>{(i.keyCode===ni.ENTER||i.keyCode===ni.SPACE)&&(i.preventDefault(),e.ref.label.click())},e.ref.handleClick=i=>{i.target===n||n.contains(i.target)||e.ref.label.click()},n.addEventListener("keydown",e.ref.handleKeyDown),e.element.addEventListener("click",e.ref.handleClick),rs(n,t.caption),e.appendChild(n),e.ref.label=n},rs=(e,t)=>{e.innerHTML=t;const n=e.querySelector(".filepond--label-action");return n&&j(n,"tabindex","0"),t},Mo=Q({name:"drop-label",ignoreRect:!0,create:Do,destroy:({root:e})=>{e.ref.label.addEventListener("keydown",e.ref.handleKeyDown),e.element.removeEventListener("click",e.ref.handleClick)},write:oe({DID_SET_LABEL_IDLE:({root:e,action:t})=>{rs(e.ref.label,t.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),vo=Q({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),Po=({root:e})=>{const t=e.rect.element.width*.5,n=e.rect.element.height*.5;e.ref.blob=e.appendChildView(e.createChildView(vo,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:t,translateY:n}))},Lo=({root:e,action:t})=>{if(!e.ref.blob){Po({root:e});return}e.ref.blob.translateX=t.position.scopeLeft,e.ref.blob.translateY=t.position.scopeTop,e.ref.blob.scaleX=1,e.ref.blob.scaleY=1,e.ref.blob.opacity=1},bo=({root:e})=>{e.ref.blob&&(e.ref.blob.opacity=0)},Co=({root:e})=>{e.ref.blob&&(e.ref.blob.scaleX=2.5,e.ref.blob.scaleY=2.5,e.ref.blob.opacity=0)},No=({root:e,props:t,actions:n})=>{xo({root:e,props:t,actions:n});const{blob:i}=e.ref;n.length===0&&i&&i.opacity===0&&(e.removeChildView(i),e.ref.blob=null)},xo=oe({DID_DRAG:Lo,DID_DROP:Co,DID_END_DRAG:bo}),Go=Q({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:No}),as=(e,t)=>{try{const n=new DataTransfer;t.forEach(i=>{i instanceof File?n.items.add(i):n.items.add(new File([i],i.name,{type:i.type}))}),e.files=n.files}catch{return!1}return!0},Bo=({root:e})=>e.ref.fields={},Gt=(e,t)=>e.ref.fields[t],mn=e=>{e.query("GET_ACTIVE_ITEMS").forEach(t=>{e.ref.fields[t.id]&&e.element.appendChild(e.ref.fields[t.id])})},ii=({root:e})=>mn(e),Fo=({root:e,action:t})=>{const s=!(e.query("GET_ITEM",t.id).origin===Z.LOCAL)&&e.query("SHOULD_UPDATE_FILE_INPUT"),r=Ae("input");r.type=s?"file":"hidden",r.name=e.query("GET_NAME"),r.disabled=e.query("GET_DISABLED"),e.ref.fields[t.id]=r,mn(e)},Uo=({root:e,action:t})=>{const n=Gt(e,t.id);if(!n||(t.serverFileReference!==null&&(n.value=t.serverFileReference),!e.query("SHOULD_UPDATE_FILE_INPUT")))return;const i=e.query("GET_ITEM",t.id);as(n,[i.file])},Vo=({root:e,action:t})=>{e.query("SHOULD_UPDATE_FILE_INPUT")&&setTimeout(()=>{const n=Gt(e,t.id);n&&as(n,[t.file])},0)},$o=({root:e})=>{e.element.disabled=e.query("GET_DISABLED")},Ho=({root:e,action:t})=>{const n=Gt(e,t.id);n&&(n.parentNode&&n.parentNode.removeChild(n),delete e.ref.fields[t.id])},Wo=({root:e,action:t})=>{const n=Gt(e,t.id);n&&(t.value===null?n.removeAttribute("value"):n.value=t.value,mn(e))},ko=oe({DID_SET_DISABLED:$o,DID_ADD_ITEM:Fo,DID_LOAD_ITEM:Uo,DID_REMOVE_ITEM:Ho,DID_DEFINE_VALUE:Wo,DID_PREPARE_OUTPUT:Vo,DID_REORDER_ITEMS:ii,DID_SORT_ITEMS:ii}),qo=Q({tag:"fieldset",name:"data",create:Bo,write:ko,ignoreRect:!0}),Yo=e=>"getRootNode"in e?e.getRootNode():document,zo=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],Xo=["css","csv","html","txt"],jo={zip:"zip|compressed",epub:"application/epub+zip"},os=(e="")=>(e=e.toLowerCase(),zo.includes(e)?"image/"+(e==="jpg"?"jpeg":e==="svg"?"svg+xml":e):Xo.includes(e)?"text/"+e:jo[e]||""),In=e=>new Promise((t,n)=>{const i=il(e);if(i.length&&!Qo(e))return t(i);Ko(e).then(t)}),Qo=e=>e.files?e.files.length>0:!1,Ko=e=>new Promise((t,n)=>{const i=(e.items?Array.from(e.items):[]).filter(s=>Zo(s)).map(s=>Jo(s));if(!i.length){t(e.files?Array.from(e.files):[]);return}Promise.all(i).then(s=>{const r=[];s.forEach(a=>{r.push.apply(r,a)}),t(r.filter(a=>a).map(a=>(a._relativePath||(a._relativePath=a.webkitRelativePath),a)))}).catch(console.error)}),Zo=e=>{if(ls(e)){const t=_n(e);if(t)return t.isFile||t.isDirectory}return e.kind==="file"},Jo=e=>new Promise((t,n)=>{if(nl(e)){el(_n(e)).then(t).catch(n);return}t([e.getAsFile()])}),el=e=>new Promise((t,n)=>{const i=[];let s=0,r=0;const a=()=>{r===0&&s===0&&t(i)},l=o=>{s++;const d=o.createReader(),c=()=>{d.readEntries(u=>{if(u.length===0){s--,a();return}u.forEach(p=>{p.isDirectory?l(p):(r++,p.file(f=>{const h=tl(f);p.fullPath&&(h._relativePath=p.fullPath),i.push(h),r--,a()}))}),c()},n)};c()};l(e)}),tl=e=>{if(e.type.length)return e;const t=e.lastModifiedDate,n=e.name,i=os(xt(e.name));return i.length&&(e=e.slice(0,e.size,i),e.name=n,e.lastModifiedDate=t),e},nl=e=>ls(e)&&(_n(e)||{}).isDirectory,ls=e=>"webkitGetAsEntry"in e,_n=e=>e.webkitGetAsEntry(),il=e=>{let t=[];try{if(t=rl(e),t.length)return t;t=sl(e)}catch{}return t},sl=e=>{let t=e.getData("url");return typeof t=="string"&&t.length?[t]:[]},rl=e=>{let t=e.getData("text/html");if(typeof t=="string"&&t.length){const n=t.match(/src\s*=\s*"(.+?)"/);if(n)return[n[1]]}return[]},St=[],xe=e=>({pageLeft:e.pageX,pageTop:e.pageY,scopeLeft:e.offsetX||e.layerX,scopeTop:e.offsetY||e.layerY}),al=(e,t,n)=>{const i=ol(t),s={element:e,filterElement:n,state:null,ondrop:()=>{},onenter:()=>{},ondrag:()=>{},onexit:()=>{},onload:()=>{},allowdrop:()=>{}};return s.destroy=i.addListener(s),s},ol=e=>{const t=St.find(i=>i.element===e);if(t)return t;const n=ll(e);return St.push(n),n},ll=e=>{const t=[],n={dragenter:dl,dragover:ul,dragleave:hl,drop:fl},i={};H(n,(r,a)=>{i[r]=a(e,t),e.addEventListener(r,i[r],!1)});const s={element:e,addListener:r=>(t.push(r),()=>{t.splice(t.indexOf(r),1),t.length===0&&(St.splice(St.indexOf(s),1),H(n,a=>{e.removeEventListener(a,i[a],!1)}))})};return s},cl=(e,t)=>("elementFromPoint"in e||(e=document),e.elementFromPoint(t.x,t.y)),Tn=(e,t)=>{const n=Yo(t),i=cl(n,{x:e.pageX-window.pageXOffset,y:e.pageY-window.pageYOffset});return i===t||t.contains(i)};let cs=null;const pt=(e,t)=>{try{e.dropEffect=t}catch{}},dl=(e,t)=>n=>{n.preventDefault(),cs=n.target,t.forEach(i=>{const{element:s,onenter:r}=i;Tn(n,s)&&(i.state="enter",r(xe(n)))})},ul=(e,t)=>n=>{n.preventDefault();const i=n.dataTransfer;In(i).then(s=>{let r=!1;t.some(a=>{const{filterElement:l,element:o,onenter:d,onexit:c,ondrag:u,allowdrop:p}=a;pt(i,"copy");const f=p(s);if(!f){pt(i,"none");return}if(Tn(n,o)){if(r=!0,a.state===null){a.state="enter",d(xe(n));return}if(a.state="over",l&&!f){pt(i,"none");return}u(xe(n))}else l&&!r&&pt(i,"none"),a.state&&(a.state=null,c(xe(n)))})})},fl=(e,t)=>n=>{n.preventDefault();const i=n.dataTransfer;In(i).then(s=>{t.forEach(r=>{const{filterElement:a,element:l,ondrop:o,onexit:d,allowdrop:c}=r;if(r.state=null,!(a&&!Tn(n,l))){if(!c(s))return d(xe(n));o(xe(n),s)}})})},hl=(e,t)=>n=>{cs===n.target&&t.forEach(i=>{const{onexit:s}=i;i.state=null,s(xe(n))})},pl=(e,t,n)=>{e.classList.add("filepond--hopper");const{catchesDropsOnPage:i,requiresDropOnElement:s,filterItems:r=c=>c}=n,a=al(e,i?document.documentElement:e,s);let l="",o="";a.allowdrop=c=>t(r(c)),a.ondrop=(c,u)=>{const p=r(u);if(!t(p)){d.ondragend(c);return}o="drag-drop",d.onload(p,c)},a.ondrag=c=>{d.ondrag(c)},a.onenter=c=>{o="drag-over",d.ondragstart(c)},a.onexit=c=>{o="drag-exit",d.ondragend(c)};const d={updateHopperState:()=>{l!==o&&(e.dataset.hopperState=o,l=o)},onload:()=>{},ondragstart:()=>{},ondrag:()=>{},ondragend:()=>{},destroy:()=>{a.destroy()}};return d};let rn=!1;const ke=[],ds=e=>{const t=document.activeElement;if(t&&/textarea|input/i.test(t.nodeName)){let n=!1,i=t;for(;i!==document.body;){if(i.classList.contains("filepond--root")){n=!0;break}i=i.parentNode}if(!n)return}In(e.clipboardData).then(n=>{n.length&&ke.forEach(i=>i(n))})},El=e=>{ke.includes(e)||(ke.push(e),!rn&&(rn=!0,document.addEventListener("paste",ds)))},gl=e=>{un(ke,ke.indexOf(e)),ke.length===0&&(document.removeEventListener("paste",ds),rn=!1)},ml=()=>{const e=n=>{t.onload(n)},t={destroy:()=>{gl(e)},onload:()=>{}};return El(e),t},Il=({root:e,props:t})=>{e.element.id=`filepond--assistant-${t.id}`,j(e.element,"role","status"),j(e.element,"aria-live","polite"),j(e.element,"aria-relevant","additions")};let si=null,ri=null;const qt=[],Bt=(e,t)=>{e.element.textContent=t},_l=e=>{e.element.textContent=""},us=(e,t,n)=>{const i=e.query("GET_TOTAL_ITEMS");Bt(e,`${n} ${t}, ${i} ${i===1?e.query("GET_LABEL_FILE_COUNT_SINGULAR"):e.query("GET_LABEL_FILE_COUNT_PLURAL")}`),clearTimeout(ri),ri=setTimeout(()=>{_l(e)},1500)},fs=e=>e.element.parentNode.contains(document.activeElement),Tl=({root:e,action:t})=>{if(!fs(e))return;e.element.textContent="";const n=e.query("GET_ITEM",t.id);qt.push(n.filename),clearTimeout(si),si=setTimeout(()=>{us(e,qt.join(", "),e.query("GET_LABEL_FILE_ADDED")),qt.length=0},750)},Rl=({root:e,action:t})=>{if(!fs(e))return;const n=t.item;us(e,n.filename,e.query("GET_LABEL_FILE_REMOVED"))},yl=({root:e,action:t})=>{const i=e.query("GET_ITEM",t.id).filename,s=e.query("GET_LABEL_FILE_PROCESSING_COMPLETE");Bt(e,`${i} ${s}`)},ai=({root:e,action:t})=>{const i=e.query("GET_ITEM",t.id).filename,s=e.query("GET_LABEL_FILE_PROCESSING_ABORTED");Bt(e,`${i} ${s}`)},Et=({root:e,action:t})=>{const i=e.query("GET_ITEM",t.id).filename;Bt(e,`${t.status.main} ${i} ${t.status.sub}`)},wl=Q({create:Il,ignoreRect:!0,ignoreRectUpdate:!0,write:oe({DID_LOAD_ITEM:Tl,DID_REMOVE_ITEM:Rl,DID_COMPLETE_ITEM_PROCESSING:yl,DID_ABORT_ITEM_PROCESSING:ai,DID_REVERT_ITEM_PROCESSING:ai,DID_THROW_ITEM_REMOVE_ERROR:Et,DID_THROW_ITEM_LOAD_ERROR:Et,DID_THROW_ITEM_INVALID:Et,DID_THROW_ITEM_PROCESSING_ERROR:Et}),tag:"span",name:"assistant"}),hs=(e,t="-")=>e.replace(new RegExp(`${t}.`,"g"),n=>n.charAt(1).toUpperCase()),ps=(e,t=16,n=!0)=>{let i=Date.now(),s=null;return(...r)=>{clearTimeout(s);const a=Date.now()-i,l=()=>{i=Date.now(),e(...r)};a<t?n||(s=setTimeout(l,t-a)):l()}},Al=1e6,Dt=e=>e.preventDefault(),Ol=({root:e,props:t})=>{const n=e.query("GET_ID");n&&(e.element.id=n);const i=e.query("GET_CLASS_NAME");i&&i.split(" ").filter(o=>o.length).forEach(o=>{e.element.classList.add(o)}),e.ref.label=e.appendChildView(e.createChildView(Mo,{...t,translateY:null,caption:e.query("GET_LABEL_IDLE")})),e.ref.list=e.appendChildView(e.createChildView(yo,{translateY:null})),e.ref.panel=e.appendChildView(e.createChildView(Ji,{name:"panel-root"})),e.ref.assistant=e.appendChildView(e.createChildView(wl,{...t})),e.ref.data=e.appendChildView(e.createChildView(qo,{...t})),e.ref.measure=Ae("div"),e.ref.measure.style.height="100%",e.element.appendChild(e.ref.measure),e.ref.bounds=null,e.query("GET_STYLES").filter(o=>!we(o.value)).map(({name:o,value:d})=>{e.element.dataset[o]=d}),e.ref.widthPrevious=null,e.ref.widthUpdated=ps(()=>{e.ref.updateHistory=[],e.dispatch("DID_RESIZE_ROOT")},250),e.ref.previousAspectRatio=null,e.ref.updateHistory=[];const s=window.matchMedia("(pointer: fine) and (hover: hover)").matches,r="PointerEvent"in window;e.query("GET_ALLOW_REORDER")&&r&&!s&&(e.element.addEventListener("touchmove",Dt,{passive:!1}),e.element.addEventListener("gesturestart",Dt));const a=e.query("GET_CREDITS");if(a.length===2){const o=document.createElement("a");o.className="filepond--credits",o.setAttribute("aria-hidden","true"),o.href=a[0],o.tabindex=-1,o.target="_blank",o.rel="noopener noreferrer",o.textContent=a[1],e.element.appendChild(o),e.ref.credits=o}},Sl=({root:e,props:t,actions:n})=>{if(Ll({root:e,props:t,actions:n}),n.filter(O=>/^DID_SET_STYLE_/.test(O.type)).filter(O=>!we(O.data.value)).map(({type:O,data:P})=>{const R=hs(O.substring(8).toLowerCase(),"_");e.element.dataset[R]=P.value,e.invalidateLayout()}),e.rect.element.hidden)return;e.rect.element.width!==e.ref.widthPrevious&&(e.ref.widthPrevious=e.rect.element.width,e.ref.widthUpdated());let i=e.ref.bounds;i||(i=e.ref.bounds=vl(e),e.element.removeChild(e.ref.measure),e.ref.measure=null);const{hopper:s,label:r,list:a,panel:l}=e.ref;s&&s.updateHopperState();const o=e.query("GET_PANEL_ASPECT_RATIO"),d=e.query("GET_ALLOW_MULTIPLE"),c=e.query("GET_TOTAL_ITEMS"),u=d?e.query("GET_MAX_FILES")||Al:1,p=c===u,f=n.find(O=>O.type==="DID_ADD_ITEM");if(p&&f){const O=f.data.interactionMethod;r.opacity=0,d?r.translateY=-40:O===Ee.API?r.translateX=40:O===Ee.BROWSE?r.translateY=40:r.translateY=30}else p||(r.opacity=1,r.translateX=0,r.translateY=0);const h=Dl(e),g=Ml(e),I=r.rect.element.height,_=!d||p?0:I,E=p?a.rect.element.marginTop:0,m=c===0?0:a.rect.element.marginBottom,T=_+E+g.visual+m,y=_+E+g.bounds+m;if(a.translateY=Math.max(0,_-a.rect.element.marginTop)-h.top,o){const O=e.rect.element.width,P=O*o;o!==e.ref.previousAspectRatio&&(e.ref.previousAspectRatio=o,e.ref.updateHistory=[]);const R=e.ref.updateHistory;R.push(O);const M=2;if(R.length>M*2){const L=R.length,v=L-10;let G=0;for(let S=L;S>=v;S--)if(R[S]===R[S-2]&&G++,G>=M)return}l.scalable=!1,l.height=P;const N=P-_-(m-h.bottom)-(p?E:0);g.visual>N?a.overflow=N:a.overflow=null,e.height=P}else if(i.fixedHeight){l.scalable=!1;const O=i.fixedHeight-_-(m-h.bottom)-(p?E:0);g.visual>O?a.overflow=O:a.overflow=null}else if(i.cappedHeight){const O=T>=i.cappedHeight,P=Math.min(i.cappedHeight,T);l.scalable=!0,l.height=O?P:P-h.top-h.bottom;const R=P-_-(m-h.bottom)-(p?E:0);T>i.cappedHeight&&g.visual>R?a.overflow=R:a.overflow=null,e.height=Math.min(i.cappedHeight,y-h.top-h.bottom)}else{const O=c>0?h.top+h.bottom:0;l.scalable=!0,l.height=Math.max(I,T-O),e.height=Math.max(I,y-O)}e.ref.credits&&l.heightCurrent&&(e.ref.credits.style.transform=`translateY(${l.heightCurrent}px)`)},Dl=e=>{const t=e.ref.list.childViews[0].childViews[0];return t?{top:t.rect.element.marginTop,bottom:t.rect.element.marginBottom}:{top:0,bottom:0}},Ml=e=>{let t=0,n=0;const i=e.ref.list,s=i.childViews[0],r=s.childViews.filter(E=>E.rect.element.height),a=e.query("GET_ACTIVE_ITEMS").map(E=>r.find(m=>m.id===E.id)).filter(E=>E);if(a.length===0)return{visual:t,bounds:n};const l=s.rect.element.width,o=gn(s,a,i.dragCoordinates),d=a[0].rect.element,c=d.marginTop+d.marginBottom,u=d.marginLeft+d.marginRight,p=d.width+u,f=d.height+c,h=typeof o<"u"&&o>=0?1:0,g=a.find(E=>E.markedForRemoval&&E.opacity<.45)?-1:0,I=a.length+h+g,_=En(l,p);return _===1?a.forEach(E=>{const m=E.rect.element.height+c;n+=m,t+=m*E.opacity}):(n=Math.ceil(I/_)*f,t=n),{visual:t,bounds:n}},vl=e=>{const t=e.ref.measureHeight||null;return{cappedHeight:parseInt(e.style.maxHeight,10)||null,fixedHeight:t===0?null:t}},Rn=(e,t)=>{const n=e.query("GET_ALLOW_REPLACE"),i=e.query("GET_ALLOW_MULTIPLE"),s=e.query("GET_TOTAL_ITEMS");let r=e.query("GET_MAX_FILES");const a=t.length;return!i&&a>1?(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:k("warning",0,"Max files")}),!0):(r=i?r:1,!i&&n?!1:ze(r)&&s+a>r?(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:k("warning",0,"Max files")}),!0):!1)},Pl=(e,t,n)=>{const i=e.childViews[0];return gn(i,t,{left:n.scopeLeft-i.rect.element.left,top:n.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},oi=e=>{const t=e.query("GET_ALLOW_DROP"),n=e.query("GET_DISABLED"),i=t&&!n;if(i&&!e.ref.hopper){const s=pl(e.element,r=>{const a=e.query("GET_BEFORE_DROP_FILE")||(()=>!0);return e.query("GET_DROP_VALIDATION")?r.every(o=>Ge("ALLOW_HOPPER_ITEM",o,{query:e.query}).every(d=>d===!0)&&a(o)):!0},{filterItems:r=>{const a=e.query("GET_IGNORED_FILES");return r.filter(l=>Ye(l)?!a.includes(l.name.toLowerCase()):!0)},catchesDropsOnPage:e.query("GET_DROP_ON_PAGE"),requiresDropOnElement:e.query("GET_DROP_ON_ELEMENT")});s.onload=(r,a)=>{const o=e.ref.list.childViews[0].childViews.filter(c=>c.rect.element.height),d=e.query("GET_ACTIVE_ITEMS").map(c=>o.find(u=>u.id===c.id)).filter(c=>c);ge("ADD_ITEMS",r,{dispatch:e.dispatch}).then(c=>{if(Rn(e,c))return!1;e.dispatch("ADD_ITEMS",{items:c,index:Pl(e.ref.list,d,a),interactionMethod:Ee.DROP})}),e.dispatch("DID_DROP",{position:a}),e.dispatch("DID_END_DRAG",{position:a})},s.ondragstart=r=>{e.dispatch("DID_START_DRAG",{position:r})},s.ondrag=ps(r=>{e.dispatch("DID_DRAG",{position:r})}),s.ondragend=r=>{e.dispatch("DID_END_DRAG",{position:r})},e.ref.hopper=s,e.ref.drip=e.appendChildView(e.createChildView(Go))}else!i&&e.ref.hopper&&(e.ref.hopper.destroy(),e.ref.hopper=null,e.removeChildView(e.ref.drip))},li=(e,t)=>{const n=e.query("GET_ALLOW_BROWSE"),i=e.query("GET_DISABLED"),s=n&&!i;s&&!e.ref.browser?e.ref.browser=e.appendChildView(e.createChildView(So,{...t,onload:r=>{ge("ADD_ITEMS",r,{dispatch:e.dispatch}).then(a=>{if(Rn(e,a))return!1;e.dispatch("ADD_ITEMS",{items:a,index:-1,interactionMethod:Ee.BROWSE})})}}),0):!s&&e.ref.browser&&(e.removeChildView(e.ref.browser),e.ref.browser=null)},ci=e=>{const t=e.query("GET_ALLOW_PASTE"),n=e.query("GET_DISABLED"),i=t&&!n;i&&!e.ref.paster?(e.ref.paster=ml(),e.ref.paster.onload=s=>{ge("ADD_ITEMS",s,{dispatch:e.dispatch}).then(r=>{if(Rn(e,r))return!1;e.dispatch("ADD_ITEMS",{items:r,index:-1,interactionMethod:Ee.PASTE})})}):!i&&e.ref.paster&&(e.ref.paster.destroy(),e.ref.paster=null)},Ll=oe({DID_SET_ALLOW_BROWSE:({root:e,props:t})=>{li(e,t)},DID_SET_ALLOW_DROP:({root:e})=>{oi(e)},DID_SET_ALLOW_PASTE:({root:e})=>{ci(e)},DID_SET_DISABLED:({root:e,props:t})=>{oi(e),ci(e),li(e,t),e.query("GET_DISABLED")?e.element.dataset.disabled="disabled":e.element.removeAttribute("data-disabled")}}),bl=Q({name:"root",read:({root:e})=>{e.ref.measure&&(e.ref.measureHeight=e.ref.measure.offsetHeight)},create:Ol,write:Sl,destroy:({root:e})=>{e.ref.paster&&e.ref.paster.destroy(),e.ref.hopper&&e.ref.hopper.destroy(),e.element.removeEventListener("touchmove",Dt),e.element.removeEventListener("gesturestart",Dt)},mixins:{styles:["height"]}}),Cl=(e={})=>{let t=null;const n=Ot(),i=Xs(Cr(n),[Zr,Gr(n)],[wa,xr(n)]);i.dispatch("SET_OPTIONS",{options:e});const s=()=>{document.hidden||i.dispatch("KICK")};document.addEventListener("visibilitychange",s);let r=null,a=!1,l=!1,o=null,d=null;const c=()=>{a||(a=!0),clearTimeout(r),r=setTimeout(()=>{a=!1,o=null,d=null,l&&(l=!1,i.dispatch("DID_STOP_RESIZE"))},500)};window.addEventListener("resize",c);const u=bl(i,{id:dn()});let p=!1,f=!1;const h={_read:()=>{a&&(d=window.innerWidth,o||(o=d),!l&&d!==o&&(i.dispatch("DID_START_RESIZE"),l=!0)),f&&p&&(p=u.element.offsetParent===null),!p&&(u._read(),f=u.rect.element.hidden)},_write:w=>{const D=i.processActionQueue().filter(C=>!/^SET_/.test(C.type));p&&!D.length||(E(D),p=u._write(w,D,l),Ur(i.query("GET_ITEMS")),p&&i.processDispatchQueue())}},g=w=>D=>{const C={type:w};if(!D)return C;if(D.hasOwnProperty("error")&&(C.error=D.error?{...D.error}:null),D.status&&(C.status={...D.status}),D.file&&(C.output=D.file),D.source)C.file=D.source;else if(D.item||D.id){const b=D.item?D.item:i.query("GET_ITEM",D.id);C.file=b?le(b):null}return D.items&&(C.items=D.items.map(le)),/progress/.test(w)&&(C.progress=D.progress),D.hasOwnProperty("origin")&&D.hasOwnProperty("target")&&(C.origin=D.origin,C.target=D.target),C},I={DID_DESTROY:g("destroy"),DID_INIT:g("init"),DID_THROW_MAX_FILES:g("warning"),DID_INIT_ITEM:g("initfile"),DID_START_ITEM_LOAD:g("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:g("addfileprogress"),DID_LOAD_ITEM:g("addfile"),DID_THROW_ITEM_INVALID:[g("error"),g("addfile")],DID_THROW_ITEM_LOAD_ERROR:[g("error"),g("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[g("error"),g("removefile")],DID_PREPARE_OUTPUT:g("preparefile"),DID_START_ITEM_PROCESSING:g("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:g("processfileprogress"),DID_ABORT_ITEM_PROCESSING:g("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:g("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:g("processfiles"),DID_REVERT_ITEM_PROCESSING:g("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[g("error"),g("processfile")],DID_REMOVE_ITEM:g("removefile"),DID_UPDATE_ITEMS:g("updatefiles"),DID_ACTIVATE_ITEM:g("activatefile"),DID_REORDER_ITEMS:g("reorderfiles")},_=w=>{const D={pond:x,...w};delete D.type,u.element.dispatchEvent(new CustomEvent(`FilePond:${w.type}`,{detail:D,bubbles:!0,cancelable:!0,composed:!0}));const C=[];w.hasOwnProperty("error")&&C.push(w.error),w.hasOwnProperty("file")&&C.push(w.file);const b=["type","error","file"];Object.keys(w).filter(F=>!b.includes(F)).forEach(F=>C.push(w[F])),x.fire(w.type,...C);const B=i.query(`GET_ON${w.type.toUpperCase()}`);B&&B(...C)},E=w=>{w.length&&w.filter(D=>I[D.type]).forEach(D=>{const C=I[D.type];(Array.isArray(C)?C:[C]).forEach(b=>{D.type==="DID_INIT_ITEM"?_(b(D.data)):setTimeout(()=>{_(b(D.data))},0)})})},m=w=>i.dispatch("SET_OPTIONS",{options:w}),T=w=>i.query("GET_ACTIVE_ITEM",w),y=w=>new Promise((D,C)=>{i.dispatch("REQUEST_ITEM_PREPARE",{query:w,success:b=>{D(b)},failure:b=>{C(b)}})}),O=(w,D={})=>new Promise((C,b)=>{M([{source:w,options:D}],{index:D.index}).then(B=>C(B&&B[0])).catch(b)}),P=w=>w.file&&w.id,R=(w,D)=>(typeof w=="object"&&!P(w)&&!D&&(D=w,w=void 0),i.dispatch("REMOVE_ITEM",{...D,query:w}),i.query("GET_ACTIVE_ITEM",w)===null),M=(...w)=>new Promise((D,C)=>{const b=[],B={};if(Lt(w[0]))b.push.apply(b,w[0]),Object.assign(B,w[1]||{});else{const F=w[w.length-1];typeof F=="object"&&!(F instanceof Blob)&&Object.assign(B,w.pop()),b.push(...w)}i.dispatch("ADD_ITEMS",{items:b,index:B.index,interactionMethod:Ee.API,success:D,failure:C})}),N=()=>i.query("GET_ACTIVE_ITEMS"),L=w=>new Promise((D,C)=>{i.dispatch("REQUEST_ITEM_PROCESSING",{query:w,success:b=>{D(b)},failure:b=>{C(b)}})}),v=(...w)=>{const D=Array.isArray(w[0])?w[0]:w,C=D.length?D:N();return Promise.all(C.map(y))},G=(...w)=>{const D=Array.isArray(w[0])?w[0]:w;if(!D.length){const C=N().filter(b=>!(b.status===V.IDLE&&b.origin===Z.LOCAL)&&b.status!==V.PROCESSING&&b.status!==V.PROCESSING_COMPLETE&&b.status!==V.PROCESSING_REVERT_ERROR);return Promise.all(C.map(L))}return Promise.all(D.map(L))},S=(...w)=>{const D=Array.isArray(w[0])?w[0]:w;let C;typeof D[D.length-1]=="object"?C=D.pop():Array.isArray(w[0])&&(C=w[1]);const b=N();return D.length?D.map(F=>Pe(F)?b[F]?b[F].id:null:F).filter(F=>F).map(F=>R(F,C)):Promise.all(b.map(F=>R(F,C)))},x={...Nt(),...h,...Nr(i,n),setOptions:m,addFile:O,addFiles:M,getFile:T,processFile:L,prepareFile:y,removeFile:R,moveFile:(w,D)=>i.dispatch("MOVE_ITEM",{query:w,index:D}),getFiles:N,processFiles:G,removeFiles:S,prepareFiles:v,sort:w=>i.dispatch("SORT",{compare:w}),browse:()=>{var w=u.element.querySelector("input[type=file]");w&&w.click()},destroy:()=>{x.fire("destroy",u.element),i.dispatch("ABORT_ALL"),u._destroy(),window.removeEventListener("resize",c),document.removeEventListener("visibilitychange",s),i.dispatch("DID_DESTROY")},insertBefore:w=>bn(u.element,w),insertAfter:w=>Cn(u.element,w),appendTo:w=>w.appendChild(u.element),replaceElement:w=>{bn(u.element,w),w.parentNode.removeChild(w),t=w},restoreElement:()=>{t&&(Cn(t,u.element),u.element.parentNode.removeChild(u.element),t=null)},isAttachedTo:w=>u.element===w||t===w,element:{get:()=>u.element},status:{get:()=>i.query("GET_STATUS")}};return i.dispatch("DID_INIT"),De(x)},Es=(e={})=>{const t={};return H(Ot(),(i,s)=>{t[i]=s[0]}),Cl({...t,...e})},Nl=e=>e.charAt(0).toLowerCase()+e.slice(1),xl=e=>hs(e.replace(/^data-/,"")),gs=(e,t)=>{H(t,(n,i)=>{H(e,(s,r)=>{const a=new RegExp(n);if(!a.test(s)||(delete e[s],i===!1))return;if(ae(i)){e[i]=r;return}const o=i.group;J(i)&&!e[o]&&(e[o]={}),e[o][Nl(s.replace(a,""))]=r}),i.mapping&&gs(e[i.group],i.mapping)})},Gl=(e,t={})=>{const n=[];H(e.attributes,s=>{n.push(e.attributes[s])});const i=n.filter(s=>s.name).reduce((s,r)=>{const a=j(e,r.name);return s[xl(r.name)]=a===r.name?!0:a,s},{});return gs(i,t),i},Bl=(e,t={})=>{const n={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};Ge("SET_ATTRIBUTE_TO_OPTION_MAP",n);const i={...t},s=Gl(e.nodeName==="FIELDSET"?e.querySelector("input[type=file]"):e,n);Object.keys(s).forEach(a=>{J(s[a])?(J(i[a])||(i[a]={}),Object.assign(i[a],s[a])):i[a]=s[a]}),i.files=(t.files||[]).concat(Array.from(e.querySelectorAll("input:not([type=file])")).map(a=>({source:a.value,options:{type:a.dataset.type}})));const r=Es(i);return e.files&&Array.from(e.files).forEach(a=>{r.addFile(a)}),r.replaceElement(e),r},Fl=(...e)=>zs(e[0])?Bl(...e):Es(...e),Ul=["fire","_read","_write"],di=e=>{const t={};return Fi(e,t,Ul),t},Vl=(e,t)=>e.replace(/(?:{([a-zA-Z]+)})/g,(n,i)=>t[i]),$l=e=>{const t=new Blob(["(",e.toString(),")()"],{type:"application/javascript"}),n=URL.createObjectURL(t),i=new Worker(n);return{transfer:(s,r)=>{},post:(s,r,a)=>{const l=dn();i.onmessage=o=>{o.data.id===l&&r(o.data.message)},i.postMessage({id:l,message:s},a)},terminate:()=>{i.terminate(),URL.revokeObjectURL(n)}}},Hl=e=>new Promise((t,n)=>{const i=new Image;i.onload=()=>{t(i)},i.onerror=s=>{n(s)},i.src=e}),ms=(e,t)=>{const n=e.slice(0,e.size,e.type);return n.lastModifiedDate=e.lastModifiedDate,n.name=t,n},Wl=e=>ms(e,e.name),ui=[],kl=e=>{if(ui.includes(e))return;ui.push(e);const t=e({addFilter:$r,utils:{Type:A,forin:H,isString:ae,isFile:Ye,toNaturalFileSize:Qi,replaceInString:Vl,getExtensionFromFilename:xt,getFilenameWithoutExtension:zi,guesstimateMimeType:os,getFileFromBlob:qe,getFilenameFromURL:at,createRoute:oe,createWorker:$l,createView:Q,createItemAPI:le,loadImage:Hl,copyFile:Wl,renameFile:ms,createBlob:ki,applyFilterChain:ge,text:q,getNumericAspectRatioFromString:$i},views:{fileActionButton:ji}});Hr(t.options)},ql=()=>Object.prototype.toString.call(window.operamini)==="[object OperaMini]",Yl=()=>"Promise"in window,zl=()=>"slice"in Blob.prototype,Xl=()=>"URL"in window&&"createObjectURL"in window.URL,jl=()=>"visibilityState"in document,Ql=()=>"performance"in window,Kl=()=>"supports"in(window.CSS||{}),Zl=()=>/MSIE|Trident/.test(window.navigator.userAgent),an=(()=>{const e=bi()&&!ql()&&jl()&&Yl()&&zl()&&Xl()&&Ql()&&(Kl()||Zl());return()=>e})(),Oe={apps:[]},Jl="filepond",Be=()=>{};let Mt={},Rt=Be,Yt=Be,fi=Be,hi=Be,on=Be,pi=Be,Ei=Be;if(an()){_r(()=>{Oe.apps.forEach(n=>n._read())},n=>{Oe.apps.forEach(i=>i._write(n))});const e=()=>{document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:an,create:Rt,destroy:Yt,parse:fi,find:hi,registerPlugin:on,setOptions:Ei}})),document.removeEventListener("DOMContentLoaded",e)};document.readyState!=="loading"?setTimeout(()=>e(),0):document.addEventListener("DOMContentLoaded",e);const t=()=>H(Ot(),(n,i)=>{Mt[n]=i[1]});Mt={},t(),Rt=(...n)=>{const i=Fl(...n);return i.on("destroy",Yt),Oe.apps.push(i),di(i)},Yt=n=>{const i=Oe.apps.findIndex(s=>s.isAttachedTo(n));return i>=0?(Oe.apps.splice(i,1)[0].restoreElement(),!0):!1},fi=n=>Array.from(n.querySelectorAll(`.${Jl}`)).filter(r=>!Oe.apps.find(a=>a.isAttachedTo(r))).map(r=>Rt(r)),hi=n=>{const i=Oe.apps.find(s=>s.isAttachedTo(n));return i?di(i):null},on=(...n)=>{n.forEach(kl),t()},pi=()=>{const n={};return H(Ot(),(i,s)=>{n[i]=s[0]}),n},Ei=n=>(J(n)&&(Oe.apps.forEach(i=>{i.setOptions(n)}),Wr(n)),pi())}/*!
 * vue-filepond v7.0.3
 * A handy FilePond adapter component for Vue
 * 
 * Copyright (c) 2022 PQINA
 * https://pqina.nl/filepond
 * 
 * Licensed under the MIT license.
 */const ec=["setOptions","on","off","onOnce","appendTo","insertAfter","insertBefore","isAttachedTo","replaceElement","restoreElement","destroy"],tc=an(),nc=e=>({string:String,boolean:Boolean,array:Array,function:Function,int:Number,serverapi:Object,object:Object})[e],gt={},zt=[],Xt=[];let ic={};const sc=(...e)=>{on(...e),zt.length=0;for(const t in Mt){if(/^on/.test(t)){zt.push(t);continue}let n=[String,nc(Mt[t])];t=="labelFileProcessingError"&&n.push(Function),gt[t]={type:n,default:void 0}}return{name:"FilePond",props:gt,render(){const t=Object.entries({id:this.id,name:this.name,type:"file",class:this.className,required:this.required,multiple:this.allowMultiple,accept:this.acceptedFileTypes,capture:this.captureMethod}).reduce((n,[i,s])=>(s!==void 0&&(n[i]=s),n),{});return wn("div",{class:{"filepond--wrapper":!0}},[wn("input",t)])},created(){this.watchers=Object.keys(gt).map(t=>this.$watch(t,n=>{this._pond[t]=n}))},mounted(){if(!tc)return;this._element=this.$el.querySelector("input");const t=zt.reduce((i,s)=>(i[s]=(...r)=>{this.$emit("input",this._pond?this._pond.getFiles():[]),this.$emit(s.substr(2),...r)},i),{}),n={};Object.keys(gt).forEach(i=>{this[i]!==void 0&&(n[i]=this[i])}),this._pond=Rt(this._element,Object.assign({},ic,t,n)),Object.keys(this._pond).filter(i=>!ec.includes(i)).forEach(i=>{this[i]=this._pond[i]}),Xt.push(this._pond)},beforeUnmount(){const{detached:t}=this.$options;if(!this.$el.offsetParent){t.call(this);return}const n=(s,r)=>{const l=((s[0]||{}).removedNodes||[])[0];!l||!l.contains(this.$el)||(r.disconnect(),t.call(this))};new MutationObserver(n).observe(document.documentElement,{childList:!0,subtree:!0})},detached(){if(this.watchers.forEach(n=>n()),!this._pond)return;this._pond.destroy();const t=Xt.indexOf(this._pond);t>=0&&Xt.splice(t,1),this._pond=null}}};/*!
 * FilePondPluginImageExifOrientation 1.0.11
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const rc=e=>/^image\/jpeg/.test(e.type),Me={JPEG:65496,APP1:65505,EXIF:1165519206,TIFF:18761,Orientation:274,Unknown:65280},ve=(e,t,n=!1)=>e.getUint16(t,n),gi=(e,t,n=!1)=>e.getUint32(t,n),ac=e=>new Promise((t,n)=>{const i=new FileReader;i.onload=function(s){const r=new DataView(s.target.result);if(ve(r,0)!==Me.JPEG){t(-1);return}const a=r.byteLength;let l=2;for(;l<a;){const o=ve(r,l);if(l+=2,o===Me.APP1){if(gi(r,l+=2)!==Me.EXIF)break;const d=ve(r,l+=6)===Me.TIFF;l+=gi(r,l+4,d);const c=ve(r,l,d);l+=2;for(let u=0;u<c;u++)if(ve(r,l+u*12,d)===Me.Orientation){t(ve(r,l+u*12+8,d));return}}else{if((o&Me.Unknown)!==Me.Unknown)break;l+=ve(r,l)}}t(-1)},i.readAsArrayBuffer(e.slice(0,64*1024))}),oc=(()=>typeof window<"u"&&typeof window.document<"u")(),lc=()=>oc,cc="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";let Is;const yt=lc()?new Image:{};yt.onload=()=>Is=yt.naturalWidth>yt.naturalHeight;yt.src=cc;const dc=()=>Is,_s=({addFilter:e,utils:t})=>{const{Type:n,isFile:i}=t;return e("DID_LOAD_ITEM",(s,{query:r})=>new Promise((a,l)=>{const o=s.file;if(!i(o)||!rc(o)||!r("GET_ALLOW_IMAGE_EXIF_ORIENTATION")||!dc())return a(s);ac(o).then(d=>{s.setMetadata("exif",{orientation:d}),a(s)})})),{options:{allowImageExifOrientation:[!0,n.BOOLEAN]}}},uc=typeof window<"u"&&typeof window.document<"u";uc&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:_s}));/*!
 * FilePondPluginImagePreview 4.6.11
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const fc=e=>/^image/.test(e.type),mi=(e,t)=>st(e.x*t,e.y*t),Ii=(e,t)=>st(e.x+t.x,e.y+t.y),hc=e=>{const t=Math.sqrt(e.x*e.x+e.y*e.y);return t===0?{x:0,y:0}:st(e.x/t,e.y/t)},mt=(e,t,n)=>{const i=Math.cos(t),s=Math.sin(t),r=st(e.x-n.x,e.y-n.y);return st(n.x+i*r.x-s*r.y,n.y+s*r.x+i*r.y)},st=(e=0,t=0)=>({x:e,y:t}),ce=(e,t,n=1,i)=>{if(typeof e=="string")return parseFloat(e)*n;if(typeof e=="number")return e*(i?t[i]:Math.min(t.width,t.height))},pc=(e,t,n)=>{const i=e.borderStyle||e.lineStyle||"solid",s=e.backgroundColor||e.fontColor||"transparent",r=e.borderColor||e.lineColor||"transparent",a=ce(e.borderWidth||e.lineWidth,t,n),l=e.lineCap||"round",o=e.lineJoin||"round",d=typeof i=="string"?"":i.map(u=>ce(u,t,n)).join(","),c=e.opacity||1;return{"stroke-linecap":l,"stroke-linejoin":o,"stroke-width":a||0,"stroke-dasharray":d,stroke:r,fill:s,opacity:c}},he=e=>e!=null,Ec=(e,t,n=1)=>{let i=ce(e.x,t,n,"width")||ce(e.left,t,n,"width"),s=ce(e.y,t,n,"height")||ce(e.top,t,n,"height"),r=ce(e.width,t,n,"width"),a=ce(e.height,t,n,"height"),l=ce(e.right,t,n,"width"),o=ce(e.bottom,t,n,"height");return he(s)||(he(a)&&he(o)?s=t.height-a-o:s=o),he(i)||(he(r)&&he(l)?i=t.width-r-l:i=l),he(r)||(he(i)&&he(l)?r=t.width-i-l:r=0),he(a)||(he(s)&&he(o)?a=t.height-s-o:a=0),{x:i||0,y:s||0,width:r||0,height:a||0}},gc=e=>e.map((t,n)=>`${n===0?"M":"L"} ${t.x} ${t.y}`).join(" "),Re=(e,t)=>Object.keys(t).forEach(n=>e.setAttribute(n,t[n])),mc="http://www.w3.org/2000/svg",He=(e,t)=>{const n=document.createElementNS(mc,e);return t&&Re(n,t),n},Ic=e=>Re(e,{...e.rect,...e.styles}),_c=e=>{const t=e.rect.x+e.rect.width*.5,n=e.rect.y+e.rect.height*.5,i=e.rect.width*.5,s=e.rect.height*.5;return Re(e,{cx:t,cy:n,rx:i,ry:s,...e.styles})},Tc={contain:"xMidYMid meet",cover:"xMidYMid slice"},Rc=(e,t)=>{Re(e,{...e.rect,...e.styles,preserveAspectRatio:Tc[t.fit]||"none"})},yc={left:"start",center:"middle",right:"end"},wc=(e,t,n,i)=>{const s=ce(t.fontSize,n,i),r=t.fontFamily||"sans-serif",a=t.fontWeight||"normal",l=yc[t.textAlign]||"start";Re(e,{...e.rect,...e.styles,"stroke-width":0,"font-weight":a,"font-size":s,"font-family":r,"text-anchor":l}),e.text!==t.text&&(e.text=t.text,e.textContent=t.text.length?t.text:" ")},Ac=(e,t,n,i)=>{Re(e,{...e.rect,...e.styles,fill:"none"});const s=e.childNodes[0],r=e.childNodes[1],a=e.childNodes[2],l=e.rect,o={x:e.rect.x+e.rect.width,y:e.rect.y+e.rect.height};if(Re(s,{x1:l.x,y1:l.y,x2:o.x,y2:o.y}),!t.lineDecoration)return;r.style.display="none",a.style.display="none";const d=hc({x:o.x-l.x,y:o.y-l.y}),c=ce(.05,n,i);if(t.lineDecoration.indexOf("arrow-begin")!==-1){const u=mi(d,c),p=Ii(l,u),f=mt(l,2,p),h=mt(l,-2,p);Re(r,{style:"display:block;",d:`M${f.x},${f.y} L${l.x},${l.y} L${h.x},${h.y}`})}if(t.lineDecoration.indexOf("arrow-end")!==-1){const u=mi(d,-c),p=Ii(o,u),f=mt(o,2,p),h=mt(o,-2,p);Re(a,{style:"display:block;",d:`M${f.x},${f.y} L${o.x},${o.y} L${h.x},${h.y}`})}},Oc=(e,t,n,i)=>{Re(e,{...e.styles,fill:"none",d:gc(t.points.map(s=>({x:ce(s.x,n,i,"width"),y:ce(s.y,n,i,"height")})))})},It=e=>t=>He(e,{id:t.id}),Sc=e=>{const t=He("image",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return t.onload=()=>{t.setAttribute("opacity",e.opacity||1)},t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.src),t},Dc=e=>{const t=He("g",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round"}),n=He("line");t.appendChild(n);const i=He("path");t.appendChild(i);const s=He("path");return t.appendChild(s),t},Mc={image:Sc,rect:It("rect"),ellipse:It("ellipse"),text:It("text"),path:It("path"),line:Dc},vc={rect:Ic,ellipse:_c,image:Rc,text:wc,path:Oc,line:Ac},Pc=(e,t)=>Mc[e](t),Lc=(e,t,n,i,s)=>{t!=="path"&&(e.rect=Ec(n,i,s)),e.styles=pc(n,i,s),vc[t](e,n,i,s)},bc=["x","y","left","top","right","bottom","width","height"],Cc=e=>typeof e=="string"&&/%/.test(e)?parseFloat(e)/100:e,Nc=e=>{const[t,n]=e,i=n.points?{}:bc.reduce((s,r)=>(s[r]=Cc(n[r]),s),{});return[t,{zIndex:0,...n,...i}]},xc=(e,t)=>e[1].zIndex>t[1].zIndex?1:e[1].zIndex<t[1].zIndex?-1:0,Gc=e=>e.utils.createView({name:"image-preview-markup",tag:"svg",ignoreRect:!0,mixins:{apis:["width","height","crop","markup","resize","dirty"]},write:({root:t,props:n})=>{if(!n.dirty)return;const{crop:i,resize:s,markup:r}=n,a=n.width,l=n.height;let o=i.width,d=i.height;if(s){const{size:f}=s;let h=f&&f.width,g=f&&f.height;const I=s.mode,_=s.upscale;h&&!g&&(g=h),g&&!h&&(h=g);const E=o<h&&d<g;if(!E||E&&_){let m=h/o,T=g/d;if(I==="force")o=h,d=g;else{let y;I==="cover"?y=Math.max(m,T):I==="contain"&&(y=Math.min(m,T)),o=o*y,d=d*y}}}const c={width:a,height:l};t.element.setAttribute("width",c.width),t.element.setAttribute("height",c.height);const u=Math.min(a/o,l/d);t.element.innerHTML="";const p=t.query("GET_IMAGE_PREVIEW_MARKUP_FILTER");r.filter(p).map(Nc).sort(xc).forEach(f=>{const[h,g]=f,I=Pc(h,g);Lc(I,h,g,c,u),t.element.appendChild(I)})}}),tt=(e,t)=>({x:e,y:t}),Bc=(e,t)=>e.x*t.x+e.y*t.y,_i=(e,t)=>tt(e.x-t.x,e.y-t.y),Fc=(e,t)=>Bc(_i(e,t),_i(e,t)),Ti=(e,t)=>Math.sqrt(Fc(e,t)),Ri=(e,t)=>{const n=e,i=1.5707963267948966,s=t,r=1.5707963267948966-t,a=Math.sin(i),l=Math.sin(s),o=Math.sin(r),d=Math.cos(r),c=n/a,u=c*l,p=c*o;return tt(d*u,d*p)},Uc=(e,t)=>{const n=e.width,i=e.height,s=Ri(n,t),r=Ri(i,t),a=tt(e.x+Math.abs(s.x),e.y-Math.abs(s.y)),l=tt(e.x+e.width+Math.abs(r.y),e.y+Math.abs(r.x)),o=tt(e.x-Math.abs(r.y),e.y+e.height-Math.abs(r.x));return{width:Ti(a,l),height:Ti(a,o)}},Vc=(e,t,n=1)=>{const i=e.height/e.width;let s=1,r=t,a=1,l=i;l>r&&(l=r,a=l/i);const o=Math.max(s/a,r/l),d=e.width/(n*o*a),c=d*t;return{width:d,height:c}},Ts=(e,t,n,i)=>{const s=i.x>.5?1-i.x:i.x,r=i.y>.5?1-i.y:i.y,a=s*2*e.width,l=r*2*e.height,o=Uc(t,n);return Math.max(o.width/a,o.height/l)},Rs=(e,t)=>{let n=e.width,i=n*t;i>e.height&&(i=e.height,n=i/t);const s=(e.width-n)*.5,r=(e.height-i)*.5;return{x:s,y:r,width:n,height:i}},$c=(e,t={})=>{let{zoom:n,rotation:i,center:s,aspectRatio:r}=t;r||(r=e.height/e.width);const a=Vc(e,r,n),l={x:a.width*.5,y:a.height*.5},o={x:0,y:0,width:a.width,height:a.height,center:l},d=typeof t.scaleToFit>"u"||t.scaleToFit,c=Ts(e,Rs(o,r),i,d?s:{x:.5,y:.5}),u=n*c;return{widthFloat:a.width/u,heightFloat:a.height/u,width:Math.round(a.width/u),height:Math.round(a.height/u)}},Te={type:"spring",stiffness:.5,damping:.45,mass:10},Hc=e=>e.utils.createView({name:"image-bitmap",ignoreRect:!0,mixins:{styles:["scaleX","scaleY"]},create:({root:t,props:n})=>{t.appendChild(n.image)}}),Wc=e=>e.utils.createView({name:"image-canvas-wrapper",tag:"div",ignoreRect:!0,mixins:{apis:["crop","width","height"],styles:["originX","originY","translateX","translateY","scaleX","scaleY","rotateZ"],animations:{originX:Te,originY:Te,scaleX:Te,scaleY:Te,translateX:Te,translateY:Te,rotateZ:Te}},create:({root:t,props:n})=>{n.width=n.image.width,n.height=n.image.height,t.ref.bitmap=t.appendChildView(t.createChildView(Hc(e),{image:n.image}))},write:({root:t,props:n})=>{const{flip:i}=n.crop,{bitmap:s}=t.ref;s.scaleX=i.horizontal?-1:1,s.scaleY=i.vertical?-1:1}}),kc=e=>e.utils.createView({name:"image-clip",tag:"div",ignoreRect:!0,mixins:{apis:["crop","markup","resize","width","height","dirty","background"],styles:["width","height","opacity"],animations:{opacity:{type:"tween",duration:250}}},didWriteView:function({root:t,props:n}){n.background&&(t.element.style.backgroundColor=n.background)},create:({root:t,props:n})=>{t.ref.image=t.appendChildView(t.createChildView(Wc(e),Object.assign({},n))),t.ref.createMarkup=()=>{t.ref.markup||(t.ref.markup=t.appendChildView(t.createChildView(Gc(e),Object.assign({},n))))},t.ref.destroyMarkup=()=>{t.ref.markup&&(t.removeChildView(t.ref.markup),t.ref.markup=null)};const i=t.query("GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR");i!==null&&(i==="grid"?t.element.dataset.transparencyIndicator=i:t.element.dataset.transparencyIndicator="color")},write:({root:t,props:n,shouldOptimize:i})=>{const{crop:s,markup:r,resize:a,dirty:l,width:o,height:d}=n;t.ref.image.crop=s;const c={x:0,y:0,width:o,height:d,center:{x:o*.5,y:d*.5}},u={width:t.ref.image.width,height:t.ref.image.height},p={x:s.center.x*u.width,y:s.center.y*u.height},f={x:c.center.x-u.width*s.center.x,y:c.center.y-u.height*s.center.y},h=Math.PI*2+s.rotation%(Math.PI*2),g=s.aspectRatio||u.height/u.width,I=typeof s.scaleToFit>"u"||s.scaleToFit,_=Ts(u,Rs(c,g),h,I?s.center:{x:.5,y:.5}),E=s.zoom*_;r&&r.length?(t.ref.createMarkup(),t.ref.markup.width=o,t.ref.markup.height=d,t.ref.markup.resize=a,t.ref.markup.dirty=l,t.ref.markup.markup=r,t.ref.markup.crop=$c(u,s)):t.ref.markup&&t.ref.destroyMarkup();const m=t.ref.image;if(i){m.originX=null,m.originY=null,m.translateX=null,m.translateY=null,m.rotateZ=null,m.scaleX=null,m.scaleY=null;return}m.originX=p.x,m.originY=p.y,m.translateX=f.x,m.translateY=f.y,m.rotateZ=h,m.scaleX=E,m.scaleY=E}}),qc=e=>e.utils.createView({name:"image-preview",tag:"div",ignoreRect:!0,mixins:{apis:["image","crop","markup","resize","dirty","background"],styles:["translateY","scaleX","scaleY","opacity"],animations:{scaleX:Te,scaleY:Te,translateY:Te,opacity:{type:"tween",duration:400}}},create:({root:t,props:n})=>{t.ref.clip=t.appendChildView(t.createChildView(kc(e),{id:n.id,image:n.image,crop:n.crop,markup:n.markup,resize:n.resize,dirty:n.dirty,background:n.background}))},write:({root:t,props:n,shouldOptimize:i})=>{const{clip:s}=t.ref,{image:r,crop:a,markup:l,resize:o,dirty:d}=n;if(s.crop=a,s.markup=l,s.resize=o,s.dirty=d,s.opacity=i?0:1,i||t.rect.element.hidden)return;const c=r.height/r.width;let u=a.aspectRatio||c;const p=t.rect.inner.width,f=t.rect.inner.height;let h=t.query("GET_IMAGE_PREVIEW_HEIGHT");const g=t.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),I=t.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),_=t.query("GET_PANEL_ASPECT_RATIO"),E=t.query("GET_ALLOW_MULTIPLE");_&&!E&&(h=p*_,u=_);let m=h!==null?h:Math.max(g,Math.min(p*u,I)),T=m/u;T>p&&(T=p,m=T*u),m>f&&(m=f,T=f/u),s.width=T,s.height=m}});let Yc=`<svg width="500" height="200" viewBox="0 0 500 200" preserveAspectRatio="none">
    <defs>
        <radialGradient id="gradient-__UID__" cx=".5" cy="1.25" r="1.15">
            <stop offset='50%' stop-color='#000000'/>
            <stop offset='56%' stop-color='#0a0a0a'/>
            <stop offset='63%' stop-color='#262626'/>
            <stop offset='69%' stop-color='#4f4f4f'/>
            <stop offset='75%' stop-color='#808080'/>
            <stop offset='81%' stop-color='#b1b1b1'/>
            <stop offset='88%' stop-color='#dadada'/>
            <stop offset='94%' stop-color='#f6f6f6'/>
            <stop offset='100%' stop-color='#ffffff'/>
        </radialGradient>
        <mask id="mask-__UID__">
            <rect x="0" y="0" width="500" height="200" fill="url(#gradient-__UID__)"></rect>
        </mask>
    </defs>
    <rect x="0" width="500" height="200" fill="currentColor" mask="url(#mask-__UID__)"></rect>
</svg>`,yi=0;const zc=e=>e.utils.createView({name:"image-preview-overlay",tag:"div",ignoreRect:!0,create:({root:t,props:n})=>{let i=Yc;if(document.querySelector("base")){const s=new URL(window.location.href.replace(window.location.hash,"")).href;i=i.replace(/url\(\#/g,"url("+s+"#")}yi++,t.element.classList.add(`filepond--image-preview-overlay-${n.status}`),t.element.innerHTML=i.replace(/__UID__/g,yi)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}}),Xc=function(){self.onmessage=e=>{createImageBitmap(e.data.message.file).then(t=>{self.postMessage({id:e.data.id,message:t},[t])})}},jc=function(){self.onmessage=e=>{const t=e.data.message.imageData,n=e.data.message.colorMatrix,i=t.data,s=i.length,r=n[0],a=n[1],l=n[2],o=n[3],d=n[4],c=n[5],u=n[6],p=n[7],f=n[8],h=n[9],g=n[10],I=n[11],_=n[12],E=n[13],m=n[14],T=n[15],y=n[16],O=n[17],P=n[18],R=n[19];let M=0,N=0,L=0,v=0,G=0;for(;M<s;M+=4)N=i[M]/255,L=i[M+1]/255,v=i[M+2]/255,G=i[M+3]/255,i[M]=Math.max(0,Math.min((N*r+L*a+v*l+G*o+d)*255,255)),i[M+1]=Math.max(0,Math.min((N*c+L*u+v*p+G*f+h)*255,255)),i[M+2]=Math.max(0,Math.min((N*g+L*I+v*_+G*E+m)*255,255)),i[M+3]=Math.max(0,Math.min((N*T+L*y+v*O+G*P+R)*255,255));self.postMessage({id:e.data.id,message:t},[t.data.buffer])}},Qc=(e,t)=>{let n=new Image;n.onload=()=>{const i=n.naturalWidth,s=n.naturalHeight;n=null,t(i,s)},n.src=e},Kc={1:()=>[1,0,0,1,0,0],2:e=>[-1,0,0,1,e,0],3:(e,t)=>[-1,0,0,-1,e,t],4:(e,t)=>[1,0,0,-1,0,t],5:()=>[0,1,1,0,0,0],6:(e,t)=>[0,1,-1,0,t,0],7:(e,t)=>[0,-1,-1,0,t,e],8:e=>[0,-1,1,0,0,e]},Zc=(e,t,n,i)=>{i!==-1&&e.transform.apply(e,Kc[i](t,n))},Jc=(e,t,n,i)=>{t=Math.round(t),n=Math.round(n);const s=document.createElement("canvas");s.width=t,s.height=n;const r=s.getContext("2d");return i>=5&&i<=8&&([t,n]=[n,t]),Zc(r,t,n,i),r.drawImage(e,0,0,t,n),s},ys=e=>/^image/.test(e.type)&&!/svg/.test(e.type),ed=10,td=10,nd=e=>{const t=Math.min(ed/e.width,td/e.height),n=document.createElement("canvas"),i=n.getContext("2d"),s=n.width=Math.ceil(e.width*t),r=n.height=Math.ceil(e.height*t);i.drawImage(e,0,0,s,r);let a=null;try{a=i.getImageData(0,0,s,r).data}catch{return null}const l=a.length;let o=0,d=0,c=0,u=0;for(;u<l;u+=4)o+=a[u]*a[u],d+=a[u+1]*a[u+1],c+=a[u+2]*a[u+2];return o=jt(o,l),d=jt(d,l),c=jt(c,l),{r:o,g:d,b:c}},jt=(e,t)=>Math.floor(Math.sqrt(e/(t/4))),id=(e,t)=>(t=t||document.createElement("canvas"),t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t),sd=e=>{let t;try{t=new ImageData(e.width,e.height)}catch{t=document.createElement("canvas").getContext("2d").createImageData(e.width,e.height)}return t.data.set(new Uint8ClampedArray(e.data)),t},rd=e=>new Promise((t,n)=>{const i=new Image;i.crossOrigin="Anonymous",i.onload=()=>{t(i)},i.onerror=s=>{n(s)},i.src=e}),ad=e=>{const t=zc(e),n=qc(e),{createWorker:i}=e.utils,s=(E,m,T)=>new Promise(y=>{E.ref.imageData||(E.ref.imageData=T.getContext("2d").getImageData(0,0,T.width,T.height));const O=sd(E.ref.imageData);if(!m||m.length!==20)return T.getContext("2d").putImageData(O,0,0),y();const P=i(jc);P.post({imageData:O,colorMatrix:m},R=>{T.getContext("2d").putImageData(R,0,0),P.terminate(),y()},[O.data.buffer])}),r=(E,m)=>{E.removeChildView(m),m.image.width=1,m.image.height=1,m._destroy()},a=({root:E})=>{const m=E.ref.images.shift();return m.opacity=0,m.translateY=-15,E.ref.imageViewBin.push(m),m},l=({root:E,props:m,image:T})=>{const y=m.id,O=E.query("GET_ITEM",{id:y});if(!O)return;const P=O.getMetadata("crop")||{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null},R=E.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR");let M,N,L=!1;E.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(M=O.getMetadata("markup")||[],N=O.getMetadata("resize"),L=!0);const v=E.appendChildView(E.createChildView(n,{id:y,image:T,crop:P,resize:N,markup:M,dirty:L,background:R,opacity:0,scaleX:1.15,scaleY:1.15,translateY:15}),E.childViews.length);E.ref.images.push(v),v.opacity=1,v.scaleX=1,v.scaleY=1,v.translateY=0,setTimeout(()=>{E.dispatch("DID_IMAGE_PREVIEW_SHOW",{id:y})},250)},o=({root:E,props:m})=>{const T=E.query("GET_ITEM",{id:m.id});if(!T)return;const y=E.ref.images[E.ref.images.length-1];y.crop=T.getMetadata("crop"),y.background=E.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),E.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(y.dirty=!0,y.resize=T.getMetadata("resize"),y.markup=T.getMetadata("markup"))},d=({root:E,props:m,action:T})=>{if(!/crop|filter|markup|resize/.test(T.change.key)||!E.ref.images.length)return;const y=E.query("GET_ITEM",{id:m.id});if(y){if(/filter/.test(T.change.key)){const O=E.ref.images[E.ref.images.length-1];s(E,T.change.value,O.image);return}if(/crop|markup|resize/.test(T.change.key)){const O=y.getMetadata("crop"),P=E.ref.images[E.ref.images.length-1];if(O&&O.aspectRatio&&P.crop&&P.crop.aspectRatio&&Math.abs(O.aspectRatio-P.crop.aspectRatio)>1e-5){const R=a({root:E});l({root:E,props:m,image:id(R.image)})}else o({root:E,props:m})}}},c=E=>{const T=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./);return(T?parseInt(T[1]):null)<=58?!1:"createImageBitmap"in window&&ys(E)},u=({root:E,props:m})=>{const{id:T}=m,y=E.query("GET_ITEM",T);if(!y)return;const O=URL.createObjectURL(y.file);Qc(O,(P,R)=>{E.dispatch("DID_IMAGE_PREVIEW_CALCULATE_SIZE",{id:T,width:P,height:R})})},p=({root:E,props:m})=>{const{id:T}=m,y=E.query("GET_ITEM",T);if(!y)return;const O=URL.createObjectURL(y.file),P=()=>{rd(O).then(R)},R=M=>{URL.revokeObjectURL(O);const L=(y.getMetadata("exif")||{}).orientation||-1;let{width:v,height:G}=M;if(!v||!G)return;L>=5&&L<=8&&([v,G]=[G,v]);const S=Math.max(1,window.devicePixelRatio*.75),w=E.query("GET_IMAGE_PREVIEW_ZOOM_FACTOR")*S,D=G/v,C=E.rect.element.width,b=E.rect.element.height;let B=C,F=B*D;D>1?(B=Math.min(v,C*w),F=B*D):(F=Math.min(G,b*w),B=F/D);const Y=Jc(M,B,F,L),K=()=>{const _e=E.query("GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR")?nd(data):null;y.setMetadata("color",_e,!0),"close"in M&&M.close(),E.ref.overlayShadow.opacity=1,l({root:E,props:m,image:Y})},z=y.getMetadata("filter");z?s(E,z,Y).then(K):K()};if(c(y.file)){const M=i(Xc);M.post({file:y.file},N=>{if(M.terminate(),!N){P();return}R(N)})}else P()},f=({root:E})=>{const m=E.ref.images[E.ref.images.length-1];m.translateY=0,m.scaleX=1,m.scaleY=1,m.opacity=1},h=({root:E})=>{E.ref.overlayShadow.opacity=1,E.ref.overlayError.opacity=0,E.ref.overlaySuccess.opacity=0},g=({root:E})=>{E.ref.overlayShadow.opacity=.25,E.ref.overlayError.opacity=1},I=({root:E})=>{E.ref.overlayShadow.opacity=.25,E.ref.overlaySuccess.opacity=1},_=({root:E})=>{E.ref.images=[],E.ref.imageData=null,E.ref.imageViewBin=[],E.ref.overlayShadow=E.appendChildView(E.createChildView(t,{opacity:0,status:"idle"})),E.ref.overlaySuccess=E.appendChildView(E.createChildView(t,{opacity:0,status:"success"})),E.ref.overlayError=E.appendChildView(E.createChildView(t,{opacity:0,status:"failure"}))};return e.utils.createView({name:"image-preview-wrapper",create:_,styles:["height"],apis:["height"],destroy:({root:E})=>{E.ref.images.forEach(m=>{m.image.width=1,m.image.height=1})},didWriteView:({root:E})=>{E.ref.images.forEach(m=>{m.dirty=!1})},write:e.utils.createRoute({DID_IMAGE_PREVIEW_DRAW:f,DID_IMAGE_PREVIEW_CONTAINER_CREATE:u,DID_FINISH_CALCULATE_PREVIEWSIZE:p,DID_UPDATE_ITEM_METADATA:d,DID_THROW_ITEM_LOAD_ERROR:g,DID_THROW_ITEM_PROCESSING_ERROR:g,DID_THROW_ITEM_INVALID:g,DID_COMPLETE_ITEM_PROCESSING:I,DID_START_ITEM_PROCESSING:h,DID_REVERT_ITEM_PROCESSING:h},({root:E})=>{const m=E.ref.imageViewBin.filter(T=>T.opacity===0);E.ref.imageViewBin=E.ref.imageViewBin.filter(T=>T.opacity>0),m.forEach(T=>r(E,T)),m.length=0})})},ws=e=>{const{addFilter:t,utils:n}=e,{Type:i,createRoute:s,isFile:r}=n,a=ad(e);return t("CREATE_VIEW",l=>{const{is:o,view:d,query:c}=l;if(!o("file")||!c("GET_ALLOW_IMAGE_PREVIEW"))return;const u=({root:I,props:_})=>{const{id:E}=_,m=c("GET_ITEM",E);if(!m||!r(m.file)||m.archived)return;const T=m.file;if(!fc(T)||!c("GET_IMAGE_PREVIEW_FILTER_ITEM")(m))return;const y="createImageBitmap"in(window||{}),O=c("GET_IMAGE_PREVIEW_MAX_FILE_SIZE");if(!y&&O&&T.size>O)return;I.ref.imagePreview=d.appendChildView(d.createChildView(a,{id:E}));const P=I.query("GET_IMAGE_PREVIEW_HEIGHT");P&&I.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:m.id,height:P});const R=!y&&T.size>c("GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE");I.dispatch("DID_IMAGE_PREVIEW_CONTAINER_CREATE",{id:E},R)},p=(I,_)=>{if(!I.ref.imagePreview)return;let{id:E}=_;const m=I.query("GET_ITEM",{id:E});if(!m)return;const T=I.query("GET_PANEL_ASPECT_RATIO"),y=I.query("GET_ITEM_PANEL_ASPECT_RATIO"),O=I.query("GET_IMAGE_PREVIEW_HEIGHT");if(T||y||O)return;let{imageWidth:P,imageHeight:R}=I.ref;if(!P||!R)return;const M=I.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),N=I.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),v=(m.getMetadata("exif")||{}).orientation||-1;if(v>=5&&v<=8&&([P,R]=[R,P]),!ys(m.file)||I.query("GET_IMAGE_PREVIEW_UPSCALE")){const C=2048/P;P*=C,R*=C}const G=R/P,S=(m.getMetadata("crop")||{}).aspectRatio||G;let x=Math.max(M,Math.min(R,N));const w=I.rect.element.width,D=Math.min(w*S,x);I.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:m.id,height:D})},f=({root:I})=>{I.ref.shouldRescale=!0},h=({root:I,action:_})=>{_.change.key==="crop"&&(I.ref.shouldRescale=!0)},g=({root:I,action:_})=>{I.ref.imageWidth=_.width,I.ref.imageHeight=_.height,I.ref.shouldRescale=!0,I.ref.shouldDrawPreview=!0,I.dispatch("KICK")};d.registerWriter(s({DID_RESIZE_ROOT:f,DID_STOP_RESIZE:f,DID_LOAD_ITEM:u,DID_IMAGE_PREVIEW_CALCULATE_SIZE:g,DID_UPDATE_ITEM_METADATA:h},({root:I,props:_})=>{I.ref.imagePreview&&(I.rect.element.hidden||(I.ref.shouldRescale&&(p(I,_),I.ref.shouldRescale=!1),I.ref.shouldDrawPreview&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{I.dispatch("DID_FINISH_CALCULATE_PREVIEWSIZE",{id:_.id})})}),I.ref.shouldDrawPreview=!1)))}))}),{options:{allowImagePreview:[!0,i.BOOLEAN],imagePreviewFilterItem:[()=>!0,i.FUNCTION],imagePreviewHeight:[null,i.INT],imagePreviewMinHeight:[44,i.INT],imagePreviewMaxHeight:[256,i.INT],imagePreviewMaxFileSize:[null,i.INT],imagePreviewZoomFactor:[2,i.INT],imagePreviewUpscale:[!1,i.BOOLEAN],imagePreviewMaxInstantPreviewFileSize:[1e6,i.INT],imagePreviewTransparencyIndicator:[null,i.STRING],imagePreviewCalculateAverageImageColor:[!1,i.BOOLEAN],imagePreviewMarkupShow:[!0,i.BOOLEAN],imagePreviewMarkupFilter:[()=>!0,i.FUNCTION]}}},od=typeof window<"u"&&typeof window.document<"u";od&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:ws}));/*!
 * FilePondPluginFileValidateType 1.2.8
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const As=({addFilter:e,utils:t})=>{const{Type:n,isString:i,replaceInString:s,guesstimateMimeType:r,getExtensionFromFilename:a,getFilenameFromURL:l}=t,o=(f,h)=>{const g=(/^[^/]+/.exec(f)||[]).pop(),I=h.slice(0,-2);return g===I},d=(f,h)=>f.some(g=>/\*$/.test(g)?o(h,g):g===h),c=f=>{let h="";if(i(f)){const g=l(f),I=a(g);I&&(h=r(I))}else h=f.type;return h},u=(f,h,g)=>{if(h.length===0)return!0;const I=c(f);return g?new Promise((_,E)=>{g(f,I).then(m=>{d(h,m)?_():E()}).catch(E)}):d(h,I)},p=f=>h=>f[h]===null?!1:f[h]||h;return e("SET_ATTRIBUTE_TO_OPTION_MAP",f=>Object.assign(f,{accept:"acceptedFileTypes"})),e("ALLOW_HOPPER_ITEM",(f,{query:h})=>h("GET_ALLOW_FILE_TYPE_VALIDATION")?u(f,h("GET_ACCEPTED_FILE_TYPES")):!0),e("LOAD_FILE",(f,{query:h})=>new Promise((g,I)=>{if(!h("GET_ALLOW_FILE_TYPE_VALIDATION")){g(f);return}const _=h("GET_ACCEPTED_FILE_TYPES"),E=h("GET_FILE_VALIDATE_TYPE_DETECT_TYPE"),m=u(f,_,E),T=()=>{const y=_.map(p(h("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES_MAP"))).filter(P=>P!==!1),O=y.filter(function(P,R){return y.indexOf(P)===R});I({status:{main:h("GET_LABEL_FILE_TYPE_NOT_ALLOWED"),sub:s(h("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES"),{allTypes:O.join(", "),allButLastType:O.slice(0,-1).join(", "),lastType:O[y.length-1]})}})};if(typeof m=="boolean")return m?g(f):T();m.then(()=>{g(f)}).catch(T)})),{options:{allowFileTypeValidation:[!0,n.BOOLEAN],acceptedFileTypes:[[],n.ARRAY],labelFileTypeNotAllowed:["File is of invalid type",n.STRING],fileValidateTypeLabelExpectedTypes:["Expects {allButLastType} or {lastType}",n.STRING],fileValidateTypeLabelExpectedTypesMap:[{},n.OBJECT],fileValidateTypeDetectType:[null,n.FUNCTION]}}},ld=typeof window<"u"&&typeof window.document<"u";ld&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:As}));/*!
 * FilePondPluginImageCrop 2.0.6
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const wi=e=>/^image/.test(e.type),Os=({addFilter:e,utils:t})=>{const{Type:n,isFile:i,getNumericAspectRatioFromString:s}=t,r=(d,c)=>!(!wi(d.file)||!c("GET_ALLOW_IMAGE_CROP")),a=d=>typeof d=="object",l=d=>typeof d=="number",o=(d,c)=>d.setMetadata("crop",Object.assign({},d.getMetadata("crop"),c));return e("DID_CREATE_ITEM",(d,{query:c})=>{d.extend("setImageCrop",u=>{if(!(!r(d,c)||!a(center)))return d.setMetadata("crop",u),u}),d.extend("setImageCropCenter",u=>{if(!(!r(d,c)||!a(u)))return o(d,{center:u})}),d.extend("setImageCropZoom",u=>{if(!(!r(d,c)||!l(u)))return o(d,{zoom:Math.max(1,u)})}),d.extend("setImageCropRotation",u=>{if(!(!r(d,c)||!l(u)))return o(d,{rotation:u})}),d.extend("setImageCropFlip",u=>{if(!(!r(d,c)||!a(u)))return o(d,{flip:u})}),d.extend("setImageCropAspectRatio",u=>{if(!r(d,c)||typeof u>"u")return;const p=d.getMetadata("crop"),f=s(u),h={center:{x:.5,y:.5},flip:p?Object.assign({},p.flip):{horizontal:!1,vertical:!1},rotation:0,zoom:1,aspectRatio:f};return d.setMetadata("crop",h),h})}),e("DID_LOAD_ITEM",(d,{query:c})=>new Promise((u,p)=>{const f=d.file;if(!i(f)||!wi(f)||!c("GET_ALLOW_IMAGE_CROP")||d.getMetadata("crop"))return u(d);const g=c("GET_IMAGE_CROP_ASPECT_RATIO");d.setMetadata("crop",{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},rotation:0,zoom:1,aspectRatio:g?s(g):null}),u(d)})),{options:{allowImageCrop:[!0,n.BOOLEAN],imageCropAspectRatio:[null,n.STRING]}}},cd=typeof window<"u"&&typeof window.document<"u";cd&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Os}));/*!
 * FilePondPluginImageTransform 3.8.7
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const dd=e=>/^image/.test(e.type),ud=e=>e.substr(0,e.lastIndexOf("."))||e,fd={jpeg:"jpg","svg+xml":"svg"},hd=(e,t)=>{const n=ud(e),i=t.split("/")[1],s=fd[i]||i;return`${n}.${s}`},pd=e=>/jpeg|png|svg\+xml/.test(e)?e:"image/jpeg",Ed=e=>/^image/.test(e.type),gd={1:()=>[1,0,0,1,0,0],2:e=>[-1,0,0,1,e,0],3:(e,t)=>[-1,0,0,-1,e,t],4:(e,t)=>[1,0,0,-1,0,t],5:()=>[0,1,1,0,0,0],6:(e,t)=>[0,1,-1,0,t,0],7:(e,t)=>[0,-1,-1,0,t,e],8:e=>[0,-1,1,0,0,e]},md=(e,t,n)=>(n===-1&&(n=1),gd[n](e,t)),nt=(e,t)=>({x:e,y:t}),Id=(e,t)=>e.x*t.x+e.y*t.y,Ai=(e,t)=>nt(e.x-t.x,e.y-t.y),_d=(e,t)=>Id(Ai(e,t),Ai(e,t)),Oi=(e,t)=>Math.sqrt(_d(e,t)),Si=(e,t)=>{const n=e,i=1.5707963267948966,s=t,r=1.5707963267948966-t,a=Math.sin(i),l=Math.sin(s),o=Math.sin(r),d=Math.cos(r),c=n/a,u=c*l,p=c*o;return nt(d*u,d*p)},Td=(e,t)=>{const n=e.width,i=e.height,s=Si(n,t),r=Si(i,t),a=nt(e.x+Math.abs(s.x),e.y-Math.abs(s.y)),l=nt(e.x+e.width+Math.abs(r.y),e.y+Math.abs(r.x)),o=nt(e.x-Math.abs(r.y),e.y+e.height-Math.abs(r.x));return{width:Oi(a,l),height:Oi(a,o)}},Ss=(e,t,n=0,i={x:.5,y:.5})=>{const s=i.x>.5?1-i.x:i.x,r=i.y>.5?1-i.y:i.y,a=s*2*e.width,l=r*2*e.height,o=Td(t,n);return Math.max(o.width/a,o.height/l)},Ds=(e,t)=>{let n=e.width,i=n*t;i>e.height&&(i=e.height,n=i/t);const s=(e.width-n)*.5,r=(e.height-i)*.5;return{x:s,y:r,width:n,height:i}},Di=(e,t,n=1)=>{const i=e.height/e.width;let s=1,r=t,a=1,l=i;l>r&&(l=r,a=l/i);const o=Math.max(s/a,r/l),d=e.width/(n*o*a),c=d*t;return{width:d,height:c}},Ms=e=>{e.width=1,e.height=1,e.getContext("2d").clearRect(0,0,1,1)},Mi=e=>e&&(e.horizontal||e.vertical),Rd=(e,t,n)=>{if(t<=1&&!Mi(n))return e.width=e.naturalWidth,e.height=e.naturalHeight,e;const i=document.createElement("canvas"),s=e.naturalWidth,r=e.naturalHeight,a=t>=5&&t<=8;a?(i.width=r,i.height=s):(i.width=s,i.height=r);const l=i.getContext("2d");if(t&&l.transform.apply(l,md(s,r,t)),Mi(n)){const o=[1,0,0,1,0,0];(!a&&n.horizontal||a&n.vertical)&&(o[0]=-1,o[4]=s),(!a&&n.vertical||a&&n.horizontal)&&(o[3]=-1,o[5]=r),l.transform(...o)}return l.drawImage(e,0,0,s,r),i},yd=(e,t,n={},i={})=>{const{canvasMemoryLimit:s,background:r=null}=i,a=n.zoom||1,l=Rd(e,t,n.flip),o={width:l.width,height:l.height},d=n.aspectRatio||o.height/o.width;let c=Di(o,d,a);if(s){const m=c.width*c.height;if(m>s){const T=Math.sqrt(s)/Math.sqrt(m);o.width=Math.floor(o.width*T),o.height=Math.floor(o.height*T),c=Di(o,d,a)}}const u=document.createElement("canvas"),p={x:c.width*.5,y:c.height*.5},f={x:0,y:0,width:c.width,height:c.height,center:p},h=typeof n.scaleToFit>"u"||n.scaleToFit,g=a*Ss(o,Ds(f,d),n.rotation,h?n.center:{x:.5,y:.5});u.width=Math.round(c.width/g),u.height=Math.round(c.height/g),p.x/=g,p.y/=g;const I={x:p.x-o.width*(n.center?n.center.x:.5),y:p.y-o.height*(n.center?n.center.y:.5)},_=u.getContext("2d");r&&(_.fillStyle=r,_.fillRect(0,0,u.width,u.height)),_.translate(p.x,p.y),_.rotate(n.rotation||0),_.drawImage(l,I.x-p.x,I.y-p.y,o.width,o.height);const E=_.getImageData(0,0,u.width,u.height);return Ms(u),E},wd=(()=>typeof window<"u"&&typeof window.document<"u")();wd&&(HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){var i=this.toDataURL(t,n).split(",")[1];setTimeout(function(){for(var s=atob(i),r=s.length,a=new Uint8Array(r),l=0;l<r;l++)a[l]=s.charCodeAt(l);e(new Blob([a],{type:t||"image/png"}))})}}));const Ad=(e,t,n=null)=>new Promise(i=>{const s=n?n(e):e;Promise.resolve(s).then(r=>{r.toBlob(i,t.type,t.quality)})}),vt=(e,t)=>rt(e.x*t,e.y*t),Pt=(e,t)=>rt(e.x+t.x,e.y+t.y),vs=e=>{const t=Math.sqrt(e.x*e.x+e.y*e.y);return t===0?{x:0,y:0}:rt(e.x/t,e.y/t)},Se=(e,t,n)=>{const i=Math.cos(t),s=Math.sin(t),r=rt(e.x-n.x,e.y-n.y);return rt(n.x+i*r.x-s*r.y,n.y+s*r.x+i*r.y)},rt=(e=0,t=0)=>({x:e,y:t}),ne=(e,t,n=1,i)=>{if(typeof e=="string")return parseFloat(e)*n;if(typeof e=="number")return e*(i?t[i]:Math.min(t.width,t.height))},Fe=(e,t,n)=>{const i=e.borderStyle||e.lineStyle||"solid",s=e.backgroundColor||e.fontColor||"transparent",r=e.borderColor||e.lineColor||"transparent",a=ne(e.borderWidth||e.lineWidth,t,n),l=e.lineCap||"round",o=e.lineJoin||"round",d=typeof i=="string"?"":i.map(u=>ne(u,t,n)).join(","),c=e.opacity||1;return{"stroke-linecap":l,"stroke-linejoin":o,"stroke-width":a||0,"stroke-dasharray":d,stroke:r,fill:s,opacity:c}},pe=e=>e!=null,Xe=(e,t,n=1)=>{let i=ne(e.x,t,n,"width")||ne(e.left,t,n,"width"),s=ne(e.y,t,n,"height")||ne(e.top,t,n,"height"),r=ne(e.width,t,n,"width"),a=ne(e.height,t,n,"height"),l=ne(e.right,t,n,"width"),o=ne(e.bottom,t,n,"height");return pe(s)||(pe(a)&&pe(o)?s=t.height-a-o:s=o),pe(i)||(pe(r)&&pe(l)?i=t.width-r-l:i=l),pe(r)||(pe(i)&&pe(l)?r=t.width-i-l:r=0),pe(a)||(pe(s)&&pe(o)?a=t.height-s-o:a=0),{x:i||0,y:s||0,width:r||0,height:a||0}},Od=e=>e.map((t,n)=>`${n===0?"M":"L"} ${t.x} ${t.y}`).join(" "),ye=(e,t)=>Object.keys(t).forEach(n=>e.setAttribute(n,t[n])),Sd="http://www.w3.org/2000/svg",We=(e,t)=>{const n=document.createElementNS(Sd,e);return t&&ye(n,t),n},Dd=e=>ye(e,{...e.rect,...e.styles}),Md=e=>{const t=e.rect.x+e.rect.width*.5,n=e.rect.y+e.rect.height*.5,i=e.rect.width*.5,s=e.rect.height*.5;return ye(e,{cx:t,cy:n,rx:i,ry:s,...e.styles})},vd={contain:"xMidYMid meet",cover:"xMidYMid slice"},Pd=(e,t)=>{ye(e,{...e.rect,...e.styles,preserveAspectRatio:vd[t.fit]||"none"})},Ld={left:"start",center:"middle",right:"end"},bd=(e,t,n,i)=>{const s=ne(t.fontSize,n,i),r=t.fontFamily||"sans-serif",a=t.fontWeight||"normal",l=Ld[t.textAlign]||"start";ye(e,{...e.rect,...e.styles,"stroke-width":0,"font-weight":a,"font-size":s,"font-family":r,"text-anchor":l}),e.text!==t.text&&(e.text=t.text,e.textContent=t.text.length?t.text:" ")},Cd=(e,t,n,i)=>{ye(e,{...e.rect,...e.styles,fill:"none"});const s=e.childNodes[0],r=e.childNodes[1],a=e.childNodes[2],l=e.rect,o={x:e.rect.x+e.rect.width,y:e.rect.y+e.rect.height};if(ye(s,{x1:l.x,y1:l.y,x2:o.x,y2:o.y}),!t.lineDecoration)return;r.style.display="none",a.style.display="none";const d=vs({x:o.x-l.x,y:o.y-l.y}),c=ne(.05,n,i);if(t.lineDecoration.indexOf("arrow-begin")!==-1){const u=vt(d,c),p=Pt(l,u),f=Se(l,2,p),h=Se(l,-2,p);ye(r,{style:"display:block;",d:`M${f.x},${f.y} L${l.x},${l.y} L${h.x},${h.y}`})}if(t.lineDecoration.indexOf("arrow-end")!==-1){const u=vt(d,-c),p=Pt(o,u),f=Se(o,2,p),h=Se(o,-2,p);ye(a,{style:"display:block;",d:`M${f.x},${f.y} L${o.x},${o.y} L${h.x},${h.y}`})}},Nd=(e,t,n,i)=>{ye(e,{...e.styles,fill:"none",d:Od(t.points.map(s=>({x:ne(s.x,n,i,"width"),y:ne(s.y,n,i,"height")})))})},_t=e=>t=>We(e,{id:t.id}),xd=e=>{const t=We("image",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return t.onload=()=>{t.setAttribute("opacity",e.opacity||1)},t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.src),t},Gd=e=>{const t=We("g",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round"}),n=We("line");t.appendChild(n);const i=We("path");t.appendChild(i);const s=We("path");return t.appendChild(s),t},Bd={image:xd,rect:_t("rect"),ellipse:_t("ellipse"),text:_t("text"),path:_t("path"),line:Gd},Fd={rect:Dd,ellipse:Md,image:Pd,text:bd,path:Nd,line:Cd},Ud=(e,t)=>Bd[e](t),Vd=(e,t,n,i,s)=>{t!=="path"&&(e.rect=Xe(n,i,s)),e.styles=Fe(n,i,s),Fd[t](e,n,i,s)},Ps=(e,t)=>e[1].zIndex>t[1].zIndex?1:e[1].zIndex<t[1].zIndex?-1:0,$d=(e,t={},n,i)=>new Promise(s=>{const{background:r=null}=i,a=new FileReader;a.onloadend=()=>{const l=a.result,o=document.createElement("div");o.style.cssText="position:absolute;pointer-events:none;width:0;height:0;visibility:hidden;",o.innerHTML=l;const d=o.querySelector("svg");document.body.appendChild(o);const c=d.getBBox();o.parentNode.removeChild(o);const u=o.querySelector("title"),p=d.getAttribute("viewBox")||"",f=d.getAttribute("width")||"",h=d.getAttribute("height")||"";let g=parseFloat(f)||null,I=parseFloat(h)||null;const _=(f.match(/[a-z]+/)||[])[0]||"",E=(h.match(/[a-z]+/)||[])[0]||"",m=p.split(" ").map(parseFloat),T=m.length?{x:m[0],y:m[1],width:m[2],height:m[3]}:c;let y=g??T.width,O=I??T.height;d.style.overflow="visible",d.setAttribute("width",y),d.setAttribute("height",O);let P="";if(n&&n.length){const z={width:y,height:O};P=n.sort(Ps).reduce((_e,U)=>{const $=Ud(U[0],U[1]);return Vd($,U[0],U[1],z),$.removeAttribute("id"),$.getAttribute("opacity")===1&&$.removeAttribute("opacity"),_e+`
`+$.outerHTML+`
`},""),P=`

<g>${P.replace(/&nbsp;/g," ")}</g>

`}const R=t.aspectRatio||O/y,M=y,N=M*R,L=typeof t.scaleToFit>"u"||t.scaleToFit,v=t.center?t.center.x:.5,G=t.center?t.center.y:.5,S=Ss({width:y,height:O},Ds({width:M,height:N},R),t.rotation,L?{x:v,y:G}:{x:.5,y:.5}),x=t.zoom*S,w=t.rotation*(180/Math.PI),D={x:M*.5,y:N*.5},C={x:D.x-y*v,y:D.y-O*G},b=[`rotate(${w} ${D.x} ${D.y})`,`translate(${D.x} ${D.y})`,`scale(${x})`,`translate(${-D.x} ${-D.y})`,`translate(${C.x} ${C.y})`],B=t.flip&&t.flip.horizontal,F=t.flip&&t.flip.vertical,Y=[`scale(${B?-1:1} ${F?-1:1})`,`translate(${B?-y:0} ${F?-O:0})`],K=`<?xml version="1.0" encoding="UTF-8"?>
<svg width="${M}${_}" height="${N}${E}" 
viewBox="0 0 ${M} ${N}" ${r?'style="background:'+r+'" ':""}
preserveAspectRatio="xMinYMin"
xmlns:xlink="http://www.w3.org/1999/xlink"
xmlns="http://www.w3.org/2000/svg">
<!-- Generated by PQINA - https://pqina.nl/ -->
<title>${u?u.textContent:""}</title>
<g transform="${b.join(" ")}">
<g transform="${Y.join(" ")}">
${d.outerHTML}${P}
</g>
</g>
</svg>`;s(K)},a.readAsText(e)}),Hd=e=>{let t;try{t=new ImageData(e.width,e.height)}catch{t=document.createElement("canvas").getContext("2d").createImageData(e.width,e.height)}return t.data.set(e.data),t},Wd=()=>{const e={resize:c,filter:d},t=(u,p)=>(u.forEach(f=>{p=e[f.type](p,f.data)}),p),n=(u,p)=>{let f=u.transforms,h=null;if(f.forEach(g=>{g.type==="filter"&&(h=g)}),h){let g=null;f.forEach(I=>{I.type==="resize"&&(g=I)}),g&&(g.data.matrix=h.data,f=f.filter(I=>I.type!=="filter"))}p(t(f,u.imageData))};self.onmessage=u=>{n(u.data.message,p=>{self.postMessage({id:u.data.id,message:p},[p.data.buffer])})};const i=1,s=1,r=1;function a(u,p,f){const h=p[u]/255,g=p[u+1]/255,I=p[u+2]/255,_=p[u+3]/255,E=h*f[0]+g*f[1]+I*f[2]+_*f[3]+f[4],m=h*f[5]+g*f[6]+I*f[7]+_*f[8]+f[9],T=h*f[10]+g*f[11]+I*f[12]+_*f[13]+f[14],y=h*f[15]+g*f[16]+I*f[17]+_*f[18]+f[19],O=Math.max(0,E*y)+i*(1-y),P=Math.max(0,m*y)+s*(1-y),R=Math.max(0,T*y)+r*(1-y);p[u]=Math.max(0,Math.min(1,O))*255,p[u+1]=Math.max(0,Math.min(1,P))*255,p[u+2]=Math.max(0,Math.min(1,R))*255}const l=self.JSON.stringify([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]);function o(u){return self.JSON.stringify(u||[])===l}function d(u,p){if(!p||o(p))return u;const f=u.data,h=f.length,g=p[0],I=p[1],_=p[2],E=p[3],m=p[4],T=p[5],y=p[6],O=p[7],P=p[8],R=p[9],M=p[10],N=p[11],L=p[12],v=p[13],G=p[14],S=p[15],x=p[16],w=p[17],D=p[18],C=p[19];let b=0,B=0,F=0,Y=0,K=0,z=0,_e=0,U=0,$=0,X=0,ee=0,W=0;for(;b<h;b+=4)B=f[b]/255,F=f[b+1]/255,Y=f[b+2]/255,K=f[b+3]/255,z=B*g+F*I+Y*_+K*E+m,_e=B*T+F*y+Y*O+K*P+R,U=B*M+F*N+Y*L+K*v+G,$=B*S+F*x+Y*w+K*D+C,X=Math.max(0,z*$)+i*(1-$),ee=Math.max(0,_e*$)+s*(1-$),W=Math.max(0,U*$)+r*(1-$),f[b]=Math.max(0,Math.min(1,X))*255,f[b+1]=Math.max(0,Math.min(1,ee))*255,f[b+2]=Math.max(0,Math.min(1,W))*255;return u}function c(u,p){let{mode:f="contain",upscale:h=!1,width:g,height:I,matrix:_}=p;if(_=!_||o(_)?null:_,!g&&!I)return d(u,_);if(g===null?g=I:I===null&&(I=g),f!=="force"){let v=g/u.width,G=I/u.height,S=1;if(f==="cover"?S=Math.max(v,G):f==="contain"&&(S=Math.min(v,G)),S>1&&h===!1)return d(u,_);g=u.width*S,I=u.height*S}const E=u.width,m=u.height,T=Math.round(g),y=Math.round(I),O=u.data,P=new Uint8ClampedArray(T*y*4),R=E/T,M=m/y,N=Math.ceil(R*.5),L=Math.ceil(M*.5);for(let v=0;v<y;v++)for(let G=0;G<T;G++){let S=(G+v*T)*4,x=0,w=0,D=0,C=0,b=0,B=0,F=0,Y=(v+.5)*M;for(let K=Math.floor(v*M);K<(v+1)*M;K++){let z=Math.abs(Y-(K+.5))/L,_e=(G+.5)*R,U=z*z;for(let $=Math.floor(G*R);$<(G+1)*R;$++){let X=Math.abs(_e-($+.5))/N,ee=Math.sqrt(U+X*X);if(ee>=-1&&ee<=1&&(x=2*ee*ee*ee-3*ee*ee+1,x>0)){X=4*($+K*E);let W=O[X+3];F+=x*W,D+=x,W<255&&(x=x*W/250),C+=x*O[X],b+=x*O[X+1],B+=x*O[X+2],w+=x}}}P[S]=C/w,P[S+1]=b/w,P[S+2]=B/w,P[S+3]=F/D,_&&a(S,P,_)}return{data:P,width:T,height:y}}},kd=(e,t)=>{if(e.getUint32(t+4,!1)!==1165519206)return;t+=4;const n=e.getUint16(t+=6,!1)===18761;t+=e.getUint32(t+4,n);const i=e.getUint16(t,n);t+=2;for(let s=0;s<i;s++)if(e.getUint16(t+s*12,n)===274)return e.setUint16(t+s*12+8,1,n),!0;return!1},qd=e=>{const t=new DataView(e);if(t.getUint16(0)!==65496)return null;let n=2,i,s,r=!1;for(;n<t.byteLength&&(i=t.getUint16(n,!1),s=t.getUint16(n+2,!1)+2,!(!(i>=65504&&i<=65519||i===65534)||(r||(r=kd(t,n)),n+s>t.byteLength)));)n+=s;return e.slice(0,n)},Yd=e=>new Promise(t=>{const n=new FileReader;n.onload=()=>t(qd(n.result)||null),n.readAsArrayBuffer(e.slice(0,256*1024))}),zd=()=>window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,Xd=(e,t)=>{const n=zd();if(n){const i=new n;return i.append(e),i.getBlob(t)}return new Blob([e],{type:t})},jd=()=>Math.random().toString(36).substr(2,9),Qd=e=>{const t=new Blob(["(",e.toString(),")()"],{type:"application/javascript"}),n=URL.createObjectURL(t),i=new Worker(n),s=[];return{transfer:()=>{},post:(r,a,l)=>{const o=jd();s[o]=a,i.onmessage=d=>{const c=s[d.data.id];c&&(c(d.data.message),delete s[d.data.id])},i.postMessage({id:o,message:r},l)},terminate:()=>{i.terminate(),URL.revokeObjectURL(n)}}},Kd=e=>new Promise((t,n)=>{const i=new Image;i.onload=()=>{t(i)},i.onerror=s=>{n(s)},i.src=e}),Zd=e=>e.reduce((t,n)=>t.then(i=>n().then(Array.prototype.concat.bind(i))),Promise.resolve([])),Jd=(e,t)=>new Promise(n=>{const i={width:e.width,height:e.height},s=e.getContext("2d"),r=t.sort(Ps).map(a=>()=>new Promise(l=>{au[a[0]](s,i,a[1],l)&&l()}));Zd(r).then(()=>n(e))}),je=(e,t)=>{e.beginPath(),e.lineCap=t["stroke-linecap"],e.lineJoin=t["stroke-linejoin"],e.lineWidth=t["stroke-width"],t["stroke-dasharray"].length&&e.setLineDash(t["stroke-dasharray"].split(",")),e.fillStyle=t.fill,e.strokeStyle=t.stroke,e.globalAlpha=t.opacity||1},Qe=e=>{e.fill(),e.stroke(),e.globalAlpha=1},eu=(e,t,n)=>{const i=Xe(n,t),s=Fe(n,t);return je(e,s),e.rect(i.x,i.y,i.width,i.height),Qe(e),!0},tu=(e,t,n)=>{const i=Xe(n,t),s=Fe(n,t);je(e,s);const r=i.x,a=i.y,l=i.width,o=i.height,d=.5522848,c=l/2*d,u=o/2*d,p=r+l,f=a+o,h=r+l/2,g=a+o/2;return e.moveTo(r,g),e.bezierCurveTo(r,g-u,h-c,a,h,a),e.bezierCurveTo(h+c,a,p,g-u,p,g),e.bezierCurveTo(p,g+u,h+c,f,h,f),e.bezierCurveTo(h-c,f,r,g+u,r,g),Qe(e),!0},nu=(e,t,n,i)=>{const s=Xe(n,t),r=Fe(n,t);je(e,r);const a=new Image;new URL(n.src,window.location.href).origin!==window.location.origin&&(a.crossOrigin=""),a.onload=()=>{if(n.fit==="cover"){const o=s.width/s.height,d=o>1?a.width:a.height*o,c=o>1?a.width/o:a.height,u=a.width*.5-d*.5,p=a.height*.5-c*.5;e.drawImage(a,u,p,d,c,s.x,s.y,s.width,s.height)}else if(n.fit==="contain"){const o=Math.min(s.width/a.width,s.height/a.height),d=o*a.width,c=o*a.height,u=s.x+s.width*.5-d*.5,p=s.y+s.height*.5-c*.5;e.drawImage(a,0,0,a.width,a.height,u,p,d,c)}else e.drawImage(a,0,0,a.width,a.height,s.x,s.y,s.width,s.height);Qe(e),i()},a.src=n.src},iu=(e,t,n)=>{const i=Xe(n,t),s=Fe(n,t);je(e,s);const r=ne(n.fontSize,t),a=n.fontFamily||"sans-serif",l=n.fontWeight||"normal",o=n.textAlign||"left";return e.font=`${l} ${r}px ${a}`,e.textAlign=o,e.fillText(n.text,i.x,i.y),Qe(e),!0},su=(e,t,n)=>{const i=Fe(n,t);je(e,i),e.beginPath();const s=n.points.map(a=>({x:ne(a.x,t,1,"width"),y:ne(a.y,t,1,"height")}));e.moveTo(s[0].x,s[0].y);const r=s.length;for(let a=1;a<r;a++)e.lineTo(s[a].x,s[a].y);return Qe(e),!0},ru=(e,t,n)=>{const i=Xe(n,t),s=Fe(n,t);je(e,s),e.beginPath();const r={x:i.x,y:i.y},a={x:i.x+i.width,y:i.y+i.height};e.moveTo(r.x,r.y),e.lineTo(a.x,a.y);const l=vs({x:a.x-r.x,y:a.y-r.y}),o=.04*Math.min(t.width,t.height);if(n.lineDecoration.indexOf("arrow-begin")!==-1){const d=vt(l,o),c=Pt(r,d),u=Se(r,2,c),p=Se(r,-2,c);e.moveTo(u.x,u.y),e.lineTo(r.x,r.y),e.lineTo(p.x,p.y)}if(n.lineDecoration.indexOf("arrow-end")!==-1){const d=vt(l,-o),c=Pt(a,d),u=Se(a,2,c),p=Se(a,-2,c);e.moveTo(u.x,u.y),e.lineTo(a.x,a.y),e.lineTo(p.x,p.y)}return Qe(e),!0},au={rect:eu,ellipse:tu,image:nu,text:iu,line:ru,path:su},ou=e=>{const t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").putImageData(e,0,0),t},lu=(e,t,n={})=>new Promise((i,s)=>{if(!e||!Ed(e))return s({status:"not an image file",file:e});const{stripImageHead:r,beforeCreateBlob:a,afterCreateBlob:l,canvasMemoryLimit:o}=n,{crop:d,size:c,filter:u,markup:p,output:f}=t,h=t.image&&t.image.orientation?Math.max(1,Math.min(8,t.image.orientation)):null,g=f&&f.quality,I=g===null?null:g/100,_=f&&f.type||null,E=f&&f.background||null,m=[];c&&(typeof c.width=="number"||typeof c.height=="number")&&m.push({type:"resize",data:c}),u&&u.length===20&&m.push({type:"filter",data:u});const T=P=>{const R=l?l(P):P;Promise.resolve(R).then(i)},y=(P,R)=>{const M=ou(P),N=p.length?Jd(M,p):M;Promise.resolve(N).then(L=>{Ad(L,R,a).then(v=>{if(Ms(L),r)return T(v);Yd(e).then(G=>{G!==null&&(v=new Blob([G,v.slice(20)],{type:v.type})),T(v)})}).catch(s)})};if(/svg/.test(e.type)&&_===null)return $d(e,d,p,{background:E}).then(P=>{i(Xd(P,"image/svg+xml"))});const O=URL.createObjectURL(e);Kd(O).then(P=>{URL.revokeObjectURL(O);const R=yd(P,h,d,{canvasMemoryLimit:o,background:E}),M={quality:I,type:_||e.type};if(!m.length)return y(R,M);const N=Qd(Wd);N.post({transforms:m,imageData:R},L=>{y(Hd(L),M),N.terminate()},[R.data.buffer])}).catch(s)}),cu=["x","y","left","top","right","bottom","width","height"],du=e=>typeof e=="string"&&/%/.test(e)?parseFloat(e)/100:e,uu=e=>{const[t,n]=e,i=n.points?{}:cu.reduce((s,r)=>(s[r]=du(n[r]),s),{});return[t,{zIndex:0,...n,...i}]},fu=e=>new Promise((t,n)=>{const i=new Image;i.src=URL.createObjectURL(e);const s=()=>{const a=i.naturalWidth,l=i.naturalHeight;a&&l&&(URL.revokeObjectURL(i.src),clearInterval(r),t({width:a,height:l}))};i.onerror=a=>{URL.revokeObjectURL(i.src),clearInterval(r),n(a)};const r=setInterval(s,1);s()});typeof window<"u"&&typeof window.document<"u"&&(HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){const i=this;setTimeout(()=>{const s=i.toDataURL(t,n).split(",")[1],r=atob(s);let a=r.length;const l=new Uint8Array(a);for(;a--;)l[a]=r.charCodeAt(a);e(new Blob([l],{type:t||"image/png"}))})}}));const yn=typeof window<"u"&&typeof window.document<"u",hu=yn&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Ls=({addFilter:e,utils:t})=>{const{Type:n,forin:i,getFileFromBlob:s,isFile:r}=t,a=["crop","resize","filter","markup","output"],l=c=>(u,p,f)=>u(p,c?c(f):f),o=c=>c.aspectRatio===null&&c.rotation===0&&c.zoom===1&&c.center&&c.center.x===.5&&c.center.y===.5&&c.flip&&c.flip.horizontal===!1&&c.flip.vertical===!1;e("SHOULD_PREPARE_OUTPUT",(c,{query:u})=>new Promise(p=>{p(!u("IS_ASYNC"))}));const d=(c,u,p)=>new Promise(f=>{if(!c("GET_ALLOW_IMAGE_TRANSFORM")||p.archived||!r(u)||!dd(u))return f(!1);fu(u).then(()=>{const h=c("GET_IMAGE_TRANSFORM_IMAGE_FILTER");if(h){const g=h(u);if(g==null)return handleRevert(!0);if(typeof g=="boolean")return f(g);if(typeof g.then=="function")return g.then(f)}f(!0)}).catch(h=>{f(!1)})});return e("DID_CREATE_ITEM",(c,{query:u,dispatch:p})=>{u("GET_ALLOW_IMAGE_TRANSFORM")&&c.extend("requestPrepare",()=>new Promise((f,h)=>{p("REQUEST_PREPARE_OUTPUT",{query:c.id,item:c,success:f,failure:h},!0)}))}),e("PREPARE_OUTPUT",(c,{query:u,item:p})=>new Promise(f=>{d(u,c,p).then(h=>{if(!h)return f(c);const g=[];u("GET_IMAGE_TRANSFORM_VARIANTS_INCLUDE_ORIGINAL")&&g.push(()=>new Promise(R=>{R({name:u("GET_IMAGE_TRANSFORM_VARIANTS_ORIGINAL_NAME"),file:c})})),u("GET_IMAGE_TRANSFORM_VARIANTS_INCLUDE_DEFAULT")&&g.push((R,M,N)=>new Promise(L=>{R(M,N).then(v=>L({name:u("GET_IMAGE_TRANSFORM_VARIANTS_DEFAULT_NAME"),file:v}))}));const I=u("GET_IMAGE_TRANSFORM_VARIANTS")||{};i(I,(R,M)=>{const N=l(M);g.push((L,v,G)=>new Promise(S=>{N(L,v,G).then(x=>S({name:R,file:x}))}))});const _=u("GET_IMAGE_TRANSFORM_OUTPUT_QUALITY"),E=u("GET_IMAGE_TRANSFORM_OUTPUT_QUALITY_MODE"),m=_===null?null:_/100,T=u("GET_IMAGE_TRANSFORM_OUTPUT_MIME_TYPE"),y=u("GET_IMAGE_TRANSFORM_CLIENT_TRANSFORMS")||a;p.setMetadata("output",{type:T,quality:m,client:y},!0);const O=(R,M)=>new Promise((N,L)=>{const v={...M};Object.keys(v).filter(F=>F!=="exif").forEach(F=>{y.indexOf(F)===-1&&delete v[F]});const{resize:G,exif:S,output:x,crop:w,filter:D,markup:C}=v,b={image:{orientation:S?S.orientation:null},output:x&&(x.type||typeof x.quality=="number"||x.background)?{type:x.type,quality:typeof x.quality=="number"?x.quality*100:null,background:x.background||u("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR")||null}:void 0,size:G&&(G.size.width||G.size.height)?{mode:G.mode,upscale:G.upscale,...G.size}:void 0,crop:w&&!o(w)?{...w}:void 0,markup:C&&C.length?C.map(uu):[],filter:D};if(b.output){const F=x.type?x.type!==R.type:!1,Y=/\/jpe?g$/.test(R.type),K=x.quality!==null?Y&&E==="always":!1;if(!!!(b.size||b.crop||b.filter||F||K))return N(R)}const B={beforeCreateBlob:u("GET_IMAGE_TRANSFORM_BEFORE_CREATE_BLOB"),afterCreateBlob:u("GET_IMAGE_TRANSFORM_AFTER_CREATE_BLOB"),canvasMemoryLimit:u("GET_IMAGE_TRANSFORM_CANVAS_MEMORY_LIMIT"),stripImageHead:u("GET_IMAGE_TRANSFORM_OUTPUT_STRIP_IMAGE_HEAD")};lu(R,b,B).then(F=>{const Y=s(F,hd(R.name,pd(F.type)));N(Y)}).catch(L)}),P=g.map(R=>R(O,c,p.getMetadata()));Promise.all(P).then(R=>{f(R.length===1&&R[0].name===null?R[0].file:R)})})})),{options:{allowImageTransform:[!0,n.BOOLEAN],imageTransformImageFilter:[null,n.FUNCTION],imageTransformOutputMimeType:[null,n.STRING],imageTransformOutputQuality:[null,n.INT],imageTransformOutputStripImageHead:[!0,n.BOOLEAN],imageTransformClientTransforms:[null,n.ARRAY],imageTransformOutputQualityMode:["always",n.STRING],imageTransformVariants:[null,n.OBJECT],imageTransformVariantsIncludeDefault:[!0,n.BOOLEAN],imageTransformVariantsDefaultName:[null,n.STRING],imageTransformVariantsIncludeOriginal:[!1,n.BOOLEAN],imageTransformVariantsOriginalName:["original_",n.STRING],imageTransformBeforeCreateBlob:[null,n.FUNCTION],imageTransformAfterCreateBlob:[null,n.FUNCTION],imageTransformCanvasMemoryLimit:[yn&&hu?4096*4096:null,n.INT],imageTransformCanvasBackgroundColor:[null,n.STRING]}}};yn&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Ls}));/*!
 * FilePondPluginMediaPreview 1.0.11
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit undefined for details.
 */const ln=e=>/^video/.test(e.type),it=e=>/^audio/.test(e.type);class pu{constructor(t,n){this.mediaEl=t,this.audioElems=n,this.onplayhead=!1,this.duration=0,this.timelineWidth=this.audioElems.timeline.offsetWidth-this.audioElems.playhead.offsetWidth,this.moveplayheadFn=this.moveplayhead.bind(this),this.registerListeners()}registerListeners(){this.mediaEl.addEventListener("timeupdate",this.timeUpdate.bind(this),!1),this.mediaEl.addEventListener("canplaythrough",()=>this.duration=this.mediaEl.duration,!1),this.audioElems.timeline.addEventListener("click",this.timelineClicked.bind(this),!1),this.audioElems.button.addEventListener("click",this.play.bind(this)),this.audioElems.playhead.addEventListener("mousedown",this.mouseDown.bind(this),!1),window.addEventListener("mouseup",this.mouseUp.bind(this),!1)}play(){this.mediaEl.paused?this.mediaEl.play():this.mediaEl.pause(),this.audioElems.button.classList.toggle("play"),this.audioElems.button.classList.toggle("pause")}timeUpdate(){let t=this.mediaEl.currentTime/this.duration*100;this.audioElems.playhead.style.marginLeft=t+"%",this.mediaEl.currentTime===this.duration&&(this.audioElems.button.classList.toggle("play"),this.audioElems.button.classList.toggle("pause"))}moveplayhead(t){let n=t.clientX-this.getPosition(this.audioElems.timeline);n>=0&&n<=this.timelineWidth&&(this.audioElems.playhead.style.marginLeft=n+"px"),n<0&&(this.audioElems.playhead.style.marginLeft="0px"),n>this.timelineWidth&&(this.audioElems.playhead.style.marginLeft=this.timelineWidth-4+"px")}timelineClicked(t){this.moveplayhead(t),this.mediaEl.currentTime=this.duration*this.clickPercent(t)}mouseDown(){this.onplayhead=!0,window.addEventListener("mousemove",this.moveplayheadFn,!0),this.mediaEl.removeEventListener("timeupdate",this.timeUpdate.bind(this),!1)}mouseUp(t){window.removeEventListener("mousemove",this.moveplayheadFn,!0),this.onplayhead==!0&&(this.moveplayhead(t),this.mediaEl.currentTime=this.duration*this.clickPercent(t),this.mediaEl.addEventListener("timeupdate",this.timeUpdate.bind(this),!1)),this.onplayhead=!1}clickPercent(t){return(t.clientX-this.getPosition(this.audioElems.timeline))/this.timelineWidth}getPosition(t){return t.getBoundingClientRect().left}}const Eu=e=>e.utils.createView({name:"media-preview",tag:"div",ignoreRect:!0,create:({root:t,props:n})=>{const i=t.query("GET_ITEM",{id:n.id});let s=it(i.file)?"audio":"video";if(t.ref.media=document.createElement(s),t.ref.media.setAttribute("controls",!0),t.element.appendChild(t.ref.media),it(i.file)){let r=document.createDocumentFragment();t.ref.audio=[],t.ref.audio.container=document.createElement("div"),t.ref.audio.button=document.createElement("span"),t.ref.audio.timeline=document.createElement("div"),t.ref.audio.playhead=document.createElement("div"),t.ref.audio.container.className="audioplayer",t.ref.audio.button.className="playpausebtn play",t.ref.audio.timeline.className="timeline",t.ref.audio.playhead.className="playhead",t.ref.audio.timeline.appendChild(t.ref.audio.playhead),t.ref.audio.container.appendChild(t.ref.audio.button),t.ref.audio.container.appendChild(t.ref.audio.timeline),r.appendChild(t.ref.audio.container),t.element.appendChild(r)}},write:e.utils.createRoute({DID_MEDIA_PREVIEW_LOAD:({root:t,props:n})=>{const i=t.query("GET_ITEM",{id:n.id});if(!i)return;let s=window.URL||window.webkitURL,r=new Blob([i.file],{type:i.file.type});t.ref.media.type=i.file.type,t.ref.media.src=i.file.mock&&i.file.url||s.createObjectURL(r),it(i.file)&&new pu(t.ref.media,t.ref.audio),t.ref.media.addEventListener("loadeddata",()=>{let a=75;if(ln(i.file)){let l=t.ref.media.offsetWidth,o=t.ref.media.videoWidth/l;a=t.ref.media.videoHeight/o}t.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:n.id,height:a})},!1)}})}),gu=e=>{const t=({root:i,props:s})=>{const{id:r}=s;i.query("GET_ITEM",r)&&i.dispatch("DID_MEDIA_PREVIEW_LOAD",{id:r})},n=({root:i,props:s})=>{const r=Eu(e);i.ref.media=i.appendChildView(i.createChildView(r,{id:s.id}))};return e.utils.createView({name:"media-preview-wrapper",create:n,write:e.utils.createRoute({DID_MEDIA_PREVIEW_CONTAINER_CREATE:t})})},bs=e=>{const{addFilter:t,utils:n}=e,{Type:i,createRoute:s}=n,r=gu(e);return t("CREATE_VIEW",a=>{const{is:l,view:o,query:d}=a;if(!l("file"))return;const c=({root:u,props:p})=>{const{id:f}=p,h=d("GET_ITEM",f),g=d("GET_ALLOW_VIDEO_PREVIEW"),I=d("GET_ALLOW_AUDIO_PREVIEW");!h||h.archived||(!ln(h.file)||!g)&&(!it(h.file)||!I)||(u.ref.mediaPreview=o.appendChildView(o.createChildView(r,{id:f})),u.dispatch("DID_MEDIA_PREVIEW_CONTAINER_CREATE",{id:f}))};o.registerWriter(s({DID_LOAD_ITEM:c},({root:u,props:p})=>{const{id:f}=p,h=d("GET_ITEM",f),g=u.query("GET_ALLOW_VIDEO_PREVIEW"),I=u.query("GET_ALLOW_AUDIO_PREVIEW");!h||(!ln(h.file)||!g)&&(!it(h.file)||!I)||u.rect.element.hidden}))}),{options:{allowVideoPreview:[!0,i.BOOLEAN],allowAudioPreview:[!0,i.BOOLEAN]}}},mu=typeof window<"u"&&typeof window.document<"u";mu&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:bs}));/*!
 * FilePondPluginImageResize 2.0.10
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const Iu=e=>/^image/.test(e.type),_u=(e,t)=>{let n=new Image;n.onload=()=>{const i=n.naturalWidth,s=n.naturalHeight;n=null,t({width:i,height:s})},n.onerror=()=>t(null),n.src=e},Cs=({addFilter:e,utils:t})=>{const{Type:n}=t;return e("DID_LOAD_ITEM",(i,{query:s})=>new Promise((r,a)=>{const l=i.file;if(!Iu(l)||!s("GET_ALLOW_IMAGE_RESIZE"))return r(i);const o=s("GET_IMAGE_RESIZE_MODE"),d=s("GET_IMAGE_RESIZE_TARGET_WIDTH"),c=s("GET_IMAGE_RESIZE_TARGET_HEIGHT"),u=s("GET_IMAGE_RESIZE_UPSCALE");if(d===null&&c===null)return r(i);const p=d===null?c:d,f=c===null?p:c,h=URL.createObjectURL(l);_u(h,g=>{if(URL.revokeObjectURL(h),!g)return r(i);let{width:I,height:_}=g;const E=(i.getMetadata("exif")||{}).orientation||-1;if(E>=5&&E<=8&&([I,_]=[_,I]),I===p&&_===f)return r(i);if(!u){if(o==="cover"){if(I<=p||_<=f)return r(i)}else if(I<=p&&_<=p)return r(i)}i.setMetadata("resize",{mode:o,upscale:u,size:{width:p,height:f}}),r(i)})})),{options:{allowImageResize:[!0,n.BOOLEAN],imageResizeMode:["cover",n.STRING],imageResizeUpscale:[!0,n.BOOLEAN],imageResizeTargetWidth:[null,n.INT],imageResizeTargetHeight:[null,n.INT]}}},Tu=typeof window<"u"&&typeof window.document<"u";Tu&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Cs}));const Ru={__name:"FileUploader",props:{modelValue:{type:[String,File],default:null},cropRatio:{type:String,default:"1:1"},imageOnly:{type:Boolean,default:!1},videoOnly:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,i=Bs(()=>{let f="*";return n.imageOnly?f="image/*":n.videoOnly&&(f="video/*"),[f]}),s=wt(null),r=sc(As,_s,ws,Os,Ls,bs,Cs),a={process:(f,h,g,I)=>{setTimeout(()=>{I(Date.now())},1500)},load:(f,h)=>{fetch(f).then(g=>g.blob()).then(h)},revert:null},l=f=>{d.value||(f.length==1?t("update:modelValue",f[0].file):t("update:modelValue",""),window.setTimeout(u))},o=async f=>{if(d.value)u();else{let h=await f.requestPrepare();l([{file:new File([h],f.filename)}])}},d=wt(!1),c=()=>d.value=!0,u=()=>d.value=!1,p=async()=>{c();let f=n.modelValue,h,g=await fetch(f).then(I=>{const _=I.headers.get("content-disposition"),E=_&&_.match(/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/i);return h=E&&E[1].replace(/['"]/g,""),I.blob()}).then(I=>new File([I],h,{type:I.type}));s.value.addFile(g),u()};return Fs(()=>{Us(async()=>{typeof n.modelValue=="string"&&(n.modelValue!=""?p():s.value.removeFiles())})}),(f,h)=>(te(),vi(Li(r),Pi({name:"test",ref_key:"pond",ref:s,server:a,onUpdatefiles:l,onPreparefile:o,"label-idle":"拖拉或點擊上傳檔案 <span class='filepond--label-action'></span>",acceptedFileTypes:i.value},f.$attrs),null,16,["acceptedFileTypes"]))}};var yu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wu(e,t,n){return n={path:t,exports:{},require:function(i,s){return Au(i,s??n.path)}},e(n,n.exports),n.exports}function Au(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Ou=wu(function(e,t){(function(n,i){e.exports=i()})(yu,function(){var n="__v-click-outside",i=typeof window<"u",s=typeof navigator<"u",r=i&&("ontouchstart"in window||s&&navigator.msMaxTouchPoints>0)?["touchstart"]:["click"],a=function(c){var u=c.event,p=c.handler;(0,c.middleware)(u)&&p(u)},l=function(c,u){var p=function(E){var m=typeof E=="function";if(!m&&typeof E!="object")throw new Error("v-click-outside: Binding value must be a function or an object");return{handler:m?E:E.handler,middleware:E.middleware||function(T){return T},events:E.events||r,isActive:E.isActive!==!1,detectIframe:E.detectIframe!==!1,capture:!!E.capture}}(u.value),f=p.handler,h=p.middleware,g=p.detectIframe,I=p.capture;if(p.isActive){if(c[n]=p.events.map(function(E){return{event:E,srcTarget:document.documentElement,handler:function(m){return function(T){var y=T.el,O=T.event,P=T.handler,R=T.middleware,M=O.path||O.composedPath&&O.composedPath();(M?M.indexOf(y)<0:!y.contains(O.target))&&a({event:O,handler:P,middleware:R})}({el:c,event:m,handler:f,middleware:h})},capture:I}}),g){var _={event:"blur",srcTarget:window,handler:function(E){return function(m){var T=m.el,y=m.event,O=m.handler,P=m.middleware;setTimeout(function(){var R=document.activeElement;R&&R.tagName==="IFRAME"&&!T.contains(R)&&a({event:y,handler:O,middleware:P})},0)}({el:c,event:E,handler:f,middleware:h})},capture:I};c[n]=[].concat(c[n],[_])}c[n].forEach(function(E){var m=E.event,T=E.srcTarget,y=E.handler;return setTimeout(function(){c[n]&&T.addEventListener(m,y,I)},0)})}},o=function(c){(c[n]||[]).forEach(function(u){return u.srcTarget.removeEventListener(u.event,u.handler,u.capture)}),delete c[n]},d=i?{beforeMount:l,updated:function(c,u){var p=u.value,f=u.oldValue;JSON.stringify(p)!==JSON.stringify(f)&&(o(c),l(c,{value:p}))},unmounted:o}:{};return{install:function(c){c.directive("click-outside",d)},directive:d}})}),Su=Ou;const Du={class:"v3ti-loader-wrapper"},Mu=re("div",{class:"v3ti-loader"},null,-1),vu=re("span",null,"Loading",-1),Pu=[Mu,vu];function Lu(e,t){return te(),se("div",Du,Pu)}function Ns(e,t){t===void 0&&(t={});var n=t.insertAt;if(!(!e||typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",n==="top"&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}}var bu=`.v3ti-loader-wrapper {
  display: flex;
  align-items: center;
  justify-content: center;
  color: #112B3C;
}
.v3ti-loader-wrapper .v3ti-loader {
  width: 18px;
  height: 18px;
  border-radius: 50%;
  display: inline-block;
  border-top: 2px solid #112B3C;
  border-right: 2px solid transparent;
  box-sizing: border-box;
  animation: rotation 0.8s linear infinite;
  margin-right: 8px;
}
@keyframes rotation {
0% {
    transform: rotate(0deg);
}
100% {
    transform: rotate(360deg);
}
}`;Ns(bu);const xs={};xs.render=Lu;var Cu=xs,Gs={name:"Vue3TagsInput",emits:["update:modelValue","update:tags","on-limit","on-tags-changed","on-remove","on-error","on-focus","on-blur","on-select","on-select-duplicate-tag","on-new-tag"],props:{readOnly:{type:Boolean,default:!1},modelValue:{type:String,default:""},validate:{type:[String,Function,Object],default:""},addTagOnKeys:{type:Array,default:function(){return[13,",",32]}},placeholder:{type:String,default:""},tags:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},limit:{type:Number,default:-1},allowDuplicates:{type:Boolean,default:!1},addTagOnBlur:{type:Boolean,default:!1},selectItems:{type:Array,default:()=>[]},select:{type:Boolean,default:!1},duplicateSelectItem:{type:Boolean,default:!0},uniqueSelectField:{type:String,default:"id"},addTagOnKeysWhenSelect:{type:Boolean,default:!1},isShowNoData:{type:Boolean,default:!0}},components:{Loading:Cu},directives:{clickOutside:Su.directive},data(){return{isInputActive:!1,isError:!1,newTag:"",innerTags:[],multiple:!1}},computed:{isLimit(){const e=this.limit>0&&Number(this.limit)===this.innerTags.length;return e&&this.$emit("on-limit"),e},selectedItemsIds(){return this.duplicateSelectItem?[]:this.tags.map(e=>e[this.uniqueSelectField]||"")}},watch:{error(){this.isError=this.error},modelValue:{immediate:!0,handler(e){this.newTag=e}},tags:{deep:!0,immediate:!0,handler(e){this.innerTags=[...e]}}},methods:{isShot(e){return!!this.$slots[e]},makeItNormal(e){this.$emit("update:modelValue",e.target.value),this.$refs.inputTag.className="v3ti-new-tag",this.$refs.inputTag.style.textDecoration="none"},resetData(){this.innerTags=[]},resetInputValue(){this.newTag="",this.$emit("update:modelValue","")},setPosition(){const e=this.$refs.inputBox,t=this.$refs.contextMenu;if(e&&t){t.style.display="block";const n=e.clientHeight||32,i=3;t.style.top=n+i+"px"}},closeContextMenu(){this.$refs.contextMenu&&(this.$refs.contextMenu.style={display:"none"})},handleSelect(e){if(this.isShowCheckmark(e)){const t=this.tags.filter(n=>e.id!==n.id);this.$emit("update:tags",t),this.$emit("on-select-duplicate-tag",e),this.resetInputValue()}else this.$emit("on-select",e);this.$nextTick(()=>{this.closeContextMenu()})},isShowCheckmark(e){return this.duplicateSelectItem?!1:this.selectedItemsIds.includes(e[this.uniqueSelectField])},focusNewTag(){this.select&&!this.disabled&&this.setPosition(),!(this.readOnly||!this.$el.querySelector(".v3ti-new-tag"))&&this.$el.querySelector(".v3ti-new-tag").focus()},handleInputFocus(e){this.isInputActive=!0,this.$emit("on-focus",e)},handleInputBlur(e){this.isInputActive=!1,this.addNew(e),this.$emit("on-blur",e)},addNew(e){if(this.select&&!this.addTagOnKeysWhenSelect)return;const t=e?this.addTagOnKeys.indexOf(e.keyCode)!==-1||this.addTagOnKeys.indexOf(e.key)!==-1:!0,n=e&&e.type!=="blur";!t&&(n||!this.addTagOnBlur)||this.isLimit||(this.newTag&&(this.allowDuplicates||this.innerTags.indexOf(this.newTag)===-1)&&this.validateIfNeeded(this.newTag)?(this.innerTags.push(this.newTag),this.addTagOnKeysWhenSelect&&(this.$emit("on-new-tag",this.newTag),this.updatePositionContextMenu()),this.resetInputValue(),this.tagChange(),e&&e.preventDefault()):(this.validateIfNeeded(this.newTag)?this.makeItError(!0):this.makeItError(!1),e&&e.preventDefault()))},updatePositionContextMenu(){this.$nextTick(()=>{this.setPosition()})},makeItError(e){this.newTag!==""&&(this.$refs.inputTag.className="v3ti-new-tag v3ti-new-tag--error",this.$refs.inputTag.style.textDecoration="underline",this.$emit("on-error",e))},validateIfNeeded(e){return this.validate===""||this.validate===void 0?!0:typeof this.validate=="function"?this.validate(e):!0},removeLastTag(){this.newTag||(this.innerTags.pop(),this.tagChange(),this.updatePositionContextMenu())},remove(e){this.innerTags.splice(e,1),this.tagChange(),this.$emit("on-remove",e),this.updatePositionContextMenu()},tagChange(){this.$emit("on-tags-changed",this.innerTags)}}};const Nu={key:1,class:"v3ti-tag-content"},xu=["onClick"],Gu=["placeholder","disabled"],Bu={key:0,class:"v3ti-loading"},Fu={key:1,class:"v3ti-no-data"},Uu={key:1},Vu={key:2},$u=["onClick"],Hu={class:"v3ti-context-item--label"},Wu={key:0,class:"v3ti-icon-selected-tag",width:"44",height:"44",viewBox:"0 0 24 24","stroke-width":"1.5",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},ku=re("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),qu=re("path",{d:"M5 12l5 5l10 -10"},null,-1),Yu=[ku,qu];function zu(e,t,n,i,s,r){const a=Vs("Loading"),l=$s("click-outside");return An((te(),se("div",{onClick:t[6]||(t[6]=o=>r.focusNewTag()),class:ct([{"v3ti--focus":s.isInputActive,"v3ti--error":s.isError},"v3ti"])},[re("div",{class:ct(["v3ti-content",{"v3ti-content--select":n.select}]),ref:"inputBox"},[(te(!0),se(Qt,null,On(s.innerTags,(o,d)=>(te(),se("span",{key:d,class:"v3ti-tag"},[r.isShot("item")?lt(e.$slots,"item",Sn(Pi({key:0},{name:o,index:d,tag:o}))):(te(),se("span",Nu,Hs(o),1)),n.readOnly?Ue("",!0):(te(),se("a",{key:2,onClick:Ft(c=>r.remove(d),["prevent","stop"]),class:"v3ti-remove-tag"},null,8,xu))]))),128)),An(re("input",{ref:"inputTag",placeholder:n.placeholder,"onUpdate:modelValue":t[0]||(t[0]=o=>s.newTag=o),onKeydown:[t[1]||(t[1]=Ws(Ft(function(){return r.removeLastTag&&r.removeLastTag(...arguments)},["stop"]),["delete"])),t[2]||(t[2]=function(){return r.addNew&&r.addNew(...arguments)})],onBlur:t[3]||(t[3]=function(){return r.handleInputBlur&&r.handleInputBlur(...arguments)}),onFocus:t[4]||(t[4]=function(){return r.handleInputFocus&&r.handleInputFocus(...arguments)}),onInput:t[5]||(t[5]=function(){return r.makeItNormal&&r.makeItNormal(...arguments)}),class:"v3ti-new-tag",disabled:n.readOnly},null,40,Gu),[[ks,s.newTag]])],2),n.select?(te(),se("section",{key:0,class:ct(["v3ti-context-menu",{"v3ti-context-menu-no-data":!n.isShowNoData&&n.selectItems.length===0}]),ref:"contextMenu"},[n.loading?(te(),se("div",Bu,[r.isShot("loading")?lt(e.$slots,"default",{key:0}):(te(),vi(a,{key:1}))])):Ue("",!0),!n.loading&&n.selectItems.length===0&&n.isShowNoData?(te(),se("div",Fu,[r.isShot("no-data")?lt(e.$slots,"no-data",{key:0}):(te(),se("span",Uu," No data "))])):Ue("",!0),!n.loading&&n.selectItems.length>0?(te(),se("div",Vu,[(te(!0),se(Qt,null,On(n.selectItems,(o,d)=>(te(),se("div",{key:d,class:ct(["v3ti-context-item",{"v3ti-context-item--active":r.isShowCheckmark(o)}]),onClick:Ft(c=>r.handleSelect(o,d),["stop"])},[re("div",Hu,[lt(e.$slots,"select-item",Sn(qs(o)))]),r.isShowCheckmark(o)?(te(),se("svg",Wu,Yu)):Ue("",!0)],10,$u))),128))])):Ue("",!0)],2)):Ue("",!0)],2)),[[l,r.closeContextMenu]])}var Xu=`.v3ti {
  border-radius: 5px;
  min-height: 32px;
  line-height: 1.4;
  background-color: #fff;
  border: 1px solid #9ca3af;
  cursor: text;
  text-align: left;
  -webkit-appearance: textfield;
  display: flex;
  flex-wrap: wrap;
  position: relative;
}
.v3ti .v3ti-icon-selected-tag {
  stroke: #19be6b;
  width: 1rem;
  height: 1rem;
  margin-left: 4px;
}
.v3ti--focus {
  outline: 0;
  border-color: #000000;
  box-shadow: 0 0 0 1px #000000;
}
.v3ti--error {
  border-color: #F56C6C;
}
.v3ti .v3ti-no-data {
  color: #d8d8d8;
  text-align: center;
  padding: 4px 7px;
}
.v3ti .v3ti-loading {
  padding: 4px 7px;
  text-align: center;
}
.v3ti .v3ti-context-menu {
  max-height: 150px;
  min-width: 150px;
  overflow: auto;
  display: none;
  outline: none;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  margin: 0;
  padding: 5px 0;
  background: #ffffff;
  z-index: 1050;
  color: #475569;
  box-shadow: 0 3px 8px 2px rgba(0, 0, 0, 0.1);
  border-radius: 0 0 6px 6px;
}
.v3ti .v3ti-context-menu .v3ti-context-item {
  padding: 4px 7px;
  display: flex;
  align-items: center;
}
.v3ti .v3ti-context-menu .v3ti-context-item:hover {
  background: #e8e8e8;
  cursor: pointer;
}
.v3ti .v3ti-context-menu .v3ti-context-item--label {
  flex: 1;
  min-width: 1px;
}
.v3ti .v3ti-context-menu .v3ti-context-item--active {
  color: #317CAF;
}
.v3ti .v3ti-context-menu-no-data {
  padding: 0;
}
.v3ti .v3ti-content {
  width: 100%;
  display: flex;
  flex-wrap: wrap;
}
.v3ti .v3ti-content--select {
  padding-right: 30px;
}
.v3ti .v3ti-tag {
  display: flex;
  font-weight: 400;
  margin: 3px;
  padding: 0 5px;
  background: #317CAF;
  color: #ffffff;
  height: 27px;
  border-radius: 5px;
  align-items: center;
  max-width: calc(100% - 16px);
}
.v3ti .v3ti-tag .v3ti-tag-content {
  flex: 1;
  min-width: 1px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.v3ti .v3ti-tag .v3ti-remove-tag {
  color: #ffffff;
  transition: opacity 0.3s ease;
  opacity: 0.5;
  cursor: pointer;
  padding: 0 5px 0 7px;
}
.v3ti .v3ti-tag .v3ti-remove-tag::before {
  content: "x";
}
.v3ti .v3ti-tag .v3ti-remove-tag:hover {
  opacity: 1;
}
.v3ti .v3ti-new-tag {
  background: transparent;
  border: 0;
  font-weight: 400;
  margin: 3px;
  outline: none;
  padding: 0 4px;
  flex: 1;
  min-width: 60px;
  height: 27px;
}
.v3ti .v3ti-new-tag--error {
  color: #F56C6C;
}`;Ns(Xu);Gs.render=zu;var ju=(()=>{const e=Gs;return e.install=t=>{t.component("Vue3TagsInput",e)},e})();const Qu={class:"row px-3"},Ku={class:"card custom-card"},Zu={class:"card-body"},Ju={class:"row mb-4"},ef={class:"col-12 mb-4"},tf={class:"col-12 mb-4"},nf={class:"col-12 text-end"},sf=["disabled"],rf="影片上傳",cf={__name:"index",setup(e){const t=wt(["測試"]),n=wt(null);return(i,s)=>(te(),se(Qt,null,[Ut(Ys,{title:rf}),re("div",Qu,[re("div",Ku,[re("div",Zu,[re("div",Ju,[re("div",ef,[Ut(Ru,{videoOnly:!0,modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=r=>n.value=r),imagePreviewHeight:"170",imageCropAspectRatio:"1:1",imageResizeTargetWidth:"200",imageResizeTargetHeight:"200"},null,8,["modelValue"])]),re("div",tf,[Ut(Li(ju),{tags:t.value,"allow-duplicates":!1,placeholder:"輸入欲分析之關鍵字,輸入文字後請按enter"},null,8,["tags"])]),re("div",nf,[re("button",{class:"btn btn-primary",disabled:n.value===null||t.value.length==0},"送出",8,sf)])])])])])],64))}};export{cf as default};
