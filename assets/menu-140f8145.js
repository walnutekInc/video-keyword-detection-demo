import{l as h,J as c,_ as o}from"./index-0f886d3f.js";const d={itemList:[{name:"Dashboard",title:"影片上傳"},{name:"Video",title:"影片管理"}]},I=()=>{let a=d.itemList,n=[];for(let e of a){let i={icon:e.icon??"fa fa-circle",active:!1,defaultActive:!1};if(e.name&&e.title)i.name=e.name,i.title=e.title,i.type="link",i.active=!0,n.push(i);else if(e.children&&e.children.length>0){i.title=e.title,i.type="sub",i.active=!1;let t=[];for(let l of e.children){let m={active:!1,defaultActive:!1};l.name&&l.title&&(m.name=l.name,m.title=l.title,m.type="link",m.active=!0,t.push(m))}t.length>0&&(i.children=t,n.push(i))}}return n},b=h(()=>c().matched.filter(a=>a.name!="")),v=o("menu",{state:()=>({menuItemList:[],isInit:!1}),getters:{activeMenuStackList(){var i,t,l,m,f,r;let a="Dashboard",n=this.menuItemList.find(s=>s.name==a),e=[];for(let s of this.menuItemList){if(e.length>0)break;if(s.active&&e.push({title:s.title,name:s.name}),s.children){for(let u of s.children)if(u.active){e.push({title:u.title,name:u.name});break}}}if(e.length>0&&e[0].name!=a)e.unshift(n);else if(e.length==0){let s=c();(i=s.meta)!=null&&i.parent?(e=this.getMenuStackList((t=s.meta)==null?void 0:t.parent),e.push({title:(l=s.meta)==null?void 0:l.title,name:s.name}),this.manualActiveMenu((m=s.meta)==null?void 0:m.parent)):(f=s.meta)!=null&&f.title&&(e.push(n),e.push({title:(r=s.meta)==null?void 0:r.title,name:s.name}))}return e},getMenuStackList(){return a=>{let n="Dashboard",e=this.menuItemList.find(t=>t.name==n),i=[];for(let t of this.menuItemList){if(i.length>0)break;if(t.name==a){i.push({title:t.title,name:t.name});break}else if(t.children){for(let l of t.children)if(l.name==a){i.push({title:t.title,name:t.name}),i.push({title:l.title,name:l.name});break}}}return i.length>0&&i[0].name!=n&&i.unshift(e),i}}},actions:{initMenuItemList(){if(!this.isInit){this.isInit=!0,this.menuItemList=I();let a=b.value.pop();a&&a.name!=""&&this.manualActiveMenu(a.name)}},inactiveAllMenuItem(){for(let a of this.menuItemList)if(a.active=!1,a.defaultActive=!1,a.children)for(let n of a.children)n.active=!1,n.defaultActive=!1},manualActiveMenu(a){let n=!1,e=null,i=null;for(let t of this.menuItemList){if(t.name==a){n=!0,e=t;break}if(t.children){for(let l of t.children)if(l.name==a){n=!0,e=t,i=l;break}}if(n)break}if(e){for(let t of this.menuItemList)if(t.active=t==e,t.defaultActive=t==e,t.children)for(let l of t.children)l.active=l==i,l.defaultActive=l==i}}}});export{v as u};
